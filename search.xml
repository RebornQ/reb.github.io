<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>é‡ŒåŒ…æ©ç¬¬ä¸€æ¬¾å¼€æºç¬¬ä¸‰æ–¹åº“ plugin-locale é¢ä¸–ï¼ï¼</title>
      <link href="/posts/7afcff16.html"/>
      <url>/posts/7afcff16.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>é¡¹ç›®å†ç»9ä¸ªæœˆçš„æ¼”åŒ–ï¼Œç»ˆäºä»ä¸€å¼€å§‹ä¸ºå®å¯æ¢¦çš„é‚£æ ·è®°è´¦ç ”ç©¶çš„è¯­è¨€åˆ‡æ¢è€Œå†™çš„<code>Demo</code>è¿›åŒ–æˆç¬¬ä¸‰æ–¹åº“ã€‚</p><p>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªå¼€æºç¬¬ä¸‰æ–¹åº“ï¼Œè¯´èµ·æ¥è¿˜æŒºæ¿€åŠ¨çš„ï¼ˆå—¯â€¦å¤±çœ äº†â€¦ï¼‰ï½</p><a id="more"></a><h1 id="ä½¿ç”¨æ–‡æ¡£"><a href="#ä½¿ç”¨æ–‡æ¡£" class="headerlink" title="ä½¿ç”¨æ–‡æ¡£"></a>ä½¿ç”¨æ–‡æ¡£</h1><p>ä¸€ä¸ªç”¨ Kotlin å†™çš„å¤šè¯­è¨€åˆ‡æ¢çš„ Android ç¬¬ä¸‰æ–¹åº“ã€‚</p><p><del>ç›®å‰åªæ”¯æŒ<code>è‹±æ–‡/ç®€ä¸­/ç¹ä¸­</code>ä¸‰ç§è¯­è¨€ï¼Œéœ€è¦æ·»åŠ å…¶ä»–çš„è¯­è¨€å¯ä»¥æäº¤ issue æˆ–è€…ç›´æ¥è”ç³»æˆ‘ã€‚</del></p><p>ç°åœ¨æˆ‘ä»¬æ”¯æŒä»»ä½•ä¸€ç§è¯­è¨€ï¼Œä½†æ˜¯éœ€è¦ä½ è‡ªå·±å®šä¹‰ä½ è¦æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ï¼ˆKey ä¸ Value é—´çš„å…³ç³»ï¼‰ï¼Œè¯¦æƒ…è¯·çœ‹ğŸ‘‰<a href="https://github.com/RebornQ/Plugin-Locale-Kotlin#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">æ³¨æ„äº‹é¡¹</a>ã€‚</p><h2 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h2><p><strong>ï¼ˆå¯é€‰ï¼‰é¡¹ç›®çš„ build.gradle ä¸­åŠ å…¥ï¼š</strong></p><blockquote><p><em>å½“ JCenter æ— æ³•é“¾æ¥çš„æ—¶å€™å¯ä»¥å°è¯•ä½¿ç”¨</em></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        maven &#123; url <span class="string">&quot;https://dl.bintray.com/rebornq/maven/&quot;</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>app.gradle ä¸­åŠ å…¥ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&#x27;com.mallotec.reb:plugin-locale:&#123;last-version&#125;&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„ï¼š<code>&#123;last-version&#125;</code>è¦æ›¿æ¢ä¸ºæœ€æ–°ç‰ˆæœ¬å·</strong>ï¼Œæœ€æ–°ç‰ˆæœ¬é“¾æ¥ï¼š<a href="https://bintray.com/rebornq/maven/plugin-locale/_latestVersion">https://bintray.com/rebornq/maven/plugin-locale/_latestVersion</a></p></blockquote><h2 id="åªéœ€ä¸‰æ­¥å³å¯é£Ÿç”¨"><a href="#åªéœ€ä¸‰æ­¥å³å¯é£Ÿç”¨" class="headerlink" title="åªéœ€ä¸‰æ­¥å³å¯é£Ÿç”¨"></a>åªéœ€ä¸‰æ­¥å³å¯é£Ÿç”¨</h2><ol><li><p>åœ¨ Application ä¸­åˆå§‹åŒ–</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LocalePlugin.init(<span class="keyword">this</span>)</span><br></pre></td></tr></table></figure><p> æˆ–</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LocalePlugin.init(<span class="keyword">this</span>, &#123; åˆ·æ–°ç•Œé¢çš„æ–¹å¼ &#125;)</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­<code>&#123; åˆ·æ–°ç•Œé¢çš„æ–¹å¼ &#125;</code>æœ‰ä¸‰ç§ï¼š</p><ol><li><code>LocaleConstant.RESTART_TO_LAUNCHER_ACTIVITY</code>: æ¸…ç©ºæ ˆä¸­æ‰€æœ‰<code>Activity</code>å¹¶é‡å¯åˆ°<code>LauncherActivity</code></li><li><code>LocaleConstant.RECREATE_CURRENT_ACTIVITY</code>: é‡æ–°åˆ›å»ºå½“å‰<code>Activity</code>ï¼Œ**<em>é»˜è®¤æ˜¯è¿™ç§æ–¹å¼ï¼Œå¯ä¸å¡«å†™**</em>ã€‚<strong>æ­¤æ–¹å¼å¯èƒ½ä¼šå› ä¸ºå†…å­˜ä½æ— æ³•æ³¨é”€å¹¿æ’­æ¥æ”¶å™¨è€Œå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œè§£å†³æ–¹æ³•è¯·æŸ¥çœ‹ğŸ‘‰<a href="https://github.com/RebornQ/Plugin-Locale-Kotlin#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">å¸¸è§é—®é¢˜</a>æˆ–ğŸ‘‰<a href="https://github.com/RebornQ/Plugin-Locale-Kotlin/wiki/Activity-%E5%AF%B9%E8%B1%A1%E8%A2%AB%E5%9B%9E%E6%94%B6%E6%97%B6%E8%BF%98%E6%B2%A1%E6%9D%A5%E5%BE%97%E5%8F%8A%E6%89%A7%E8%A1%8C-onDestroy-%E6%96%B9%E6%B3%95%E5%AF%BC%E8%87%B4%E6%B2%A1%E6%B3%A8%E9%94%80%E5%AF%B9%E5%BA%94%E7%9A%84%E5%B9%BF%E6%92%AD%E6%8E%A5%E6%94%B6%E5%99%A8%E5%BC%95%E5%8F%91%E7%9A%84%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F">Wiki</a></strong></li><li><code>LocaleConstant.CUSTOM_WAY_TO_UPDATE_INTERFACE</code>: è‡ªå®šä¹‰åˆ·æ–°ç•Œé¢ï¼Œ <strong>å¦‚æœé€‰è¿™ç§æ–¹å¼çš„æœ‹å‹è¯·åŠ¡å¿…æŸ¥çœ‹ğŸ‘‰<a href="https://github.com/RebornQ/Plugin-Locale-Kotlin#%E6%9B%B4%E5%A4%9A%E7%94%A8%E6%B3%95">æ›´å¤šç”¨æ³•</a>æˆ–ğŸ‘‰<a href="https://github.com/RebornQ/Plugin-Locale-Kotlin/wiki/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%87%E6%8D%A2%E8%AF%AD%E8%A8%80%E5%90%8E%E5%88%B7%E6%96%B0%E7%95%8C%E9%9D%A2%E7%9A%84%E6%96%B9%E5%BC%8F">Wiki</a></strong></li></ol></blockquote></li><li><p>å®šä¹‰å¥½æ”¯æŒçš„è¯­è¨€åˆ—è¡¨å¯¹åº”å…³ç³»ï¼Œè¯¦æƒ…è¯·çœ‹ğŸ‘‰<a href="https://github.com/RebornQ/Plugin-Locale-Kotlin#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">æ³¨æ„äº‹é¡¹</a>ï¼Œå¦‚ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> fun <span class="title">getLocale</span><span class="params">(which : String)</span>: Locale </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> when (which) &#123;</span><br><span class="line">        <span class="string">&quot;0&quot;</span> -&gt; Locale.ROOT  <span class="comment">// è·Ÿéšç³»ç»Ÿ</span></span><br><span class="line">        <span class="string">&quot;1&quot;</span> -&gt; Locale.ENGLISH</span><br><span class="line">        <span class="string">&quot;2&quot;</span> -&gt; Locale.SIMPLIFIED_CHINESE</span><br><span class="line">        <span class="string">&quot;3&quot;</span> -&gt; Locale.TRADITIONAL_CHINESE</span><br><span class="line">        <span class="keyword">else</span> -&gt; Locale.SIMPLIFIED_CHINESE</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¸€å¥ä»£ç è°ƒç”¨åˆ‡æ¢è¯­è¨€ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åº”ç”¨åˆ‡æ¢çš„è¯­è¨€</span></span><br><span class="line">LocaleHelper.getInstance()</span><br><span class="line">    .language(getLocale(which.toString()))</span><br><span class="line">    .apply(<span class="keyword">this</span>)</span><br></pre></td></tr></table></figure><p> è‹¥<code>&#123; åˆ·æ–°ç•Œé¢çš„æ–¹å¼ &#125;</code>é€‰æ‹©äº†ç¬¬ä¸€ç§<code>LocaleConstant.RESTART_TO_LAUNCHER_ACTIVITY</code>ï¼Œè¯·ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ï¼š</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åº”ç”¨åˆ‡æ¢çš„è¯­è¨€</span></span><br><span class="line">val intent = Intent(<span class="keyword">this</span>, TargetActivity::class.java)</span><br><span class="line">LocaleHelper.getInstance()</span><br><span class="line">    .language(getLocale(which.toString()))</span><br><span class="line">    .apply(<span class="keyword">this</span>, intent)</span><br></pre></td></tr></table></figure><p> è‹¥<code>&#123; åˆ·æ–°ç•Œé¢çš„æ–¹å¼ &#125;</code>é€‰æ‹©äº†ç¬¬ä¸‰ç§<code>LocaleConstant.CUSTOM_WAY_TO_UPDATE_INTERFACE</code>ï¼Œè¯·ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ï¼š</p><blockquote><p> ä¸Šé¢æœ‰å†™ï¼Œ<strong>æŸ¥çœ‹ğŸ‘‰<a href="https://github.com/RebornQ/Plugin-Locale-Kotlin#%E6%9B%B4%E5%A4%9A%E7%94%A8%E6%B3%95">æ›´å¤šç”¨æ³•</a>æˆ–ğŸ‘‰<a href="https://github.com/RebornQ/Plugin-Locale-Kotlin/wiki/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%87%E6%8D%A2%E8%AF%AD%E8%A8%80%E5%90%8E%E5%88%B7%E6%96%B0%E7%95%8C%E9%9D%A2%E7%9A%84%E6%96%B9%E5%BC%8F">Wiki</a></strong></p></blockquote><p><strong>æ³¨æ„ï¼šè¿™é‡Œçš„<code>this</code>å¿…é¡»æ˜¯å½“å‰<code>Activity</code>çš„<code>Context</code>ï¼›<code>which</code>æ˜¯æ‰€é€‰çš„è¯­è¨€æ ‡è®°ï¼Œè¯¦æƒ…è¯·çœ‹ä¸‹æ–¹æ³¨æ„äº‹é¡¹çš„å¯¹åº”å…³ç³»</strong></p></li></ol><h1 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h1><p>æ•ˆæœå›¾ï¼š</p><p><img src="/images/MultiLanguageDemo-NoRestartToLauncher.gif" alt="MultiLanguageDemo-NoRestartToLaunche"></p><p>æ›´å¤šè¯·æŸ¥çœ‹æœ¬é¡¹ç›®çš„ <a href="https://github.com/RebornQ/Plugin-Locale-Kotlin/tree/master/demo">Demo</a></p><h1 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h1><h2 id="åˆ‡æ¢è¯­è¨€å¤±æ•ˆåŸå› åŠè§£å†³æ–¹æ³•"><a href="#åˆ‡æ¢è¯­è¨€å¤±æ•ˆåŸå› åŠè§£å†³æ–¹æ³•" class="headerlink" title="åˆ‡æ¢è¯­è¨€å¤±æ•ˆåŸå› åŠè§£å†³æ–¹æ³•"></a>åˆ‡æ¢è¯­è¨€å¤±æ•ˆåŸå› åŠè§£å†³æ–¹æ³•</h2><details><summary>AndroidX AppCompat åº“ 1.1.0-alpha03 ä»¥ä¸Šç‰ˆæœ¬å¯¼è‡´çš„ Locale è¢«ä¸€ä¸ªæ–°çš„ Configuration å¯¹è±¡è¦†ç›–æ‰</summary><p>ä»…å†™å‡ºè§£å†³æ–¹æ³•ï¼Œæœ¬demoç»æµ‹è¯•æ— æ³•å¤ç°é—®é¢˜</p><p>åœ¨<code>Activity</code>ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç å³å¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é˜²æ­¢ Locale è¢«ä¸€ä¸ªæ–°çš„ Configuration å¯¹è±¡è¦†ç›–æ‰ï¼ˆAndroidX AppCompat åº“ 1.1.0-alpha03 ä»¥ä¸Šç‰ˆæœ¬ï¼‰</span></span><br><span class="line"><span class="function">override fun <span class="title">applyOverrideConfiguration</span><span class="params">(overrideConfiguration: Configuration?)</span> </span>&#123;</span><br><span class="line">    overrideConfiguration?.setLocale(LocaleHelper.getInstance().getSetLocale())</span><br><span class="line">    <span class="keyword">super</span>.applyOverrideConfiguration(overrideConfiguration)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h2 id="å†…å­˜æ³„æ¼åŸå› åŠè§£å†³æ–¹æ³•"><a href="#å†…å­˜æ³„æ¼åŸå› åŠè§£å†³æ–¹æ³•" class="headerlink" title="å†…å­˜æ³„æ¼åŸå› åŠè§£å†³æ–¹æ³•"></a>å†…å­˜æ³„æ¼åŸå› åŠè§£å†³æ–¹æ³•</h2><details><summary>Activity å¯¹è±¡è¢«å›æ”¶æ—¶è¿˜æ²¡æ¥å¾—åŠæ‰§è¡Œ onDestroy() æ–¹æ³•å¯¼è‡´æ²¡æ³¨é”€å¯¹åº”çš„å¹¿æ’­æ¥æ”¶å™¨å¼•å‘çš„å†…å­˜æ³„æ¼</summary><p>è¿™ç§æƒ…å†µå¸¸è§äºå†…å­˜ä½çš„æ—¶å€™<code>Activity</code>è¢«å¼ºåˆ¶å›æ”¶ï¼Œä¸èµ°<code>onDestroy()</code>æ–¹æ³•å¯¼è‡´çš„ã€‚</p><p>é‡åˆ°è¿™ç§æƒ…å†µçš„æœ‹å‹è¯·è‡ªè¡Œåˆ¤æ–­å†…å­˜ä½å³å°†å›æ”¶<code>Activity</code>çš„åœ°æ–¹ï¼ˆ<code>onTrimMemory()</code>?ï¼‰ï¼Œ</p><p>ç„¶åæ‰‹åŠ¨è°ƒç”¨ä»¥ä¸‹ä»£ç æ³¨é”€å¹¿æ’­æ¥æ”¶å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BroadcastReceiverManager.unregisterBroadcastReceiver(activity)</span><br></pre></td></tr></table></figure></details><h1 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h1><p>æ¬¢è¿å¤§å®¶ Starã€Fork å’Œæ Issue æ PR å‘€ï½</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/RebornQ/Plugin-Locale-Kotlin">https://github.com/RebornQ/Plugin-Locale-Kotlin</a></p><h1 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks"></a>Thanks</h1><p>ä»¥ä¸‹ä¸åˆ†æ’åå…ˆå</p><ul><li>Thanks <a href="https://github.com/MichaelJokAr">@MichaelJokAr</a>. æ„Ÿè°¢ <a href="https://github.com/MichaelJokAr">@MichaelJokAr</a> çš„æ•™ç¨‹â€”â€”<a href="https://blog.csdn.net/a1018875550/article/details/79845949">Androidå›½é™…åŒ–(å¤šè¯­è¨€)å®ç°ï¼Œæ”¯æŒ8.0</a></li><li>Thanks <a href="https://github.com/Bakumon">@Bakumon</a>. æ„Ÿè°¢ <a href="https://github.com/Bakumon">@å®å¯æ¢¦</a> çš„æŒ‡ç‚¹</li><li>Thanks <a href="https://github.com/JessYanCoding">@JessYan</a>. æ„Ÿè°¢ <a href="https://github.com/JessYanCoding">@JessYan</a> çš„æ•™ç¨‹â€”â€”<a href="https://juejin.im/post/590f09ec128fe100584ee6b0">æˆ‘ä¸€è¡Œä»£ç éƒ½ä¸å†™å®ç°Toolbar!ä½ å´è¿˜åœ¨å°è£…BaseActivity?</a></li><li>Thanks <a href="https://proandroiddev.com/@yaroslavberezanskyi">@Yaroslav Berezanskyi</a>. æ„Ÿè°¢ <a href="https://proandroiddev.com/@yaroslavberezanskyi">@Yaroslav Berezanskyi</a> çš„æ•™ç¨‹â€”â€”<a href="https://proandroiddev.com/change-language-programmatically-at-runtime-on-android-5e6bc15c758">How to change the language on Android at runtime and donâ€™t go mad</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> ç¬¬ä¸‰æ–¹å¼€æºåº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Androidå¤šè¯­è¨€åˆ‡æ¢å®ç°è¿›åŒ–ç‰ˆ--Kotlinå®ç°</title>
      <link href="/posts/e836c9c6.html"/>
      <url>/posts/e836c9c6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‰é¢å‘äº†ä¸€ç¯‡â€œ<a href="https://reb.mallotec.com/posts/8a9e22db.html">Androidå¤šè¯­è¨€åˆ‡æ¢å®ç°â€”â€”Javaå®ç°</a>â€ï¼Œä½†æ˜¯é‚£ä¸ªæ–¹æ¡ˆæœ‰ç¼ºé™·ï¼Œäºæ˜¯ä»Šå¤©æƒ³å†™ä¸ªæ›´å®Œç¾çš„æ–¹æ¡ˆã€‚</p><a id="more"></a><h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><p>åŸç†æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œä¸å¤šè¯´ï¼Œçœ‹å‰é¢é‚£ç¯‡æ–‡ç« çš„åŸç†éƒ¨åˆ†</p><h1 id="æ–°çš„å°è¯•"><a href="#æ–°çš„å°è¯•" class="headerlink" title="æ–°çš„å°è¯•"></a>æ–°çš„å°è¯•</h1><p>æˆ‘åˆå»æœäº†ä¸€æ³¢ï¼Œçœ‹äº†ä¸‹Activityçš„ç”Ÿå‘½å‘¨æœŸã€Applicationæ–¹æ³•çš„æ‰§è¡Œé¡ºåºç­‰ç­‰â€¦</p><h2 id="ä¸»è¦æ€è·¯"><a href="#ä¸»è¦æ€è·¯" class="headerlink" title="ä¸»è¦æ€è·¯"></a>ä¸»è¦æ€è·¯</h2><ol><li>Appæœ¬åœ°ä¿å­˜æ‰€è®¾ç½®çš„è¯­è¨€ï¼ˆé€šè¿‡æ•°æ®åº“ or SharePreferencesï¼‰ï¼›</li><li><strong>æ¯ä¸ªé¡µé¢</strong>åŠ<strong>Appç±»çš„ç”Ÿå‘½å‘¨æœŸ</strong>ä¸­åˆ¤æ–­å½“æ—¶è¯­è¨€æ˜¯å¦æ˜¯æ‰€è®¾ç½®è¯­è¨€ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™æ›´æ–°<code>Configuration</code>ä¿¡æ¯ï¼›<ul><li>åœ¨<code>Application</code>çš„<code>attachBaseContext</code>è®¾ç½®å½“å‰è®¾ç½®çš„è¯­è¨€<code>Locale</code></li><li>åœ¨<code>Application</code>çš„<code>onConfigurationChanged</code>ï¼ˆæ”¹å˜ç³»ç»Ÿè¯­è¨€ä»¥åŠæ¨ªç«–å±åˆ‡æ¢æ—¶ä¼šè°ƒç”¨åˆ°ï¼‰è®¾ç½®å½“å‰çš„è¯­è¨€<code>Locale</code></li><li>åœ¨<code>Activity</code>çš„<code>attachBaseContext</code>è®¾ç½®å½“å‰è®¾ç½®çš„è¯­è¨€<code>Locale</code>ï¼Œæ‰€ä»¥ä¸€èˆ¬è¿™é‡Œæ˜¯åˆ›å»º<code>BaseActivity</code>æ¥æ–¹ä¾¿ç»Ÿä¸€æ”¹å˜</li><li>åœ¨<code>Service</code>çš„<code>attachBaseContext</code>è®¾ç½®å½“å‰è®¾ç½®çš„è¯­è¨€<code>Locale</code>ï¼ˆå¦‚æœæœ‰ Service çš„è¯ï¼‰</li><li><del>åœ¨<code>Fragment</code>çš„â€¦.æš‚æ—¶æ²¡æ‰¾åˆ°ï¼Œ<code>Fragment</code>ä¸çŸ¥é“æ˜¯ä¸æ˜¯è·Ÿéš<code>çˆ¶Activity</code>æ”¹å˜è¯­è¨€çš„</del>ç»è¿‡æµ‹è¯•çš„ç¡®æ˜¯è·Ÿç€Activityæ”¹å˜çš„</li></ul></li></ol><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="Appæœ¬åœ°ä¿å­˜æ‰€è®¾ç½®çš„è¯­è¨€"><a href="#Appæœ¬åœ°ä¿å­˜æ‰€è®¾ç½®çš„è¯­è¨€" class="headerlink" title="Appæœ¬åœ°ä¿å­˜æ‰€è®¾ç½®çš„è¯­è¨€"></a>Appæœ¬åœ°ä¿å­˜æ‰€è®¾ç½®çš„è¯­è¨€</h3><p>æœ¬ä¾‹ä½¿ç”¨<code>SharePreferences</code>ä¿å­˜è®¾ç½®çš„è¯­è¨€ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆåˆ›å»ºä¸€ä¸ª<code>SharePreferences</code>çš„å·¥å…·ç±»(<code>SharePrefUtils.kt</code>)ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.content.SharedPreferences</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SharePrefUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> pref: SharedPreferences? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> map = HashMap&lt;String, Any&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> all: Map&lt;String, *&gt;</span><br><span class="line">        <span class="keyword">get</span>() = pref!!.all</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">setPref</span><span class="params">(pref: <span class="type">SharedPreferences</span>)</span></span> &#123;</span><br><span class="line">        map.clear()</span><br><span class="line">        <span class="keyword">this</span>.pref = pref</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getString</span><span class="params">(key: <span class="type">String</span>)</span></span>: String? &#123;</span><br><span class="line">        <span class="keyword">return</span> pref!!.getString(key, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getBoolean</span><span class="params">(key: <span class="type">String</span>)</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pref!!.getBoolean(key, <span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getInt</span><span class="params">(key: <span class="type">String</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pref!!.getInt(key, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">clear</span><span class="params">()</span></span> &#123;</span><br><span class="line">        pref!!.edit().clear().apply()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">dataPrepare</span><span class="params">(key: <span class="type">String</span>, value: <span class="type">Any</span>)</span></span>: SharePrefUtils &#123;</span><br><span class="line">        <span class="comment">// map.clear();</span></span><br><span class="line">        map[key] = value</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">putData</span><span class="params">()</span></span>: SharePrefUtils &#123;</span><br><span class="line">        <span class="comment">// è·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ</span></span><br><span class="line">        <span class="keyword">for</span> ((key, value) <span class="keyword">in</span> map) &#123;</span><br><span class="line">            <span class="comment">// æ ¹æ®é”®å€¼å¯¹å¯¹è±¡è·å–é”®å’Œå€¼</span></span><br><span class="line">            putObject(key, value)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">putObject</span><span class="params">(key: <span class="type">String</span>, value: <span class="type">Any</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">when</span> (value) &#123;</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Boolean</span> -&gt; pref!!.edit().putBoolean(key, value).apply()</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Float</span> -&gt; pref!!.edit().putFloat(key, value).apply()</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Int</span> -&gt; pref!!.edit().putInt(key, value).apply()</span><br><span class="line">            <span class="keyword">is</span> <span class="built_in">Long</span> -&gt; pref!!.edit().putLong(key, value).apply()</span><br><span class="line">            <span class="keyword">is</span> String -&gt; pref!!.edit().putString(key, value).apply()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">var</span> context: Context? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">var</span> pref: SharedPreferences? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">setContext</span><span class="params">(context: <span class="type">Context</span>)</span></span>: Builder &#123;</span><br><span class="line">            <span class="keyword">this</span>.context = context</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">setPref</span><span class="params">(prefName: <span class="type">String</span>)</span></span>: Builder &#123;</span><br><span class="line">            <span class="keyword">if</span> (pref == <span class="literal">null</span> &amp;&amp; context != <span class="literal">null</span>) &#123;</span><br><span class="line">                pref = context!!.getSharedPreferences(prefName, Context.MODE_PRIVATE)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">create</span><span class="params">()</span></span>: SharePrefUtils &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">val</span> sharePrefUtils = SharePrefUtils()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (pref != <span class="literal">null</span>) &#123;</span><br><span class="line">                sharePrefUtils.setPref(pref!!)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sharePrefUtils</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨<code>å»ºé€ è€…æ¨¡å¼</code>å†™è¿™ä¸ªå·¥å…·ç±»ï¼Œä½¿ç”¨æ–¹æ³•ï¼š</p><ol><li><p>å…ˆåˆ›å»ºå®ä¾‹</p> <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> sharePrefUtils: SharePrefUtils? = <span class="literal">null</span></span><br><span class="line">sharePrefUtils = SharePrefUtils</span><br><span class="line">    .Builder()</span><br><span class="line">    .setContext(context)    <span class="comment">// ä¼ ä¸Šä¸‹æ–‡Context</span></span><br><span class="line">    .setPref(<span class="string">&quot;SharePrefName&quot;</span>)   <span class="comment">// SharePrefçš„åç§°</span></span><br><span class="line">    .create()</span><br></pre></td></tr></table></figure></li><li><p>æ ¹æ®Keyè·å–Value</p> <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = sharePrefUtils!!.getInt(<span class="string">&quot;Key&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>æŠŠæ•°æ®å­˜åˆ°SharePrefä¸­</p> <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sharePrefUtils!!</span><br><span class="line">    .dataPrepare(<span class="string">&quot;Key&quot;</span>, value)</span><br><span class="line">    .putData()</span><br></pre></td></tr></table></figure></li></ol><h3 id="åˆ›å»ºç®¡ç†è¯­è¨€çš„å·¥å…·ç±»-LocaleManagementUtil-kt"><a href="#åˆ›å»ºç®¡ç†è¯­è¨€çš„å·¥å…·ç±»-LocaleManagementUtil-kt" class="headerlink" title="åˆ›å»ºç®¡ç†è¯­è¨€çš„å·¥å…·ç±»(LocaleManagementUtil.kt)"></a>åˆ›å»ºç®¡ç†è¯­è¨€çš„å·¥å…·ç±»(LocaleManagementUtil.kt)</h3><ul><li><p>é¦–å…ˆï¼Œè·å–ç”¨æˆ·è®¾ç½®è¿‡çš„è¯­è¨€</p>  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é™æ€å±æ€§ï¼Œä¿®å¤è¯†åˆ«ç³»ç»Ÿè¯­è¨€ä¸ºè‹±è¯­çš„é—®é¢˜</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> systemCurrentLocal = Locale.ENGLISH <span class="comment">// é»˜è®¤è‹±è¯­</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getSelectLanguage</span><span class="params">()</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> sharePrefUtils!!.getInt(Constant.TAG_LANGUAGE)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–é€‰æ‹©çš„è¯­è¨€è®¾ç½®</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Localeå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getSetLanguageLocale</span><span class="params">(context: <span class="type">Context</span>)</span></span>: Locale &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">when</span> (getSelectLanguage()) &#123;</span><br><span class="line">        <span class="number">0</span> -&gt; getSystemLocale(context) <span class="comment">// è·å–ç³»ç»Ÿè®¾ç½®çš„è¯­è¨€</span></span><br><span class="line">        <span class="number">1</span> -&gt; Locale.CHINA</span><br><span class="line">        <span class="number">2</span> -&gt; Locale.ENGLISH</span><br><span class="line">        <span class="keyword">else</span> -&gt; Locale.ENGLISH</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç³»ç»Ÿçš„locale</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Localeå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getSystemLocale</span><span class="params">(context: <span class="type">Context</span>)</span></span>: Locale &#123;</span><br><span class="line">    <span class="keyword">return</span> systemCurrentLocal</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç³»ç»Ÿçš„localeå¹¶ä¿å­˜åˆ°é™æ€å˜é‡systemCurrentLocalä¸­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">saveSystemCurrentLanguage</span><span class="params">(context: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> locale: Locale = <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) &#123;</span><br><span class="line">        LocaleList.getDefault().<span class="keyword">get</span>(<span class="number">0</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Locale.getDefault()</span><br><span class="line">    &#125;</span><br><span class="line">    systemCurrentLocal = locale</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ”¹å˜è¯­è¨€</p>  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">setLocal</span><span class="params">(context: <span class="type">Context</span>)</span></span>: Context &#123;</span><br><span class="line">    <span class="keyword">return</span> updateResources(context, getSetLanguageLocale(context))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">updateResources</span><span class="params">(context: <span class="type">Context</span>, locale: <span class="type">Locale</span>)</span></span>: Context &#123;</span><br><span class="line">    <span class="keyword">var</span> context = context</span><br><span class="line">    Locale.setDefault(locale)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> res = context.resources</span><br><span class="line">    <span class="keyword">val</span> config = Configuration(res.configuration)</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="number">19</span>) &#123;</span><br><span class="line">        config.setLocale(locale)</span><br><span class="line">        context = context.createConfigurationContext(config)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        config.locale = locale</span><br><span class="line">        res.updateConfiguration(config, res.displayMetrics)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> context</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="è°ƒç”¨æ–¹æ³•è®¾ç½®è¯­è¨€"><a href="#è°ƒç”¨æ–¹æ³•è®¾ç½®è¯­è¨€" class="headerlink" title="è°ƒç”¨æ–¹æ³•è®¾ç½®è¯­è¨€"></a>è°ƒç”¨æ–¹æ³•è®¾ç½®è¯­è¨€</h3><ul><li><p>Application</p>  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">attachBaseContext</span><span class="params">(base: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    LocaleManageUtil.saveSystemCurrentLanguage(base)</span><br><span class="line">    <span class="keyword">super</span>.attachBaseContext(base)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate()</span><br><span class="line">    instance = <span class="keyword">this</span></span><br><span class="line">    LocaleManageUtil.setSharePref(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">    <span class="keyword">lateinit</span> <span class="keyword">var</span> instance: App</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">set</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>BaseActivity</p>  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">attachBaseContext</span><span class="params">(newBase: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.attachBaseContext(LocaleManageUtil.setLocal(newBase))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Service</p>  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">attachBaseContext</span><span class="params">(newBase: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.attachBaseContext(LocaleManageUtil.setLocal(newBase))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®è¯­è¨€å¹¶é‡å¯Activityåˆ°å¯åŠ¨é¡µ</p><ul><li><p>LocaleManageUtil.kt</p>  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">saveLanguage</span><span class="params">(select: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    sharePrefUtils!!</span><br><span class="line">        .dataPrepare(Constant.TAG_LANGUAGE, select)</span><br><span class="line">        .putData()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">saveSelectLanguage</span><span class="params">(context: <span class="type">Context</span>, select: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    saveLanguage(select)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·³è½¬ä¸»é¡µ</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">toRestartLauncherActivity</span><span class="params">(context: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> intent = Intent(context, MainActivity::<span class="keyword">class</span>.java)</span><br><span class="line">    intent.flags = Intent.FLAG_ACTIVITY_CLEAR_TASK or Intent.FLAG_ACTIVITY_NEW_TASK</span><br><span class="line">    context.startActivity(intent)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>SettingActivity.kt</p>  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">selectLanguage</span><span class="params">(select: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    LocaleManageUtil.saveSelectLanguage(<span class="keyword">this</span>, select)</span><br><span class="line">    LocaleManageUtil.toRestartLauncherActivity(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><p>è¿™é‡Œç¨å¾®è§£é‡Šä¸€ä¸‹ï¼šåœ¨<code>Application</code>å’Œ<code>Activity</code>ä¸­ï¼Œ<code>attachBaseContext</code>éƒ½æ˜¯åœ¨<code>onCreate</code>æ–¹æ³•ä¹‹å‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆåœ¨<code>Application</code>ä¸­çš„<code>attachBaseContext</code>è·å–å½“å‰ç³»ç»Ÿçš„è¯­è¨€å¹¶å­˜ä¸‹æ¥ï¼ˆå¿…é¡»åœ¨æ‰€æœ‰è·å–è¯­è¨€çš„æ–¹æ³•æ‰§è¡Œå‰å­˜ä¸‹å½“å‰ç³»ç»Ÿè¯­è¨€ï¼Œå¦åˆ™åœ¨åé¢è·å–å¯èƒ½ä¼šå‡ºç°è·å–åˆ°çš„ä¸æ˜¯ç³»ç»Ÿè¯­è¨€è€Œæ˜¯è®¾ç½®çš„è¯­è¨€çš„æƒ…å†µï¼‰ã€‚</p><p>åˆ°è¿™é‡Œç†è®ºä¸Šè¯­è¨€å°±å¯ä»¥æˆåŠŸæ”¹å˜å•¦ï½</p><h1 id="é‡åˆ°çš„å‘"><a href="#é‡åˆ°çš„å‘" class="headerlink" title="é‡åˆ°çš„å‘"></a>é‡åˆ°çš„å‘</h1><h2 id="contextä¸ºapplicationContextæ—¶åˆ‡æ¢è¯­è¨€åè®¾ç½®çš„stringæ²¡æœ‰æ”¹å˜çš„é—®é¢˜"><a href="#contextä¸ºapplicationContextæ—¶åˆ‡æ¢è¯­è¨€åè®¾ç½®çš„stringæ²¡æœ‰æ”¹å˜çš„é—®é¢˜" class="headerlink" title="contextä¸ºapplicationContextæ—¶åˆ‡æ¢è¯­è¨€åè®¾ç½®çš„stringæ²¡æœ‰æ”¹å˜çš„é—®é¢˜"></a>contextä¸ºapplicationContextæ—¶åˆ‡æ¢è¯­è¨€åè®¾ç½®çš„stringæ²¡æœ‰æ”¹å˜çš„é—®é¢˜</h2><p>æˆ‘ä»¬éƒ½ä¼šåœ¨ä»£ç ä¸­è°ƒç”¨<code>context.getResource().getString()</code>è¿™å¥ä»£ç çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä½ è¿™ä¸ª<code>context</code>è¦æ˜¯ç”¨çš„æ˜¯<code>applicationContext</code>é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ã€‚ä½ ä¼šå‘ç°å½“ä½ åˆ‡æ¢è¯­è¨€åç”¨è¿™æ ·æ–¹å¼è®¾ç½®çš„<code>string</code>æ²¡æœ‰æ”¹å˜ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ”¹åŠ¨æˆ‘ä»¬çš„ä»£ç ã€‚</p><p>è§£å†³æ–¹æ³•å°±æ˜¯ï¼Œåœ¨åˆ‡æ¢è¯­è¨€åæŠŠ<code>application</code>çš„<code>updateConfiguration</code>ä¹Ÿè¦æ›´æ–°äº†ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><ul><li><p>LocaleManageUtil.kt</p>  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¾ç½®è¯­è¨€ç±»å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">setApplicationLanguage</span><span class="params">(context: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> resources = context.applicationContext.resources</span><br><span class="line">    <span class="keyword">val</span> dm = resources.displayMetrics</span><br><span class="line">    <span class="keyword">val</span> config = resources.configuration</span><br><span class="line">    <span class="keyword">val</span> locale = getSetLanguageLocale(context)</span><br><span class="line">    config.locale = locale</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) &#123;</span><br><span class="line">        <span class="keyword">val</span> localeList = LocaleList(locale)</span><br><span class="line">        LocaleList.setDefault(localeList)</span><br><span class="line">        config.locales = localeList</span><br><span class="line">        context.applicationContext.createConfigurationContext(config)</span><br><span class="line">        Locale.setDefault(locale)</span><br><span class="line">    &#125;</span><br><span class="line">    resources.updateConfiguration(config, dm)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">saveSelectLanguage</span><span class="params">(context: <span class="type">Context</span>, select: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    saveLanguage(select)</span><br><span class="line">    setApplicationLanguage(context)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>App.kt</p>  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate()</span><br><span class="line">    instance = <span class="keyword">this</span></span><br><span class="line">    LocaleManageUtil.setSharePref(<span class="keyword">this</span>)</span><br><span class="line">    LocaleManageUtil.setApplicationLanguage(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="è§£å†³æ¨ªç«–å±åˆ‡æ¢åè¯­è¨€å˜æˆç³»ç»Ÿè¯­è¨€çš„é—®é¢˜"><a href="#è§£å†³æ¨ªç«–å±åˆ‡æ¢åè¯­è¨€å˜æˆç³»ç»Ÿè¯­è¨€çš„é—®é¢˜" class="headerlink" title="è§£å†³æ¨ªç«–å±åˆ‡æ¢åè¯­è¨€å˜æˆç³»ç»Ÿè¯­è¨€çš„é—®é¢˜"></a>è§£å†³æ¨ªç«–å±åˆ‡æ¢åè¯­è¨€å˜æˆç³»ç»Ÿè¯­è¨€çš„é—®é¢˜</h2><ul><li><p>LocaleManageUtil.kt</p>  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">onConfigurationChanged</span><span class="params">(context: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    saveSystemCurrentLanguage(context)</span><br><span class="line">    setLocal(context)</span><br><span class="line">    setApplicationLanguage(context)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>App.kt</p>  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onConfigurationChanged</span><span class="params">(newConfig: <span class="type">Configuration</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onConfigurationChanged(newConfig)</span><br><span class="line">    LocaleManageUtil.onConfigurationChanged(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="æºç åœ°å€"><a href="#æºç åœ°å€" class="headerlink" title="æºç åœ°å€"></a>æºç åœ°å€</h1><p>å…·ä½“çš„æºç åœ¨<a href="https://github.com/RebornQ/MultiLanguagesDemo-Kotlin">github</a>ä¸Šï¼Œå¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹</p><h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><blockquote><ul><li><a href="https://jaeger.itscoder.com/android/2016/05/14/switch-language-on-android-app.html">Android App å¤šè¯­è¨€åˆ‡æ¢</a></li><li><a href="https://cloud.tencent.com/developer/article/1035307">Androidé¢è¯•ç³»åˆ—ä¹‹åº”ç”¨å†…å¤šè¯­è¨€åˆ‡æ¢</a></li><li><a href="https://blog.csdn.net/u010499721/article/details/51260456">androidç¨‹åºå†…å¤šè¯­è¨€åˆ‡æ¢ä¸éœ€è¦é‡æ–°å¯åŠ¨çš„è§£å†³æ–¹æ¡ˆ</a><ul><li>è¿™ç¬¬ä¸‰ç¯‡å¥½åƒè®²çš„æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯çœ‹å®Œä»£ç è§‰å¾—æ•ˆæœåº”è¯¥ä¸é”™ï¼Œä¸è¿‡è¿˜æ²¡å°è¯•</li></ul></li><li><a href="https://blog.csdn.net/wwxwwq/article/details/79278520">å®‰å“Appå†…å¤šè¯­è¨€åˆ‡æ¢ï¼ˆKotlinå®ç°ï¼‰ï¼Œä¸éœ€è¦å¼ºæ€é‡å¯app</a></li><li><a href="https://blog.csdn.net/vv_bug/article/details/69568519">ä¸åªæ˜¯åˆ‡æ¢å¤šè¯­è¨€Androidï¼ˆäºŒï¼‰</a><ul><li>è¿™ä¸ªè®²çš„ä¸é”™ï¼ŒåŸç†è·Ÿç¬¬ä¸‰ç¯‡ä¸€æ ·ï¼Œç›´æ¥åœ¨Viewå®ç°ï¼Œæºç åœ¨<a href="https://github.com/913453448/LanguageSupport">è¿™é‡Œ</a>ã€‚</li><li>BTWï¼šä»–å‰ä¸€ç¯‡æ¢è‚¤çš„æ–‡ç« â€”â€”<a href="https://blog.csdn.net/vv_bug/article/details/69566660">ä¸åªæ˜¯åˆ‡æ¢å¤šè¯­è¨€Androidï¼ˆä¸€ï¼‰</a>ä¹Ÿå†™çš„ä¸é”™ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å»çœ‹çœ‹</li></ul></li><li><a href="https://blog.csdn.net/a1018875550/article/details/79845949">Androidå›½é™…åŒ–(å¤šè¯­è¨€)å®ç°ï¼Œæ”¯æŒ8.0</a><ul><li>æœ€ç»ˆæˆ‘å‚è€ƒçš„æœ€å¤šçš„æ˜¯è¿™ä¸ªæ–¹æ¡ˆ XD</li></ul></li><li><a href="https://blog.csdn.net/guolin_blog/article/details/47028975">Android Contextå®Œå…¨è§£æï¼Œä½ æ‰€ä¸çŸ¥é“çš„Contextçš„å„ç§ç»†èŠ‚</a><ul><li>éƒ­ç¥çš„æ–‡ç« ï¼Œä¸»è¦æ˜¯ä¸ºäº†çœ‹Applicationæ–¹æ³•çš„æ‰§è¡Œé¡ºåºï¼Œçœ‹çœ‹ä»€ä¹ˆæ–¹æ³•æ˜¯åœ¨<code>onCreate()</code>ä¹‹å‰æ‰§è¡Œçš„â€”â€”<code>attachBaseContext()</code></li></ul></li><li><a href="https://developer.android.com/guide/topics/resources/runtime-changes?hl=zh-cn#HandlingTheChange">Android Developerå®˜æ–¹æ–‡æ¡£â€”â€”å¤„ç†é…ç½®å˜æ›´</a></li><li><a href="https://www.jianshu.com/p/0127fb67516d">onConfigurationChangedæ–¹æ³•ä»‹ç»åŠé—®é¢˜è§£å†³</a><ul><li>å¯è§£å†³æ¨ªç«–å±åˆ‡æ¢åè¯­è¨€å˜æˆç³»ç»Ÿè¯­è¨€çš„é—®é¢˜</li></ul></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Androidå¤šè¯­è¨€åˆ‡æ¢å®ç°--Javaå®ç°</title>
      <link href="/posts/8a9e22db.html"/>
      <url>/posts/8a9e22db.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘åœ¨æƒ³å®å¯æ¢¦çš„é‚£æ ·è®°è´¦è¦åŠ ä»€ä¹ˆåŠŸèƒ½å¥½å‘¢ï¼Ÿçªç„¶æƒ³åˆ°ï¼Œä¸å¦‚å®ç°å¤šè¯­è¨€æ‰‹åŠ¨åˆ‡æ¢ï¼ˆå›½é™…åŒ–ï¼‰ï¼Œæ–¹ä¾¿é‚£äº›ä¸ºäº†å¼€<code>Google Assistant</code>è€ŒæŠŠè¯­è¨€è®¾ç½®æˆè‹±æ–‡çš„æœ‹å‹å¯ä»¥åœ¨è¯¥Appä½¿ç”¨ä¸­æ–‡ç•Œé¢ã€‚</p><a id="more"></a><h1 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h1><ul><li>å¯ä»¥éšç€ç³»ç»Ÿåˆ‡æ¢è¯­è¨€è€Œåˆ‡æ¢è¯­è¨€ï¼ˆå³è·Ÿéšç³»ç»Ÿï¼‰ï¼Œä¸æ”¯æŒçš„è¯­è¨€æ˜¾ç¤ºé»˜è®¤ï¼ˆé»˜è®¤ä¸ºè‹±æ–‡ï¼‰</li><li>ç”¨æˆ·å¯ä»¥è‡ªç”±é€‰æ‹©è‡ªå·±æƒ³ç”¨çš„è¯­è¨€ï¼Œä¸”ä¸ä¼šéšç€ç³»ç»Ÿåˆ‡æ¢è¯­è¨€æˆ–è€…åº”ç”¨é‡å¯è€Œè¿˜åŸ</li></ul><p>è™½ç„¶çœ‹ç€ç®€å•ï¼Œä½†æ˜¯å®ç°èµ·æ¥è¿˜æ˜¯é‡åˆ°äº†ç‚¹é—®é¢˜</p><h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><p>å‚ç…§ <a href="https://developer.android.com/reference/android/content/res/Configuration.html?hl=zh-cn">Android Developerå®˜ç½‘</a> ä¸Šçš„æè¿°ï¼Œ<code>Configuration</code> åŒ…å«äº†è®¾å¤‡çš„æ‰€æœ‰çš„é…ç½®ä¿¡æ¯ï¼Œè¿™äº›é…ç½®ä¿¡æ¯ä¼šå½±å“åº”ç”¨è·å–çš„èµ„æºã€‚ä¾‹å¦‚<code>string</code>èµ„æºï¼Œå°±æ˜¯åœ¨ä¸åŒçš„<code>res/value-xx</code>ä¸‹æ”¾ç½®ä¸åŒè¯­è¨€çš„<code>strings.xml</code>å®ç°å­—ç¬¦çš„æœ¬åœ°åŒ–ï¼Œç„¶åæ ¹æ®<code>Configuration</code>çš„<code>locale</code>å±æ€§æ¥åˆ¤æ–­è¯¥å–å“ªç§è¯­è¨€çš„<code>string</code>èµ„æºï¼Œè€Œè¿™ä¸ª<code>value-xx</code>ç›®å½•çš„é€‰æ‹©æ˜¯æ ¹æ®<code>locale</code>è¿™é¡¹çš„å€¼æ¥å†³å®šçš„ã€‚</p><p>å¦‚zhä¸­æ–‡ï¼Œå°±ä¼šé€‰æ‹©<code>value-zh</code>ç›®å½•ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ï¼ˆå³resä¸­æ²¡æœ‰<code>value-zh</code>ç›®å½•ï¼‰å°±ä½¿ç”¨é»˜è®¤çš„<code>value</code>ç›®å½•ä¸­çš„å­—ç¬¦èµ„æºã€‚</p><p><strong>é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æƒ³åŠæ³•æ”¹å˜å¹¶é‡æ–°åŠ è½½<code>Configuration</code>å³å¯ï¼ï¼ï¼</strong></p><blockquote><p>æ³¨ï¼š<code>value-en</code>ã€<code>value-zh-rCN</code>ã€<code>values-zh-rTW</code>åˆ†åˆ«è¡¨ç¤º<code>è‹±æ–‡</code>ã€<code>ç®€ä½“ä¸­æ–‡</code>ã€<code>ç¹ä½“ä¸­æ–‡</code>ä¸‰ç§è¯­è¨€</p></blockquote><h1 id="åˆæ¬¡å°è¯•"><a href="#åˆæ¬¡å°è¯•" class="headerlink" title="åˆæ¬¡å°è¯•"></a>åˆæ¬¡å°è¯•</h1><h2 id="1-æ·»åŠ å¤šè¯­è¨€æ–‡ä»¶"><a href="#1-æ·»åŠ å¤šè¯­è¨€æ–‡ä»¶" class="headerlink" title="1. æ·»åŠ å¤šè¯­è¨€æ–‡ä»¶"></a>1. æ·»åŠ å¤šè¯­è¨€æ–‡ä»¶</h2><p>åœ¨ä¸åŒçš„<code>value</code>æ–‡ä»¶å¤¹ä¸‹ï¼ˆä¾‹å¦‚<code>value</code>ã€<code>value-en</code>ã€<code>value-zh-rCN</code>ã€<code>values-zh-rTW</code>æ–‡ä»¶å¤¹ï¼‰æ·»åŠ ä¸åŒè¯­è¨€çš„<code>string.xml</code>æ–‡ä»¶ï¼Œæˆ‘ä»¬çš„é¡¹ç›®æ·»åŠ äº†è‹±æ–‡ã€ç®€ä½“ä¸­æ–‡ã€ç¹ä½“ä¸­æ–‡ä¸‰ç§è¯­è¨€ã€‚</p><p>ç¿»è¯‘ä¹‹ç±»çš„å°±è‡ªè¡Œç¿»è¯‘å•¦ï½ç¹ä½“å¯ä»¥æ‰¾ä¸ªç®€ç¹è½¬æ¢ç½‘ç«™ã€‚</p><h2 id="2-æ›´æ–°-Configuration-ä¸­çš„-locale-å±æ€§æ¥å®ç°appè¯­è¨€çš„åˆ‡æ¢"><a href="#2-æ›´æ–°-Configuration-ä¸­çš„-locale-å±æ€§æ¥å®ç°appè¯­è¨€çš„åˆ‡æ¢" class="headerlink" title="2. æ›´æ–° Configuration ä¸­çš„ locale å±æ€§æ¥å®ç°appè¯­è¨€çš„åˆ‡æ¢"></a>2. æ›´æ–° Configuration ä¸­çš„ locale å±æ€§æ¥å®ç°appè¯­è¨€çš„åˆ‡æ¢</h2><p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Resources resources = getContext().getResources();</span><br><span class="line">DisplayMetrics dm = resources.getDisplayMetrics();</span><br><span class="line">Configuration config = resources.getConfiguration();</span><br><span class="line"><span class="comment">// åº”ç”¨ç”¨æˆ·é€‰æ‹©è¯­è¨€ï¼Œå¦‚ï¼š</span></span><br><span class="line"><span class="comment">// config.locale = Locale.ENGLISH;</span></span><br><span class="line">resources.updateConfiguration(config, dm);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç”¨äº†<code>Locale</code>ä¸­çš„é¢„è®¾å€¼<code>Locale.ENGLISH</code>ã€<code>Locale.TRADITIONAL_CHINESE</code>å’Œ<code>Locale.SIMPLIFIED_CHINESE</code>ï¼Œå¦‚æœä½ éœ€è¦è®¾ç½®çš„è¯­è¨€æ²¡æœ‰é¢„è®¾å€¼ï¼Œä½ å¯ä»¥è‡ªå·±æ–°å»ºä¸€ä¸ª<code>Locale</code>å¯¹è±¡ï¼Œå…·ä½“è‡ªè¡Œ Google å§ã€‚</p><p><strong>æ³¨ï¼šè·Ÿéšç³»ç»Ÿè®¾ç½®æ˜¯<code>Locale.getDefault()</code></strong></p><h2 id="3-é‡å¯-HomeActivity"><a href="#3-é‡å¯-HomeActivity" class="headerlink" title="3. é‡å¯ HomeActivity"></a>3. é‡å¯ HomeActivity</h2><p>æˆ‘ä»¬çš„ App æœ‰ä¸ªå¯åŠ¨é¡µ<code>WelcomeActivity</code>ï¼Œç±»ä¼¼å¾®ä¿¡é‚£ä¸ªå°äººå¯åŠ¨é¡µï¼Œå¦‚æœä»æ¬¢è¿é¡µé‡å¯ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„ä½“éªŒï¼Œåº”è¯¥å’Œå¾®ä¿¡çš„è¯­è¨€è®¾ç½®ä¸€æ ·ï¼Œç›´æ¥å›åˆ°<code>HomeActivity</code>,è€Œä¸æ˜¯ä» <code>WelcomeActivity</code>é‡æ–°æ‰“å¼€ã€‚å®ç°å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, HomeActivity.class);</span><br><span class="line">intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);</span><br><span class="line">getActivity().startActivity(intent);</span><br><span class="line"><span class="comment">// æ€æ‰è¿›ç¨‹ï¼Œå¦‚æœæ˜¯è·¨è¿›ç¨‹åˆ™æ€æ‰å½“å‰è¿›ç¨‹</span></span><br><span class="line"><span class="comment">//  android.os.Process.killProcess(android.os.Process.myPid());</span></span><br><span class="line"><span class="comment">//  System.exit(0);</span></span><br></pre></td></tr></table></figure><h2 id="4-æŒä¹…åŒ–å­˜å‚¨è¯­è¨€è®¾ç½®"><a href="#4-æŒä¹…åŒ–å­˜å‚¨è¯­è¨€è®¾ç½®" class="headerlink" title="4. æŒä¹…åŒ–å­˜å‚¨è¯­è¨€è®¾ç½®"></a>4. æŒä¹…åŒ–å­˜å‚¨è¯­è¨€è®¾ç½®</h2><p>æŒ‰ç…§ä¸Šè¿°ä¸‰ä¸ªæ­¥éª¤ï¼Œä½ åº”è¯¥å·²ç»å¯ä»¥çœ‹åˆ°äº†æ”¹å˜è¯­è¨€çš„æ•ˆæœäº†ï¼Œä½†æ˜¯å½“ä½ æ€æ‰åº”ç”¨ï¼Œé‡æ–°æ‰“å¼€ï¼Œå‘ç°è®¾ç½®åˆå¤±æ•ˆäº†ã€‚è¿™æ˜¯å› ä¸ºåº”ç”¨é‡å¯åä¼šè¯»å–è®¾å¤‡é»˜è®¤çš„<code>Configuration</code>ä¿¡æ¯ï¼Œå…¶ä¸­å’Œè¯­è¨€ç›¸å…³çš„<code>locale</code>å±æ€§ä¹Ÿä¼šå˜æˆé»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯ä½ åœ¨ç³»ç»Ÿè®¾ç½®ä¸­é€‰æ‹©çš„è¯­è¨€ã€‚</p><p>å½“ä½ çš„åº”ç”¨éœ€è¦ç”±ç”¨æˆ·å•ç‹¬è®¾ç½®è¯­è¨€ï¼Œè€Œä¸æ˜¯ä»…ä»…è·Ÿéšç³»ç»Ÿè¯­è¨€ï¼Œä½ å°±éœ€è¦æŒä¹…åŒ–å­˜å‚¨ç”¨æˆ·çš„è®¾ç½®ä¿¡æ¯äº†ã€‚ä½ å¯ä»¥é€‰æ‹©<code>æ•°æ®åº“</code>ã€æˆ–<code>SharedPreferences</code>æ¥å­˜å‚¨è®¾ç½®ä¿¡æ¯ï¼Œå­˜ä¸€ä¸ªTypeçš„intå€¼å³å¯ã€‚</p><h2 id="5-æ ¹æ®æœ¬åœ°ç¼“å­˜çš„typeè·å–å¯¹åº”çš„locale"><a href="#5-æ ¹æ®æœ¬åœ°ç¼“å­˜çš„typeè·å–å¯¹åº”çš„locale" class="headerlink" title="5. æ ¹æ®æœ¬åœ°ç¼“å­˜çš„typeè·å–å¯¹åº”çš„locale"></a>5. æ ¹æ®æœ¬åœ°ç¼“å­˜çš„typeè·å–å¯¹åº”çš„locale</h2><p>å…¶ä¸­7.0ä»¥ä¸Šçš„ç³»ç»Ÿéœ€è¦å¦åšå¤„ç†ï¼ˆåœ¨åé¢ä¼šè®²å¤„ç†å…¼å®¹æ€§é—®é¢˜ï¼‰ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Locale locale;</span><br><span class="line"><span class="comment">// åº”ç”¨ç”¨æˆ·é€‰æ‹©è¯­è¨€</span></span><br><span class="line"><span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        locale = I18NUtils.getSystemLocale(); <span class="comment">// getSystemLocale()æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ–¹æ³•ï¼Œç”¨äºè·å–ç³»ç»Ÿè¯­è¨€</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: ...;<span class="keyword">break</span>;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        locale = enLocale; <span class="comment">// enLocale æ˜¯ä¸€ä¸ªé™æ€ Locale å˜é‡ï¼Œç”¨äºé»˜è®¤ä¸ºæœªæä¾›çš„è¯­è¨€æ˜¾ç¤ºè‹±æ–‡è¯­è¨€</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-åœ¨AppApplicationä¸­åˆå§‹åŒ–æ—¶è®¾ç½®æœ¬åœ°è¯­è¨€"><a href="#6-åœ¨AppApplicationä¸­åˆå§‹åŒ–æ—¶è®¾ç½®æœ¬åœ°è¯­è¨€" class="headerlink" title="6. åœ¨AppApplicationä¸­åˆå§‹åŒ–æ—¶è®¾ç½®æœ¬åœ°è¯­è¨€"></a>6. åœ¨AppApplicationä¸­åˆå§‹åŒ–æ—¶è®¾ç½®æœ¬åœ°è¯­è¨€</h2><p>ç”¨äºæ¯æ¬¡å¯åŠ¨APPååˆ‡æ¢åˆ°æœ¬åœ°ç¼“å­˜çš„è¯­è¨€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate();</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">        Resources resources = App.getContext().getResources();</span><br><span class="line">        DisplayMetrics dm = resources.getDisplayMetrics();</span><br><span class="line">        Configuration config = resources.getConfiguration();</span><br><span class="line">        <span class="comment">// è®¾ç½®æœ¬åœ°åŒ–è¯­è¨€</span></span><br><span class="line">        config.locale = getSetLocaleInSP();</span><br><span class="line">        resources.updateConfiguration(config, dm);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾—åˆ°è®¾ç½®çš„è¯­è¨€ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Locale <span class="title">getSetLocaleInSP</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è¯»å–å‚¨å­˜çš„è¯­è¨€è®¾ç½®ä¿¡æ¯ï¼ˆç»“åˆç¬¬äº”æ­¥ï¼‰</span></span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-åœ¨BaseActivityçš„OnCreate-æ–¹æ³•ä¸­è®¾ç½®è¯­è¨€"><a href="#7-åœ¨BaseActivityçš„OnCreate-æ–¹æ³•ä¸­è®¾ç½®è¯­è¨€" class="headerlink" title="7. åœ¨BaseActivityçš„OnCreate()æ–¹æ³•ä¸­è®¾ç½®è¯­è¨€"></a>7. åœ¨BaseActivityçš„OnCreate()æ–¹æ³•ä¸­è®¾ç½®è¯­è¨€</h2><p>ç”¨äºå¤„ç†æ¯æ¬¡åˆ‡æ¢ç³»ç»Ÿè¯­è¨€åappè¯­è¨€ä¼šè·Ÿéšç³»ç»Ÿå˜åŒ–çš„é—®é¢˜ã€‚</p><p>åœ¨è¿™ä¸€æ­¥ä¹‹å‰ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šå½“ä»åº”ç”¨ä¸­åˆ‡å‡ºå»ï¼Œæ”¹å˜äº†ç³»ç»Ÿè¯­è¨€çš„è®¾ç½®ï¼Œå½“å†åˆ‡åº”ç”¨çš„æ—¶å€™ï¼Œæˆ‘å‘ç°è¯­è¨€ä¹Ÿä¼šå˜æˆç³»ç»Ÿè¯­è¨€ï¼ˆè€Œæˆ‘å¹¶æ²¡åœ¨åº”ç”¨å†…è®¾ç½®è·Ÿéšç³»ç»Ÿï¼‰ã€‚</p><blockquote><p>**å¼•ç”¨è‡ª<a href="https://jaeger.itscoder.com/android/2016/05/14/switch-language-on-android-app.html">@å†™ä»£ç çš„çŒ´å­çš„æ–‡ç« </a>**ï¼š<br>ç®€å•æ¥è¯´ï¼Œä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬åœ¨ App å¯åŠ¨æ—¶ï¼Œè¯»å–äº†ç”¨æˆ·çš„è®¾ç½®ä¿¡æ¯ï¼Œå¹¶åº”ç”¨åˆ° <code>Configuration</code>çš„<code>locale</code>å±æ€§ä¸Šï¼Œç„¶åé€šè¿‡<code>resources.updateConfiguration(config, dm)</code>æ”¹å˜äº†åº”ç”¨çš„é…ç½®ä¿¡æ¯ï¼ˆ<code>Configuration</code>ï¼‰å¹¶ç”Ÿæ•ˆï¼Œä¿è¯æˆ‘ä»¬çš„åº”ç”¨è¯»å–çš„<code>string</code>èµ„æºéƒ½æ˜¯ç”¨æˆ·è®¾ç½®è¯­è¨€å¯¹åº”çš„èµ„æºã€‚åœ¨æˆ‘ä»¬æ”¹å˜ç³»ç»Ÿçš„è¯­è¨€ä¹‹åï¼Œå†å›åˆ°æˆ‘ä»¬çš„åº”ç”¨ä¸­ï¼Œæ­¤æ—¶çš„<code>Configuration</code>çš„<code>locale</code>å±æ€§å°±ä¼šå‘ç”Ÿå˜åŒ–äº†ï¼Œä¸å†æ˜¯æˆ‘ä»¬åˆšæ‰è‡ªå·±çš„åœ¨åº”ç”¨å¯åŠ¨æ—¶è®¾ç½®çš„äº†ï¼Œè€Œæ˜¯å˜æˆäº†ç³»ç»Ÿçš„è®¾ç½®äº†ã€‚</p></blockquote><p>é‚£ä¹ˆè§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ activity æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œ<strong>åœ¨åˆ‡å›æˆ‘ä»¬çš„åº”ç”¨æ—¶ï¼Œåœ¨æ˜¾ç¤ºçš„ activity çš„ç”Ÿå‘½å‘¨æœŸä¸­åšä¸€äº›å¤„ç†</strong>å°±å¥½äº†ï¼ˆæœ‰ç‚¹ç²—æš´ï½ï¼‰</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šå»ºç«‹å¾ˆå¤šä¸ª activityï¼Œè€Œæ¯ä¸€ä¸ª activity éƒ½è¦æ›´æ”¹è¯­è¨€çš„ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¦‚æœä¸€ä¸ªä¸ªåšå¤„ç†æ˜¯ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Ÿè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆ©ç”¨é¢å‘å¯¹è±¡è¯­è¨€çš„ç»§æ‰¿ç‰¹æ€§å³å¯ï¼Œåˆ›å»ºä¸€ä¸ª<code>BaseActivity</code>ï¼Œåœ¨<code>BaseActivity</code> ä¸­å¤„ç†åå…¶ä»– Activity éƒ½å»ç»§æ‰¿<code>BaseActivity</code>å°±å¥½äº†ã€‚<a href="https://jaeger.itscoder.com/android/2016/05/14/switch-language-on-android-app.html">@å†™ä»£ç çš„çŒ´å­çš„æ–‡ç« </a>ä¸­è¯´è¯„è®ºä¸­æåˆ°ï¼Œåœ¨æ”¹å˜äº†ç³»ç»Ÿè®¾ç½®ä¹‹åï¼Œå›åˆ°åº”ç”¨ä¼šé‡èµ°<code>activity</code>çš„<code>onCreate</code>ï¼ˆå¦‚æœæŒ‰ç…§Activityçš„ç”Ÿå‘½å‘¨æœŸçœ‹å…¶å®åº”è¯¥æ˜¯<code>onResume</code>æ‰å¯¹ï¼‰ï¼Œé‚£å°±åœ¨<code>OnCreate</code>ä¸­å¤„ç†ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    <span class="keyword">if</span> (!LanguageUtil.isSetValue()) &#123;</span><br><span class="line">        LanguageUtil.resetAppLanguage();</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LanguageUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦æ˜¯è®¾ç½®å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦æ˜¯è®¾ç½®å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isSetValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Locale currentLocale = App.getContext().getResources().getConfiguration().locale;</span><br><span class="line">        <span class="keyword">return</span> currentLocale.equals(getSetLocaleInSP());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è§£å†³7-0ä»¥ä¸Šç³»ç»Ÿå­˜åœ¨çš„å…¼å®¹é—®é¢˜â€”â€”è·Ÿéšç³»ç»Ÿè¯­è¨€å¤±æ•ˆ"><a href="#è§£å†³7-0ä»¥ä¸Šç³»ç»Ÿå­˜åœ¨çš„å…¼å®¹é—®é¢˜â€”â€”è·Ÿéšç³»ç»Ÿè¯­è¨€å¤±æ•ˆ" class="headerlink" title="è§£å†³7.0ä»¥ä¸Šç³»ç»Ÿå­˜åœ¨çš„å…¼å®¹é—®é¢˜â€”â€”è·Ÿéšç³»ç»Ÿè¯­è¨€å¤±æ•ˆ"></a>è§£å†³7.0ä»¥ä¸Šç³»ç»Ÿå­˜åœ¨çš„å…¼å®¹é—®é¢˜â€”â€”è·Ÿéšç³»ç»Ÿè¯­è¨€å¤±æ•ˆ</h2><p><a href="https://www.jianshu.com/p/9a304c2047ff/">Android 7.0 è¯­è¨€è®¾ç½®çˆ¬å‘</a>è¿™ç¯‡æ–‡ç« è®²çš„å¾ˆè¯¦ç»†ï¼Œå…·ä½“è¿˜å¯ä»¥å‚è€ƒ<a href="https://developer.android.com/guide/topics/resources/multilingual-support.html">å®˜æ–¹æ–‡æ¡£</a>å’Œ<a href="https://developer.android.com/reference/android/os/LocaleList.html#getDefault()/">å®˜æ–¹API</a></p><p>å¦‚æœä¸åšå…¼å®¹ï¼Œå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹æƒ…å†µï¼šåœ¨ App ä¸­ï¼Œè¯­è¨€é»˜è®¤é€‰æ‹©çš„æ˜¯ã€Œè·Ÿéšç³»ç»Ÿã€ï¼ˆç³»ç»Ÿè¯­è¨€åˆ—è¡¨ä¸­ã€Œç®€ä½“ä¸­æ–‡ã€æ˜¯ç¬¬ä¸€ä¸ªï¼‰ï¼Œç„¶åé€‰æ‹©ã€Œè‹±è¯­ã€ï¼Œä¹‹åå†åˆ‡æ¢å›ã€Œè·Ÿéšç³»ç»Ÿã€ï¼Œå‘ç°è¯­è¨€å¹¶æ²¡åˆ‡å›ã€Œç®€ä½“ä¸­æ–‡ã€ï¼Œè€Œè¿˜æ˜¯ã€Œè‹±è¯­ã€ã€‚</p><p>ç”±äº Android7.0 ä»¥ä¸Š<code>Configuration</code>å°†é€šè¿‡<code>LocaleList</code>æ¥ç®¡ç†è¯­è¨€ï¼Œå¹¶ä¸”ç³»ç»Ÿåˆ‡æ¢è¯­è¨€åï¼Œç³»ç»Ÿé»˜è®¤è¯­è¨€å¯èƒ½å¹¶ä¸åœ¨<code>LocaleList</code>é¡¶éƒ¨ã€‚</p><p>ç»è¿‡è°ƒè¯•å‘ç°ï¼š<strong>å¦‚æœåœ¨ App ä¸­æ‰‹åŠ¨é€‰æ‹©ï¼ˆåˆ‡æ¢ï¼‰è¿‡è¯­è¨€åˆ™åœ¨<code>LocaleList</code>ä¸­ç³»ç»Ÿè¯­è¨€æ˜¯ç¬¬äºŒä¸ªï¼Œå¦åˆ™æ˜¯ç¬¬ä¸€ä¸ªã€‚</strong></p><p>æ‰€ä»¥ï¼Œè·å–å½“å‰ç³»ç»Ÿ<code>locale</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Locale systemLocale;</span><br><span class="line"><span class="comment">//ç”±äºAPIä»…æ”¯æŒ7.0ï¼Œéœ€è¦åˆ¤æ–­ï¼Œå¦åˆ™ç¨‹åºä¼šcrash(è§£å†³7.0ä»¥ä¸Šç³»ç»Ÿä¸èƒ½è·Ÿéšç³»ç»Ÿè¯­è¨€é—®é¢˜)</span></span><br><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) &#123;</span><br><span class="line">    LocaleList localeList = LocaleList.getDefault();</span><br><span class="line">    <span class="comment">// è·å–ä¹‹å‰é€‰æ‹©è¿‡è¯­è¨€åç¼“å­˜åœ¨ SharePreferences çš„è¯­è¨€ï¼ˆå³å½“å‰é€‰æ‹©çš„è¯­è¨€ï¼‰</span></span><br><span class="line">    <span class="keyword">int</span> spType = getLanguageType(AppApplication.getAppContext());</span><br><span class="line">    <span class="comment">// å¦‚æœappå·²é€‰æ‹©ä¸è·Ÿéšç³»ç»Ÿè¯­è¨€ï¼Œåˆ™å–ç¬¬äºŒä¸ªæ•°æ®ä¸ºç³»ç»Ÿé»˜è®¤è¯­è¨€</span></span><br><span class="line">    <span class="keyword">if</span>(spType != <span class="number">0</span> &amp;&amp; localeList.size() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        locale = localeList.get(<span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        locale = localeList.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    locale = Locale.getDefault();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h1><p>ä½†æ˜¯è¿™ä¸ªåšå‡ºæ¥çš„æ•ˆæœæ˜¯æ¯æ¬¡å¯åŠ¨éƒ½ä¼šé‡å¯ä¸€æ¬¡Activityï¼Œå¼ºè¿«ç—‡çš„æˆ‘è¡¨ç¤ºæ ¹æœ¬å—ä¸äº†ğŸ˜‚ï¼Œè€Œä¸”æ¨ªç«–å±åˆ‡æ¢åä¼šæœ‰è¯­è¨€å˜æˆç³»ç»Ÿè¯­è¨€çš„é—®é¢˜</p><h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><blockquote><ul><li><a href="https://www.jianshu.com/p/16efe98d4554">Androidå¤šè¯­è¨€åˆ‡æ¢å®Œç¾è§£å†³æ–¹æ¡ˆï¼ˆå…¼å®¹7.0ä»¥ä¸Šç‰ˆæœ¬ï¼‰</a><ul><li>æºç åœ°å€ï¼š<a href="https://github.com/Fitem/I18NDemo">https://github.com/Fitem/I18NDemo</a></li></ul></li><li><a href="https://jaeger.itscoder.com/android/2016/05/14/switch-language-on-android-app.html">Android App å¤šè¯­è¨€åˆ‡æ¢</a></li><li><a href="https://cloud.tencent.com/developer/article/1035307">Androidé¢è¯•ç³»åˆ—ä¹‹åº”ç”¨å†…å¤šè¯­è¨€åˆ‡æ¢</a></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€æ¬¡å¯¹layout_weightå’Œmatch_parentçš„æ·±å…¥æ¢ç©¶</title>
      <link href="/posts/73a11b2e.html"/>
      <url>/posts/73a11b2e.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>æ˜¨æ™šï¼Œæˆ‘åˆè¢«å¥•å¹¿å¤§ä½¬æ—¥å¸¸æ‹–å»è®¨è®ºé—®é¢˜ï¼ˆå¯ä»¥ï¼Œè¿™å®¿èˆå¾ˆå¥½å­¦ğŸŒšï¼‰ã€‚</p><p>è¿™æ¬¡è®¨è®ºçš„é—®é¢˜æ˜¯å…³äº Android ä¸­ layout_weightï¼ˆæƒé‡ï¼‰ çš„ç”¨æ³•ï¼Œç„¶ååœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªå‘â€”â€”å…³äºæƒé‡çš„è®¡ç®—é—®é¢˜ã€‚</p><p>è¿™é—®é¢˜å¯èƒ½æ¯”è¾ƒåŸºç¡€ï¼Œä½†æ˜¯å’§ï¼Œæˆ‘ä¹‹å‰ä¸€ç›´éƒ½ä¸ä¼šç”¨ layout_weight çš„ï¼Œæ‰€ä»¥æ˜¯å±äº layout_weight ä½¿ç”¨çš„æ–°æ‰‹ï¼Œå¤§ä½¬è¯·ç»•é“å‹¿å–·ğŸ˜‚</p><a id="more"></a><h1 id="layout-weight-çš„åˆ†æ"><a href="#layout-weight-çš„åˆ†æ" class="headerlink" title="layout_weight çš„åˆ†æ"></a>layout_weight çš„åˆ†æ</h1><h2 id="æƒé‡åˆ†é…çš„æ˜¯å“ªäº›ç©ºé—´ï¼Ÿ"><a href="#æƒé‡åˆ†é…çš„æ˜¯å“ªäº›ç©ºé—´ï¼Ÿ" class="headerlink" title="æƒé‡åˆ†é…çš„æ˜¯å“ªäº›ç©ºé—´ï¼Ÿ"></a>æƒé‡åˆ†é…çš„æ˜¯å“ªäº›ç©ºé—´ï¼Ÿ</h2><p>é¦–å…ˆè¦æ˜ç™½æƒé‡åˆ†é…çš„æ˜¯å“ªäº›ç©ºé—´ï¼Ÿ</p><p><strong>æƒé‡æ˜¯æŒ‰ç…§æ¯”ä¾‹åˆ†é…å±å¹•çš„å‰©ä½™ç©ºé—´</strong>ï¼Œå¯¹è¿™å¥è¯ä¸ç†è§£çš„å¯ä»¥çœ‹ä¸‹å›¾ï¼š<br><img src="/images/android/layout_weight%20analyse.png" alt="layout_weight analyse"></p><p>å‡å¦‚æˆ‘ä»¬å¸Œæœ›å‰©ä½™çš„ç©ºé—´å¹³åˆ†ç»™ç©ºé—´1 å’Œç©ºé—´2 ï¼Œ</p><p>æˆ‘ä»¬åˆ†åˆ«åœ¨2ä¸ªæ§ä»¶çš„è®¾ç½®<code>android:layout_weight=&quot;1&quot;</code></p><h2 id="è®¡ç®—åŸç†"><a href="#è®¡ç®—åŸç†" class="headerlink" title="è®¡ç®—åŸç†"></a>è®¡ç®—åŸç†</h2><p>ç„¶åæˆ‘ä»¬æ¥è¯´ä¸‹ layout_weight çš„è®¡ç®—åŸç†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ§ä»¶çš„å°ºå¯¸ &#x3D; è®¾ç½®çš„æ§ä»¶å°ºå¯¸ + å‰©ä½™ç©ºé—´ä¸­æ§ä»¶çš„ç™¾åˆ†æ¯”</span><br></pre></td></tr></table></figure><p>è¯¦ç»†çš„è®¡ç®—æ–¹å¼åˆ™ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ§ä»¶çš„å®½(é«˜)åº¦ &#x3D; æ§ä»¶ çš„ width(height) + æ§ä»¶çš„ weight * [çˆ¶å¸ƒå±€ï¼ˆLinearLayoutï¼‰çš„å®½(é«˜)åº¦-æ‰€æœ‰æ§ä»¶æ‰€å å®½(é«˜)çš„å’Œ] &#x2F; weightSum</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ</p><p><code>æ§ä»¶çš„ weight / weightSum</code> å°±æ˜¯æƒé‡æ¯”ï¼›</p><p><code>çˆ¶å¸ƒå±€ï¼ˆLinearLayoutï¼‰çš„å®½(é«˜)åº¦-æ‰€æœ‰æ§ä»¶æ‰€å å®½(é«˜)çš„å’Œ</code>ä¸ºå‰©ä½™å¯åˆ†é…ç©ºé—´</p><blockquote><p>è¡¥å……ï¼š</p><ul><li><strong>android:layout_weightçš„çœŸå®å«ä¹‰</strong>æ˜¯:ä¸€æ—¦ View è®¾ç½®äº†è¯¥å±æ€§(å‡è®¾æœ‰æ•ˆçš„æƒ…å†µä¸‹)ï¼Œé‚£ä¹ˆè¯¥ Viewçš„å®½åº¦ç­‰äºåŸæœ‰å®½åº¦(android:layout_width)åŠ ä¸Šå‰©ä½™ç©ºé—´çš„å æ¯”ï¼</li><li>å¦‚æœ width è®¾ç½®äº† match_parent ï¼Œé‚£ä¹ˆï¼ŒåŠ ä¸Šçš„æ˜¯è´Ÿçš„é•¿åº¦ï¼ˆç›¸å½“äºå‡å»ä¸€éƒ¨åˆ†é•¿åº¦ï¼‰</li><li>å¦‚æœ width è®¾ç½®äº† wrap_contentï¼Œé‚£ä¹ˆï¼Œå‰©ä½™ç©ºé—´æ˜¯â€œçˆ¶å®¹å™¨æ€»é•¿åº¦â€å‡å»â€œç»„ä»¶çš„å†…å®¹å çš„é•¿åº¦â€ï¼Œç„¶åå†æŒ‰æ¯”é‡å€¼åˆ†ã€‚</li></ul></blockquote><h1 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h1><p>æˆ‘ä»¬é‡åˆ°çš„æ˜¯ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/activity_main&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;button1&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;button2&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘è·Ÿå¥•å¹¿å°±è’™åœˆäº†ï¼Œä¸ºå•¥ä¸¤ä¸ªéƒ½æ˜¯match_parentæˆ–0dpçš„æ—¶å€™æ§ä»¶å¯ä»¥å„å ä¸€åŠï¼Œ<br><img src="/images/android/both%20match%20or%200dp.jpg" alt="both match or 0dp"></p><p>è€Œä¸€ä¸ªæ˜¯ 0dp å’Œ ä¸€ä¸ªæ˜¯ match_parent å´ä¸èƒ½ï¼Œåå€’è¢«button2ç»™è¦†ç›–äº†ï¼Ÿ<br><img src="/images/android/bt1%200dp%20bt2%20%20match.jpg" alt="bt1 0dp bt2  match"></p><p>åæ¥çŸ¥é“è®¡ç®—æ–¹æ³•ä¹‹åç®—äº†ä¸€ä¸‹ï¼Œåˆè’™äº†ï¼Œç®—ä¸å¯¹ï¼Œæˆ‘ä»¬æ˜¯è¿™æ ·ç®—çš„ï¼š<br>æ ¹æ®å…¬å¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ§ä»¶çš„å®½(é«˜)åº¦ &#x3D; æ§ä»¶ çš„ width(height) + æ§ä»¶çš„ weight * [çˆ¶å¸ƒå±€ï¼ˆLinearLayoutï¼‰çš„å®½(é«˜)åº¦-æ‰€æœ‰æ§ä»¶çš„å®½(é«˜)çš„å’Œ] &#x2F; weightSum</span><br></pre></td></tr></table></figure><p>å¾—è®¡ç®—è¿‡ç¨‹ï¼š</p><p>è®¾çˆ¶å¸ƒå±€ä¸º1åˆ—(å®½)x2è¡Œ(é«˜)ï¼Œåˆ™å¯¹åŠåˆ†ä¹‹åæ¯ä¸ªæ§ä»¶çš„å¸ƒå±€ä¸º1åˆ—(å®½)x1è¡Œ(é«˜)ï¼Œæ‰€ä»¥æ¯ä¸ªæ§ä»¶çš„å®é™…é«˜åº¦åº”è¯¥ä¸º1è¡Œï¼Œå¾—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Button2çš„å®é™…æ˜¾ç¤ºé«˜åº¦ &#x3D; 1è¡Œ + 1weight * (2-1-1)è¡Œ &#x2F; (1+1)weight &#x3D; 1è¡Œ &lt; 2è¡Œ (é”™)</span><br></pre></td></tr></table></figure><p>å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬çš„æ­£ç¡®ç­”æ¡ˆåº”è¯¥æ˜¯ç®—åˆ°Button2å®é™…æ˜¾ç¤ºçš„ 2 è¡Œæ‰æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯ç°åœ¨ç®—åˆ°äº† 1 è¡Œï¼Œæ‰€ä»¥æ˜¾ç„¶æ˜¯ç®—é”™äº†ã€‚</p><hr><p>ç ”ç©¶äº†å¾ˆä¹…æ‰å‘ç°æˆ‘ä»¬<strong>å¯¹ match_parent çš„ç†è§£é”™äº†</strong>ğŸ˜‚ã€‚</p><p><strong><font color='red'>â˜†â˜†æ¥ä¸‹æ¥æ˜¯é‡ç‚¹ï¼ï¼ï¼â˜†â˜†</font></strong><br>ä»è®¡ç®—è¿‡ç¨‹ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬è®¤ä¸ºï¼Œmatch_parentçš„å®é™…å€¼æ˜¯ 1 è¡Œã€‚å®åˆ™ä¸ç„¶ï¼Œmatch_parentæ˜¯<strong>é“ºæ»¡çˆ¶å¸ƒå±€</strong>çš„å®½(é«˜)ï¼Œé‚£ä¹ˆçˆ¶å¸ƒå±€ä¸º1åˆ—(å®½)*2è¡Œ(é«˜)çš„è¯ï¼Œmatch_parentçš„å€¼åº”ä¸º 2 è¡Œï¼ï¼</p><hr><p>æˆ‘ä»¬å†ç®—ä¸€éï¼š</p><p>è®¾çˆ¶å¸ƒå±€ä¸º1åˆ—(å®½)x2è¡Œ(é«˜)ï¼Œåˆ™å¯¹åŠåˆ†ä¹‹åæ¯ä¸ªæ§ä»¶çš„å¸ƒå±€ä¸º1åˆ—(å®½)x1è¡Œ(é«˜)ï¼Œä½†</p><p>ç”±äºButton2çš„é«˜åº¦è®¾ç½®äº†match_parentï¼Œæ‰€ä»¥Button2è®¾ç½®çš„é«˜åº¦åº”è¯¥ä¸º2è¡Œï¼Œå¾—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Button2çš„å®é™…æ˜¾ç¤ºé«˜åº¦ &#x3D; 2è¡Œ + 1weight * (çˆ¶å¸ƒå±€2-2-0)è¡Œ &#x2F; (1+1)weight &#x3D; 2-0è¡Œ &#x3D; 2è¡Œ</span><br></pre></td></tr></table></figure><p>ç”±äºButton1çš„é«˜åº¦è®¾ç½®äº† 0dpï¼Œæ‰€ä»¥Button1è®¾ç½®çš„é«˜åº¦åº”è¯¥ä¸º0è¡Œï¼Œå¾—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Button1çš„å®é™…æ˜¾ç¤ºé«˜åº¦ &#x3D; 0è¡Œ + 1weight * (2-2-0)è¡Œ &#x2F; (1+1)weight &#x3D; 0+0è¡Œ &#x3D; 0è¡Œ</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ•°æ®å°±ç¬¦åˆå®é™…æ˜¾ç¤ºçš„æ•ˆæœäº†ï¼Œå®Œï½</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote><ul><li><a href="https://blog.csdn.net/shb2058/article/details/64122860">androidä¸­weightçš„ä¸€ä¸ªå‘</a></li><li><a href="https://blog.csdn.net/pengbo6665631/article/details/80542556">Android:layout_weightçš„ä½¿ç”¨å’Œå‘</a></li><li><a href="https://blog.csdn.net/qq_26263231/article/details/69831272">Androidè‡ªé€‚åº”å¸ƒå±€(å…³äºæƒé‡weightçš„ä½¿ç”¨æŠ€å·§!)</a></li><li><a href="https://blog.csdn.net/ghost_programmer/article/details/51810216">ä»æºç åˆ‡å…¥ é€å½»ç†è§£Androidçš„weightå±æ€§</a></li><li><a href="https://blog.csdn.net/qq_33210042/article/details/50907811">android weightï¼ˆæƒé‡ï¼‰çš„å…·ä½“åˆ†æ</a></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> å®¿èˆæ—¥å¸¸é—®é¢˜æ¢è®¨ </tag>
            
            <tag> æ—¥å¸¸æŒ–å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦ä¸€ç§ StarUML 3.x å®Œç¾ç ´è§£çš„æ€è·¯â€”â€”æ¯”è¾ƒæš´åŠ›</title>
      <link href="/posts/d94bd648.html"/>
      <url>/posts/d94bd648.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>åœ¨æ˜¨å¤©ï¼Œæˆ‘å‘å¸ƒäº†ä¸€ç¯‡åˆé•¿åˆè‡­çš„<a href="../posts/ee00472d.html">StarUML 3.x å®Œç¾ç ´è§£æ–¹æ¡ˆ</a></p><p>ç„¶åä»Šå¤©æ—©ä¸Šä¸€èµ·åºŠå°±æƒ³åˆ°ï¼Œå•Šï½å¥½éº»çƒ¦å•Šï¼èƒ½ä¸èƒ½è®©å®Œç¾å†ç®€å•ç‚¹ï¼Ÿ</p><p>å¥½çš„ï¼Œç„¶åæˆ‘åˆå¼€å§‹äº†æŠ˜è…¾ï¼ˆçœŸä¸¶ç”Ÿå‘½åœ¨äºæŠ˜è…¾ğŸ˜‚ï¼‰</p><a id="more"></a><h1 id="æˆ‘çš„æƒ³æ³•"><a href="#æˆ‘çš„æƒ³æ³•" class="headerlink" title="æˆ‘çš„æƒ³æ³•"></a>æˆ‘çš„æƒ³æ³•</h1><p>è¿™ä¸€æ¬¡ï¼Œæˆ‘è¦å…ˆä»<code>about-dialog.js</code>å¼€å§‹åˆ†æ</p><p>ï¼ˆ<code>about-dialog.js</code>è·¯å¾„ï¼šè§£å‹<code>app.asar</code>å<code>/app/src/dialogs/about-dialog.js</code>ï¼‰</p><p>æ­£æ‰€è°“ï¼šä½ è¦ä»€ä¹ˆæˆ‘å°±ç»™ä»€ä¹ˆæ‰æ˜¯æœ€æ–¹ä¾¿çš„ğŸŒš</p><h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1><p>ä¸‹é¢å¼€å§‹æ­£å¼åˆ†æç ´è§£</p><h2 id="æŸ¥çœ‹å…³äºä¸­è¦æ˜¾ç¤ºçš„ä¿¡æ¯éœ€è¦è·å–çš„æ•°æ®"><a href="#æŸ¥çœ‹å…³äºä¸­è¦æ˜¾ç¤ºçš„ä¿¡æ¯éœ€è¦è·å–çš„æ•°æ®" class="headerlink" title="æŸ¥çœ‹å…³äºä¸­è¦æ˜¾ç¤ºçš„ä¿¡æ¯éœ€è¦è·å–çš„æ•°æ®"></a>æŸ¥çœ‹å…³äºä¸­è¦æ˜¾ç¤ºçš„ä¿¡æ¯éœ€è¦è·å–çš„æ•°æ®</h2><p><code>about-dialog.js</code>ä¸­ç¬¬ 45-71 è¡Œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// set license info</span></span><br><span class="line"><span class="keyword">if</span> (app.licenseManager.getStatus() === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> info = app.licenseManager.getLicenseInfo()</span><br><span class="line">    <span class="keyword">var</span> licenseTypeName = <span class="string">&#x27;Unknown&#x27;</span></span><br><span class="line">    <span class="keyword">switch</span> (info.licenseType) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;PS&#x27;</span>:</span><br><span class="line">      licenseTypeName = <span class="string">&#x27;Personal&#x27;</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;CO&#x27;</span>:</span><br><span class="line">      licenseTypeName = <span class="string">&#x27;Commercial&#x27;</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;ED&#x27;</span>:</span><br><span class="line">      licenseTypeName = <span class="string">&#x27;Educational&#x27;</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;CR&#x27;</span>:</span><br><span class="line">      licenseTypeName = <span class="string">&#x27;Classroom&#x27;</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">    $license.html(<span class="string">&#x27;Licensed to &#x27;</span> + info.name)</span><br><span class="line">    $licenseType.html(licenseTypeName + <span class="string">&#x27; License&#x27;</span>)</span><br><span class="line">    $quantity.html(info.quantity + <span class="string">&#x27; User(s)&#x27;</span>)</span><br><span class="line">    $crackedAuthor.html(<span class="string">&#x27;Cracked by &#x27;</span> + info.crackedAuthor)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $license.html(<span class="string">&#x27;UNREGISTERED&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dialog</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œå®ƒé¦–å…ˆä¼šå…ˆè°ƒç”¨<code>license-manager.js</code>ä¸­çš„<code>getStatus()</code>æ–¹æ³•åˆ¤æ–­ç¨‹åºçš„æ³¨å†ŒçŠ¶æ€ã€‚é‚£ç°åœ¨æˆ‘ä»¬å»<code>license-manager.js</code>çœ‹ä¸€ä¸‹<code>getStatus()</code>è¿™ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Get Registration Status</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;string&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">getStatus () &#123;</span><br><span class="line">  <span class="keyword">return</span> status</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å—¯â€¦â€¦å¾ˆç®€å•çš„ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘æ˜¯è¯•è¿‡ç›´æ¥åœ¨è¿™é‡Œè®¾ç½®<code>&quot;true&quot;</code>(æ³¨æ„ï¼è¿™é‡Œæ˜¯è¿”å›å­—ç¬¦ä¸²)ï¼Œä½†æ˜¯æ²¡ä»€ä¹ˆç”¨ï¼Œæˆ‘å°±æ²¡æ”¹è¿™é‡Œäº†ã€‚é‚£ä¹ˆè¿™é‡Œåˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå¤§å®¶çœ‹å®ƒè¿”å›çš„é‚£ä¸ªå˜é‡ï¼š<code>status</code>ï¼Œè¿™æ˜¯æˆ‘ä»¬å”¯ä¸€ä»è¿™é‡Œå¾—åˆ°çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å…¨æ–‡æœç´¢ä¸€ä¸‹<code>status</code>ï¼Œå¯ä»¥æ‰¾åˆ°ä¸€ä¸ª<code>setStatus(...)</code>çš„æ–¹æ³•ã€‚æˆ‘ä¿®æ”¹äº†ä¸€ä¸‹è®©å®ƒæ€»æ˜¯è®¾ç½®ä¸º<code>true</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setStatus</span> (<span class="params">licenseManager, newStat</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (status !== newStat) &#123;</span><br><span class="line">    status = newStat</span><br><span class="line">    licenseManager.emit(<span class="string">&#x27;statusChanged&#x27;</span>, <span class="string">&#x27;true&#x27;</span>) <span class="comment">// statusä¿®æ”¹ä¸º&#x27;true&#x27;,æ³¨æ„è¦å¸¦å•å¼•å·</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥è¿›å…¥é‚£ä¸ªifè¯­å¥äº†ğŸŒšã€‚ä¸éš¾çœ‹å‡ºï¼Œæ¥ä¸‹æ¥éœ€è¦çš„æ•°æ®éƒ½åœ¨å˜é‡<code>info</code>é‡Œï¼Œä»è¿™ä¸€å¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> info = app.licenseManager.getLicenseInfo()</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œå®ƒè°ƒç”¨äº†<code>license-manager.js</code>ä¸­çš„<code>getLicenseInfo()</code>æ–¹æ³•è·å–æ‰€éœ€æ•°æ®ï¼Œæˆ‘ä»¬å»çœ‹ä¸€ä¸‹<code>getLicenseInfo()</code>æ–¹æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getLicenseInfo () &#123;</span><br><span class="line">    <span class="keyword">return</span> licenseInfo</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å—¯â€¦..è¿˜æ˜¯é‚£ä¹ˆç®€æ´ï¼Œä½†æ˜¯ä»æ˜¨å¤©çš„æ–‡ç« æˆ‘ä»¬å·²ç»çŸ¥é“è¿™ä¸ª<code>licenseInfo</code>çš„æ•°æ®å†…å®¹æ ¼å¼ï¼Œä»–è¦çš„æ•°æ®ä¹Ÿæ˜¯<code>licenseInfo</code>çš„æ•°æ®ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬ç›´æ¥æ¨¡æ‹Ÿ<code>licenseInfo</code>çš„æ•°æ®å³å¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">getLicenseInfo () &#123;</span><br><span class="line">  licenseInfo = &#123;</span><br><span class="line">          name: <span class="string">&quot;Reborn&quot;</span>,</span><br><span class="line">          product: <span class="string">&quot;Reborn product&quot;</span>,</span><br><span class="line">          licenseType: <span class="string">&quot;PS&quot;</span>,</span><br><span class="line">          quantity: <span class="string">&quot;Reborn Quantity&quot;</span>,</span><br><span class="line">          timestamp: <span class="string">&quot;1529049036&quot;</span>,</span><br><span class="line">          licenseKey: <span class="string">&quot;It&#x27;s Cracked!!&quot;</span>,</span><br><span class="line">          crackedAuthor: <span class="string">&quot;Reborn&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line">  <span class="keyword">return</span> licenseInfo</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œæ¨¡æ‹ŸæˆåŠŸï¼Œ<code>about-dialog.js</code>é‚£è¾¹åº”è¯¥èƒ½è·å–åˆ°<code>licenseInfo</code>çš„æ•°æ®äº†ã€‚ä½†æ˜¯ï¼Œä»…ä»…æ˜¯è¿™æ ·è¿˜ä¸è¡Œå“¦ï¼è¿˜æœ‰æœ€é‡è¦çš„ä¸€ç‚¹ä½ ä»¬åˆ«å¿˜äº†â€”â€”æˆ‘ä»¬è¿˜æ²¡ç ´è§£ï¼</p><h2 id="ç ´è§£æ³¨å†Œ"><a href="#ç ´è§£æ³¨å†Œ" class="headerlink" title="ç ´è§£æ³¨å†Œ"></a>ç ´è§£æ³¨å†Œ</h2><p>ç ´è§£æ³¨å†Œå¾ˆç®€å•ï¼Œç›´æ¥ä¿®æ”¹<code>license-manager.js</code>ä¸­çš„<code>checkLicenseValidity()</code>è¿™ä¸ªæ–¹æ³•å°±å¥½äº†ã€‚</p><p>ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">checkLicenseValidity () &#123;</span><br><span class="line">  <span class="built_in">this</span>.validate().then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setStatus(<span class="built_in">this</span>, <span class="literal">true</span>)</span><br><span class="line">  &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// åŸæ¥çš„ä»£ç ï¼Œå¦‚æœå¤±è´¥å°±ä¼šå°†çŠ¶æ€è®¾ç½®æˆfalse</span></span><br><span class="line"><span class="comment">//       setStatus(this, false)</span></span><br><span class="line"><span class="comment">//       UnregisteredDialog.showDialog()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¿®æ”¹åçš„ä»£ç </span></span><br><span class="line">    setStatus(<span class="built_in">this</span>, <span class="literal">true</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ³¨å†ŒæˆåŠŸï¼ï¼"><a href="#æ³¨å†ŒæˆåŠŸï¼ï¼" class="headerlink" title="æ³¨å†ŒæˆåŠŸï¼ï¼"></a>æ³¨å†ŒæˆåŠŸï¼ï¼</h2><p>å®Œæˆä»¥ä¸Šæµç¨‹ååº”è¯¥å°±èƒ½æˆåŠŸ<strong>ç›´æ¥ç ´è§£</strong>äº†ï¼Œ<strong>ä¸ç”¨è¾“å…¥æ³¨å†Œç </strong>ï¼Œå¹¶ä¸”è¿™ç§æ–¹æ³•ç ´è§£ååŒæ ·èƒ½åœ¨å…³äºæ˜¾ç¤ºä½ è‡ªå®šä¹‰çš„ç ´è§£ä¿¡æ¯ï¼ï¼ä¸€æ ·å®Œç¾ï½<br><img src="/images/staruml-about.png" alt="staruml-about"></p><p>è¿™ç§æ–¹æ³•å’Œæ˜¨å¤©çš„æ¯”èµ·æ¥æ›´ç®€å•ï¼Œä½†æ˜¯ä¹Ÿæ›´æš´åŠ›ã€‚æ˜¨å¤©çš„æ¯”è¾ƒæ¥è¿‘æ­£å¸¸çš„éªŒè¯æµç¨‹ï¼Œè¿™ç§å°±æœ‰ç‚¹çˆ†ç ´çš„å‘³é“äº†ã€‚è¿™é‡Œç»™å‡ºå¦ä¸€ç§æ€è·¯ç»™å¤§å®¶å‚è€ƒï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é€†å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é€†å‘ </tag>
            
            <tag> ç ´è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>StarUML 3.x å®Œç¾ç ´è§£å…¨è¿‡ç¨‹å«è¯¦ç»†åˆ†æï¼ˆå¯è‡ªå®šä¹‰è®¸å¯è¯ä¿¡æ¯ï¼‰</title>
      <link href="/posts/ee00472d.html"/>
      <url>/posts/ee00472d.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>ç»ˆäºå¼€å§‹æ–°çš„å­¦æœŸäº†ï¼Œè¿™å­¦æœŸæˆ‘æœ‰ä¸ª UMLå»ºæ¨¡ çš„è¯¾ç¨‹ï¼Œä¸Šæœºä½œä¸šå°±æ˜¯è¦ç”¨åˆ° StarUML è¿™ä¸ªè½¯ä»¶ï¼Œä½†æ˜¯â€¦â€¦å•Šâ€”â€”ä¸ºä»€ä¹ˆ StarUML é‚£ä¹ˆä¸‘å•Šï¼ï¼ï¼è€Œä¸”ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆéš¾ç”¨å•Šï¼ï¼ï¼ï¼ˆé©¬ä¸Šå¼€å§‹æ€€ç–‘æ˜¯æ—§æ—§æ—§â€¦&lt;çœç•¥ä¸€ä¸‡ä¸ªâ€œæ—§â€&gt;â€¦ç‰ˆï¼‰</p><a id="more"></a><p><strong>ï¼ˆå›¾ç‰‡ä¸‹æ¬¡ä¸Šæœºåé™„ä¸Šï¼‰</strong></p><p>å¥½å§ï¼Œé¢œå€¼å¸çš„æˆ‘æ— å¥ˆç¿»äº†ä¸€ä¸‹å®˜æ–¹ï¼Œå‘ç°è¿˜æœºæˆ¿çš„è¿˜çœŸçš„æ˜¯è¶…çº§æ—§ç‰ˆï¼Œä¸€è¿›å»<a href="http://staruml.io/">å®˜ç½‘</a>å°±èƒ½çœ‹åˆ°æˆ‘æœ€å–œæ¬¢çš„æš—é»‘é£æ ¼ğŸ˜ã€‚<br><img src="/images/staruml-officialwebsite.png" alt="staruml-officialwebsite"></p><p>æœæ–­ä¸‹è½½æ¥è¯•ç”¨äº†ä¸€ä¸‹ï¼Œå“‡ï¼è¿™ä¸ªæ“ä½œæ¯”æœºæˆ¿çš„ä½“éªŒå¥½è¶…çº§å¤šäº†å¥½å—ğŸ˜‚</p><p>è¿™è½¯ä»¶å¼€æºï¼Œä½†æ˜¯å´æ”¶è´¹ï¼Œç©·å¾—è¦æ­»ï¼ˆé“å…¬é¸¡ï¼‰çš„æˆ‘è‚¯å®šæ˜¯ä¸ä¼šä»˜è´¹ç”¨çš„äº†(å…¶å®æ˜¯æƒ³é¡ºä¾¿çœ‹ä¸‹è¿™ä¸ªè½¯ä»¶çš„éªŒè¯é€»è¾‘)ï¼Œäºæ˜¯ç ”ç©¶èµ·äº†ç ´è§£ä¹‹é“ï½</p><h1 id="å…³äº-StarUML-çš„ç ´è§£åŸç†"><a href="#å…³äº-StarUML-çš„ç ´è§£åŸç†" class="headerlink" title="å…³äº StarUML çš„ç ´è§£åŸç†"></a>å…³äº StarUML çš„ç ´è§£åŸç†</h1><blockquote><p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/b6b1f6ad0bd6">https://www.jianshu.com/p/b6b1f6ad0bd6</a></p></blockquote><p>StarUML æ˜¯ç”¨ nodejs å†™çš„ï¼Œç¡®åˆ‡çš„è¯´æ˜¯ç”¨ <a href="https://github.com/electron/electron">Electronå‰ç«¯æ¡†æ¶</a> å†™çš„ã€‚</p><p>æ–°ç‰ˆæœ¬ä¸­æ‰€æœ‰çš„ StarUML æºä»£ç æ˜¯é€šè¿‡ <a href="https://github.com/electron/asar">asar</a> å·¥å…·æ‰“åŒ…è€Œæˆï¼Œç¡®åˆ‡çš„ä»£ç ä½ç½®åœ¨<code>%LOCALAPPDATA%\Programs\StarUML\resources\app.asar</code>ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡asarå·¥å…·è§£å‹ä¿®æ”¹è¾¾åˆ°ç ´è§£ç›®çš„ï¼Œå…³äºasarå·¥å…·ä½¿ç”¨å¯çœ‹æœ¬æ–‡<a href="#%E9%99%84%E5%BD%951%EF%BC%9A%E5%85%B3%E4%BA%8Eapp-asar%E7%9A%84%E8%A7%A3%E5%8E%8B%E4%B8%8E%E9%87%8D%E6%89%93%E5%8C%85">é™„å½•1</a>ã€‚</p><blockquote><p><strong>æå– app.asar</strong><br>ä¸‹è½½çš„ <code>StarUML.app</code>ï¼Œå³é”®æ˜¾ç¤ºåŒ…å†…å®¹<br>è¿›å…¥<code>Contents/Resources/</code><br>æŠŠ<code>app.asar</code>å¤åˆ¶å‡ºæ¥</p></blockquote><h1 id="ä¸ºä»€ä¹ˆç½‘ä¸Šé‚£ä¹ˆå¤šç ´è§£æ•™ç¨‹æˆ‘è¿˜è¦å†™ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆç½‘ä¸Šé‚£ä¹ˆå¤šç ´è§£æ•™ç¨‹æˆ‘è¿˜è¦å†™ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆç½‘ä¸Šé‚£ä¹ˆå¤šç ´è§£æ•™ç¨‹æˆ‘è¿˜è¦å†™ï¼Ÿ"></a>ä¸ºä»€ä¹ˆç½‘ä¸Šé‚£ä¹ˆå¤šç ´è§£æ•™ç¨‹æˆ‘è¿˜è¦å†™ï¼Ÿ</h1><blockquote><p>å‚è€ƒï¼š <a href="https://www.jianshu.com/p/b6b1f6ad0bd6">Mac StarUML 3.0 ç ´è§£</a></p></blockquote><p>é‚£â€¦â€¦å½“ç„¶ä¸æ˜¯ä¸ºäº†å­˜æ¡£ï¼</p><p>ç›¸ä¿¡æœè¿‡ StarUML3 ç ´è§£çš„æœ‹å‹éƒ½çŸ¥é“ï¼Œæƒ³è¦ç ´è§£å°±ä¿®æ”¹<code>app.asar</code>è§£å‹å‡ºæ¥çš„<code>app/src/engine/license-manager.js</code>ï¼ŒæŠŠå…¶ä¸­çš„<code>checkLicenseValidity</code>å‡½æ•°ä¿®æ”¹æˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">checkLicenseValidity () &#123;</span><br><span class="line">    <span class="built_in">this</span>.validate().then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      setStatus(<span class="built_in">this</span>, <span class="literal">true</span>)</span><br><span class="line">    &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// åŸæ¥çš„ä»£ç ï¼Œå¦‚æœå¤±è´¥å°±ä¼šå°†çŠ¶æ€è®¾ç½®æˆfalse</span></span><br><span class="line"><span class="comment">//       setStatus(this, false)</span></span><br><span class="line"><span class="comment">//       UnregisteredDialog.showDialog()</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//ä¿®æ”¹åçš„ä»£ç </span></span><br><span class="line">      setStatus(<span class="built_in">this</span>, <span class="literal">true</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–°æ‰“åŒ…<code>app.asar</code>æ”¾å›<code>StarUML.app/Contents/Resources/</code>ï¼Œç ´è§£æˆåŠŸäº†ã€‚</p><p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆç½‘ä¸Šé‚£ä¹ˆå¤šç ´è§£æ•™ç¨‹æˆ‘è¿˜è¦å†™ä¸€ä¸ªæ•™ç¨‹å‘¢ï¼Ÿ</p><p>å› ä¸ºæˆ‘æ˜¯ä¸ªå®Œç¾ä¸»ä¹‰è€…ï¼Œæˆ‘å‘ç°ç½‘ä¸Šçš„æ•™ç¨‹éƒ½ä¸èƒ½è¾¾åˆ°å®Œç¾ç ´è§£çš„æ•ˆæœâ€”â€”æˆ‘çš„æ³¨å†Œä¿¡æ¯æ€ä¹ˆæ²¡æ³•æ˜¾ç¤ºï¼ˆè‡ªå®šä¹‰ï¼‰ï¼ï¼ï¼äºæ˜¯æˆ‘å°±ç€æ‰‹ç ”ç©¶èµ·<code>app.asar</code>è§£å‹å‡ºæ¥çš„ä»£ç äº†ğŸŒš</p><h1 id="å¼€å§‹åˆ†æ"><a href="#å¼€å§‹åˆ†æ" class="headerlink" title="å¼€å§‹åˆ†æ"></a>å¼€å§‹åˆ†æ</h1><h2 id="ç ´è§£çš„æ ¸å¿ƒï¼šlicense-manager-js"><a href="#ç ´è§£çš„æ ¸å¿ƒï¼šlicense-manager-js" class="headerlink" title="ç ´è§£çš„æ ¸å¿ƒï¼šlicense-manager.js"></a>ç ´è§£çš„æ ¸å¿ƒï¼š<code>license-manager.js</code></h2><blockquote><p>å‚è€ƒï¼š <a href="http://dxkite.cn/2018/06/15/bypass-staruml-3/">ç»•è¿‡StarUML3 æ­£ç‰ˆéªŒè¯ï¼Œå»é™¤æ°´å°</a></p></blockquote><p>ç ´è§£çš„æ ¸å¿ƒè¿˜æ˜¯<code>license-manager.js</code>è¿™ä¸ªè·‘ä¸æ‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆä»è¿™ä¸ªæ–‡ä»¶å¼€å§‹åˆ†æã€‚</p><h3 id="æ ¹æ®æ³¨å†Œç éªŒè¯æµç¨‹åˆ†æ"><a href="#æ ¹æ®æ³¨å†Œç éªŒè¯æµç¨‹åˆ†æ" class="headerlink" title="æ ¹æ®æ³¨å†Œç éªŒè¯æµç¨‹åˆ†æ"></a>æ ¹æ®æ³¨å†Œç éªŒè¯æµç¨‹åˆ†æ</h3><h4 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h4><p>åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæƒ³ä¸€ä¸‹æ­£å¸¸çš„æ³¨å†Œç éªŒè¯æµç¨‹æ˜¯ä»€ä¹ˆï¼š</p><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=5,IE=9" ><![endif]--><!DOCTYPE html><html><head><title>æ­£å¸¸çš„æ³¨å†Œç éªŒè¯æµç¨‹</title><meta charset="utf-8"/></head><body><div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;resize&quot;:true,&quot;toolbar&quot;:&quot;zoom layers lightbox&quot;,&quot;edit&quot;:&quot;_blank&quot;,&quot;xml&quot;:&quot;&lt;mxfile userAgent=\&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/8.8.0 Chrome/61.0.3163.100 Electron/2.0.2 Safari/537.36\&quot; version=\&quot;9.1.3\&quot; editor=\&quot;www.draw.io\&quot; type=\&quot;device\&quot;&gt;&lt;diagram id=\&quot;495560c4-b5ad-c4af-45a2-9c1f2401ae28\&quot; name=\&quot;ç¬¬ 1 é¡µ\&quot;&gt;1VhNc5swEP01OtYDyGBxxI7THtKZzOTQ5NRRQAY1AjFCju38+kogvgxO3MZ2khwc6Wn19fYtuwDgIt1+FzhPfvKIMOBY0RbAK+A4vuWqXw3sKsCzYAXEgkYVZLfAHX0hBrQMuqYRKXqGknMmad4HQ55lJJQ9DAvBN32zFWf9XXMckwFwF2I2RH/RSCYGtT2/HfhBaJyYrZEzqwYecfgUC77OzH7AgavyrxpOcb2WuWiR4IhvOhBcArgQnMuqlW4XhGlqa9qqedcHRptzC5LJYyY4U3MOuavvTiJFhelmPFP/5uWFiJ5iqV4iU6aatmqSLZX3nfaDNpm4pndLBE2JJMJMVGcSu/tup7X/Q6TcGSHgteQK4kImPOYZZjec52aX6rj6jAdvbKCCr0VorByjISxiYqwc2NCtVEy4OqjYKRtBGJb0ub88NnqKG7uWU9UwtB6guFriGbO1WRQsPYB84EOwdMF8AZClt8jzgSsKKfhTo0Cnz72STq7t0m2sY3CyYnwTJljISaHuKX9rm01CJbnLccnDRpk1DI4Q9kyEJNsONCTHjCrZTEyEmwCHCNbIphMwlpF50okVz3o/p/4nUW3Z3Z/wb1J+Q7nuULloNAYuoGR3RMk+CAKAFmCJQHANkK21PYcgQFrbyCuHZiCw9NCJ5J0LHpKiOJ+8XTiQt3e0vBvwPUzbrz+WWzktW/Rtvbcaf6jl/On0joZ6t52PErztjSjeBb4FAm/gICUu2eddkIK+4MfSQBOVc5rJ8jjuHLhXCsGMxpkCQkWJ5nOuRUpVHRKYgZRGUelchh8JmzfVxYIzLsp96/pilN/pAek3lZM5Xa/6GAsJa2JBC/Vi4ptZ/GjWzeK3moXOMrA/g69WhfL8vpeaIx3nOPf88WN/mfixPix+ZqO1j1/miq8QP3XGO0H8OLP65eHE8TM9Q/ygUb8dyuuNS5tno0YWusbVDWWvZl3rStcfuv0/i4CIhLSgPDtfFeChD68CrKPc4Gl+Fe8aCU5IsYqolGZY6kA5F8louk/y1L3om0RdXLzBsQuCKZjbusydT0EwTC9fimNoX5TjsReH97y/nflbARymUPdCCbPeu8eUx3ReLHKcqXas26UMl+YDAnK1Hl977aoWUHv31tj3QJ06b3SmvOUFleXjtU2hB3NrV+mDMKi1r1jHjBHGVQikOpl3qqDeWKc8Go2IVhZ6QyxCowS73K1qq3QL66TfuUpTJgzqhoN5fiCWg2EGkdUPsrN+ElHd9ithleHbL7Fw+Rc=&lt;/diagram&gt;&lt;/mxfile&gt;&quot;}"></div><script type="text/javascript" src="https://www.draw.io/js/viewer.min.js"></script></body></html><h4 id="æ‰“å¼€-app"><a href="#æ‰“å¼€-app" class="headerlink" title="æ‰“å¼€ app"></a>æ‰“å¼€ app</h4><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬é¦–å…ˆè¦<code>æ‰“å¼€ app</code>ï¼Œå¯¹åº”çš„ä»£ç æ˜¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">htmlReady () &#123;</span><br><span class="line">    <span class="built_in">this</span>.projectManager.on(<span class="string">&#x27;projectSaved&#x27;</span>, <span class="function">(<span class="params">filename, project</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> val = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (<span class="number">1.0</span> / LICENSE_CHECK_PROBABILITY))</span><br><span class="line">      <span class="keyword">if</span> (val === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.checkLicenseValidity()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">appReady () &#123;</span><br><span class="line">    <span class="built_in">this</span>.checkLicenseValidity()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¸­éƒ½ä¼šç”¨åˆ°<code>this.checkLicenseValidity()</code>ï¼Œçœ‹è‹±æ–‡æ„æ€æ˜æ˜¾æ˜¯æ£€æŸ¥è®¸å¯è¯æ˜¯å¦æœ‰æ•ˆï¼Œæ‰€ä»¥æŠŠ<code>checkLicenseValidity</code>è¿™ä¸ªæ–¹æ³•ä¿®æ”¹ä¸€ä¸‹å°±å¯ä»¥ç ´è§£äº†ï¼ˆä¿®æ”¹æ–¹æ³•çœ‹<a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%BD%91%E4%B8%8A%E9%82%A3%E4%B9%88%E5%A4%9A%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B%E6%88%91%E8%BF%98%E8%A6%81%E5%86%99%EF%BC%9F">ä¸Šé¢</a>)</p><p><strong>ä½†æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆä¸ä¿®æ”¹ï¼ï¼ï¼å› ä¸ºä¿®æ”¹åæ²¡æ³•å¼¹å‡ºæ— æ³•å¼¹å‡ºè¾“å…¥æ³¨å†Œç çš„çª—å£ï¼Œå°±æ— æ³•å®Œç¾ç ´è§£äº†ï¼ï¼</strong></p><h4 id="è¾“å…¥æ³¨å†Œç "><a href="#è¾“å…¥æ³¨å†Œç " class="headerlink" title="è¾“å…¥æ³¨å†Œç "></a>è¾“å…¥æ³¨å†Œç </h4><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<strong>è¾“å…¥æ³¨å†Œç </strong>ä¹Ÿå°±æ˜¯<strong>æ³¨å†Œ</strong>çš„é€»è¾‘ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">register (licenseKey) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    $.post(app.config.validation_url, &#123;<span class="attr">licenseKey</span>: licenseKey&#125;)</span><br><span class="line">      .done(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> file = path.join(app.getUserPath(), <span class="string">&#x27;/license.key&#x27;</span>)</span><br><span class="line">        fs.writeFileSync(file, <span class="built_in">JSON</span>.stringify(data, <span class="number">2</span>))</span><br><span class="line">        licenseInfo = data</span><br><span class="line">        setStatus(<span class="built_in">this</span>, <span class="literal">true</span>)</span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;)</span><br><span class="line">      .fail(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        setStatus(<span class="built_in">this</span>, <span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">if</span> (err.status === <span class="number">499</span>) &#123; <span class="comment">/* License key not exists */</span></span><br><span class="line">          reject(<span class="string">&#x27;invalid&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          reject()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£é‡Šä¸€ä¸‹ï¼Œè¿™ä¸ª<code>register</code>å‡½æ•°éœ€è¦ä¼ å…¥çš„å‚æ•°<code>licenseKey</code>å°±æ˜¯è¾“å…¥çš„æ³¨å†Œç ï¼Œç„¶åç”¨POSTè¯·æ±‚ balabalaï¼Œè¯·æ±‚æˆåŠŸåè¿”å›ä¸€ä¸ª<code>data</code>ï¼Œç„¶ååœ¨ StarUML çš„é…ç½®ä¿¡æ¯ç›®å½•æ–°å»ºä¸€ä¸ª<code>license.key</code>çš„æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«ç€æ‰€æœ‰è®¸å¯è¯ä¿¡æ¯ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªè®¸å¯è¯ä¿¡æ¯æ˜¯<strong>ç”¨ JSON æ ¼å¼å‚¨å­˜çš„</strong>ï¼Œè€Œè¯·æ±‚åè·å–çš„<code>data</code>å°±æ˜¯è®¸å¯è¯ä¿¡æ¯çš„å†…å®¹ï¼Œ<strong>é‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯åªè¦æ¨¡æ‹Ÿå·²ç»è·å–åˆ°äº†è®¸å¯è¯ä¿¡æ¯æ˜¯ä¸æ˜¯å°±okäº†ï¼Ÿ</strong></p><p>é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œæˆ‘ä»¬æ€ä¹ˆçŸ¥é“<code>data</code>çš„å†…å®¹æ ¼å¼å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ä¸å¦¨å‚è€ƒä¸€ä¸‹ StarUML2 çš„ç ´è§£ï¼š<a href="https://www.jianshu.com/p/0c49ebf342e0">https://www.jianshu.com/p/0c49ebf342e0</a></p><p>åœ¨ StarUML2 çš„ç ´è§£ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    name: <span class="string">&quot;0xcb&quot;</span>,</span><br><span class="line">    product: <span class="string">&quot;StarUML&quot;</span>,</span><br><span class="line">    licenseType: <span class="string">&quot;vip&quot;</span>,</span><br><span class="line">    quantity: <span class="string">&quot;bbs.chinapyg.com&quot;</span>,</span><br><span class="line">    licenseKey: <span class="string">&quot;later equals never!&quot;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æˆ‘æ–—èƒ†çŒœæµ‹è¿™å°±æ˜¯<code>data</code>çš„å†…å®¹æ ¼å¼ï¼ˆä¹Ÿå°±æ˜¯è®¸å¯è¯ä¿¡æ¯çš„å†…å®¹æ ¼å¼ï¼‰ï¼ï¼ï¼</p><p>æˆ‘ä»¬å¹¿ä¸œäººå¸¸å¸¸ä¼šè¯´ä¸€å¥è¯ï¼šè®²å¤šæ— è°“ï¼Œè¡ŒåŠ¨æœ€å®é™…ã€‚æˆ‘ä»¬ä¸‹é¢å°±æ¥å°è¯•ä¸€ä¸‹ï¼</p><p>æ—¢ç„¶æ˜¯æœ¬åœ°æ¨¡æ‹Ÿï¼Œé‚£å½“ç„¶è¦æŠŠç½‘ç»œè¯·æ±‚å»æ‰ç„¶åæ¨¡æ‹Ÿ<code>data</code>çš„å†…å®¹ï¼Œä¿®æ”¹æ•´ç†åå¾—åˆ°ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">register (licenseKey) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> data = &#123;</span><br><span class="line">          name: <span class="string">&quot;Reborn&quot;</span>,</span><br><span class="line">          product: <span class="string">&quot;Reborn product&quot;</span>,</span><br><span class="line">          licenseType: <span class="string">&quot;PS&quot;</span>,</span><br><span class="line">          quantity: <span class="string">&quot;Reborn Quantity&quot;</span>,</span><br><span class="line">          timestamp: <span class="string">&quot;1529049036&quot;</span>,</span><br><span class="line">          licenseKey: <span class="string">&quot;It&#x27;s Cracked!!&quot;</span>,</span><br><span class="line">          crackedAuthor: <span class="string">&quot;Reborn&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> file = path.join(app.getUserPath(), <span class="string">&#x27;/license.key&#x27;</span>)</span><br><span class="line">        fs.writeFileSync(file, <span class="built_in">JSON</span>.stringify(data, <span class="number">2</span>))</span><br><span class="line">        licenseInfo = data</span><br><span class="line">        setStatus(<span class="built_in">this</span>, <span class="literal">true</span>)</span><br><span class="line">        resolve(data)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œè®¸å¯è¯ä¿¡æ¯åº”è¯¥æ˜¯æ¨¡æ‹ŸæˆåŠŸäº†ï¼Œçœ‹ StarUML çš„é…ç½®ä¿¡æ¯ç›®å½•ä¸‹åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ª<code>license.key</code>çš„æ–‡ä»¶ã€‚è¾“å®Œæ³¨å†Œç åå°±è¦éªŒè¯æ³¨å†Œç æ˜¯å¦æœ‰æ•ˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹éªŒè¯è®¸å¯è¯ä¿¡æ¯æ¨¡å—ã€‚</p><blockquote><p><strong>è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ï¼š</strong><code>licenseType</code>çš„è®¾ç½®æ˜¯å›ºå®šå‡ ä¸ªå‚æ•°çš„ï¼Œåœ¨è¿™é‡Œæˆ‘è®¾ç½®ä¸º<code>PS</code>ï¼Œä¹‹å‰è®¾ç½®<code>Reborn Personal</code>å¯¼è‡´å…³äºé‚£é‡Œæ˜¾ç¤º<code>Unknown License</code>ã€‚å…³äºè¿™ä¸ªå¤§å®¶å¯ä»¥å»çœ‹çœ‹<code>app/src/dialogs/about-dialog.js</code>ã€‚</p></blockquote><h4 id="éªŒè¯è®¸å¯è¯ä¿¡æ¯"><a href="#éªŒè¯è®¸å¯è¯ä¿¡æ¯" class="headerlink" title="éªŒè¯è®¸å¯è¯ä¿¡æ¯"></a>éªŒè¯è®¸å¯è¯ä¿¡æ¯</h4><p>å…ˆæ¥çœ‹ä¸‹ä»£ç å§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">validate () &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// Local check</span></span><br><span class="line">      <span class="keyword">var</span> file = <span class="built_in">this</span>.findLicense()</span><br><span class="line">      <span class="keyword">if</span> (!file) &#123;</span><br><span class="line">        reject(<span class="string">&#x27;License key not found&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> data = fs.readFileSync(file, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">        licenseInfo = <span class="built_in">JSON</span>.parse(data)</span><br><span class="line">        <span class="keyword">var</span> base = SK + licenseInfo.name +</span><br><span class="line">          SK + licenseInfo.product + <span class="string">&#x27;-&#x27;</span> + licenseInfo.licenseType +</span><br><span class="line">          SK + licenseInfo.quantity +</span><br><span class="line">          SK + licenseInfo.timestamp + SK</span><br><span class="line">        <span class="keyword">var</span> _key = crypto.createHash(<span class="string">&#x27;sha1&#x27;</span>).update(base).digest(<span class="string">&#x27;hex&#x27;</span>).toUpperCase()</span><br><span class="line">        <span class="keyword">if</span> (_key !== licenseInfo.licenseKey) &#123;</span><br><span class="line">          reject(<span class="string">&#x27;Invalid license key&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// Server check</span></span><br><span class="line">          $.post(app.config.validation_url, &#123;<span class="attr">licenseKey</span>: licenseInfo.licenseKey&#125;)</span><br><span class="line">            .done(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">              resolve(data)</span><br><span class="line">            &#125;)</span><br><span class="line">            .fail(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (err &amp;&amp; err.status === <span class="number">499</span>) &#123; <span class="comment">/* License key not exists */</span></span><br><span class="line">                reject(err)</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// If server is not available, assume that license key is valid</span></span><br><span class="line">                resolve(licenseInfo)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°éªŒè¯åˆ†ä¸¤éƒ¨åˆ†ï¼šå…ˆ<code>æœ¬åœ°éªŒè¯</code>å†è¿›è¡Œ<code>ç½‘ç»œéªŒè¯</code>ï¼Œç½‘ç»œéªŒè¯æˆåŠŸåè¿”å›è®¸å¯è¯ä¿¡æ¯ã€‚</p><h5 id="æœ¬åœ°éªŒè¯"><a href="#æœ¬åœ°éªŒè¯" class="headerlink" title="æœ¬åœ°éªŒè¯"></a>æœ¬åœ°éªŒè¯</h5><p>æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥ï¼Œå…ˆå¤„ç†æœ¬åœ°éªŒè¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Local check</span></span><br><span class="line"><span class="keyword">var</span> file = <span class="built_in">this</span>.findLicense()</span><br><span class="line"><span class="keyword">if</span> (!file) &#123;</span><br><span class="line">    reject(<span class="string">&#x27;License key not found&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> data = fs.readFileSync(file, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    licenseInfo = <span class="built_in">JSON</span>.parse(data)</span><br><span class="line">    <span class="keyword">var</span> base = SK + licenseInfo.name +</span><br><span class="line">    SK + licenseInfo.product + <span class="string">&#x27;-&#x27;</span> + licenseInfo.licenseType +</span><br><span class="line">    SK + licenseInfo.quantity +</span><br><span class="line">    SK + licenseInfo.timestamp + SK</span><br><span class="line">    <span class="keyword">var</span> _key = crypto.createHash(<span class="string">&#x27;sha1&#x27;</span>).update(base).digest(<span class="string">&#x27;hex&#x27;</span>).toUpperCase()</span><br><span class="line">    <span class="keyword">if</span> (_key !== licenseInfo.licenseKey) &#123;</span><br><span class="line">        reject(<span class="string">&#x27;Invalid license key&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ¬åœ°éªŒè¯çœŸæ­£å¼€å§‹éªŒè¯çš„åœ°æ–¹æ˜¯ä»ç¬¬ 8 è¡Œå¼€å§‹çš„ã€‚é€šè¿‡æ–‡ä»¶<code>license.key</code>ä¸­çš„éƒ¨åˆ†è®¸å¯è¯ä¿¡æ¯è®¡ç®—å‡ºä¸€ä¸ªæ³¨å†Œç ç„¶åå’Œè®¸å¯è¯ä¿¡æ¯ä¸­çš„<code>licenseKey</code>è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸ç›¸ç­‰é‚£å°±è¿”å›æ³¨å†Œç å¤±æ•ˆï¼ˆä»è¿™é‡Œçš„<code>licenseInfo</code>è°ƒç”¨ä¹Ÿå¯ä»¥çœ‹å‡ºè®¸å¯è¯ä¿¡æ¯åŒ…å«äº†ä»€ä¹ˆï¼Œä¸ä¸Šä¸€æ­¥çš„<code>data</code>éªŒè¯ï¼‰ã€‚</p><p>æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬å°±ä¸è®©å®ƒæ¯”è¾ƒå˜›ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›æˆåŠŸä¸å°±å¾—äº†ï¼</p><p>å¥½çš„ï¼Œ<strong>ç¬¬ 8 è¡Œä¹‹åçš„éƒ½åˆ æ‰</strong>ã€‚</p><h5 id="ç½‘ç»œéªŒè¯"><a href="#ç½‘ç»œéªŒè¯" class="headerlink" title="ç½‘ç»œéªŒè¯"></a>ç½‘ç»œéªŒè¯</h5><p>ç”±äºè¿”å›çš„é€»è¾‘ä¸åœ¨æœ¬åœ°éªŒè¯ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦åˆ†æç½‘ç»œéªŒè¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Server check</span></span><br><span class="line">$.post(app.config.validation_url, &#123;<span class="attr">licenseKey</span>: licenseInfo.licenseKey&#125;)</span><br><span class="line">    .done(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(data)</span><br><span class="line">    &#125;)</span><br><span class="line">    .fail(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err &amp;&amp; err.status === <span class="number">499</span>) &#123; <span class="comment">/* License key not exists */</span></span><br><span class="line">           reject(err)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// If server is not available, assume that license key is valid</span></span><br><span class="line">            resolve(licenseInfo)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åˆæ˜¯ä¸€ä¸ª POST è¯·æ±‚ï¼åˆæ˜¯è¿”å›<code>data</code>ï¼è®¤çœŸçœ‹äº†ä¸€ä¸‹è¿˜æ˜¯ä¸ä¸Šä¸€æ­¥<code>è¾“å…¥æ³¨å†Œç </code>åŒæ ·çš„ç½‘ç»œè¯·æ±‚ï¼å¥½äº†ï¼Œå¤šçš„æˆ‘å°±ä¸è¯´äº†ğŸ‘€ï¼Œå¤§å®¶åº”è¯¥çŸ¥é“æ€ä¹ˆåŠï¼Œå¯ä»¥åŒä¸Šä¸€æ­¥ä¸€æ ·æ¨¡æ‹Ÿ<code>data</code>çš„å†…å®¹ï¼Œç„¶å<code>resolve(data)</code>è¿”å›å³å¯ã€‚</p><p>**ä½†æ˜¯ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ç›´æ¥è¿”å›<code>licenseInfo</code>**ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å¤§å®¶çœ‹ä¸€ä¸‹æœ¬åœ°éªŒè¯ï¼Œ<code>licenseInfo</code>çš„å†…å®¹æ˜¯ä»æ–‡ä»¶<code>license.key</code>ä¸­è½¬æ¢è€Œæ¥ï¼Œæ–‡ä»¶<code>license.key</code>çš„å†…å®¹æ˜¯ä¸Šä¸€æ­¥çš„ POST è¯·æ±‚è€Œæ¥ï¼Œå—¯â€¦.ä¸ç”¨æˆ‘å¤šè¯´äº†å§ï¼</p><p>æ•´ç†ä»£ç åå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">validate () &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// Local check</span></span><br><span class="line">      <span class="keyword">var</span> file = <span class="built_in">this</span>.findLicense()</span><br><span class="line">      <span class="keyword">if</span> (!file) &#123;</span><br><span class="line">        reject(<span class="string">&#x27;License key not found&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> data = fs.readFileSync(file, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">        licenseInfo = <span class="built_in">JSON</span>.parse(data)</span><br><span class="line">        resolve(licenseInfo)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ³¨å†ŒæˆåŠŸï¼ï¼"><a href="#æ³¨å†ŒæˆåŠŸï¼ï¼" class="headerlink" title="æ³¨å†ŒæˆåŠŸï¼ï¼"></a>æ³¨å†ŒæˆåŠŸï¼ï¼</h4><p>å®Œæˆä»¥ä¸Šæµç¨‹ååº”è¯¥å°±èƒ½æˆåŠŸå®ç°<strong>è¾“å…¥ä»»æ„æ³¨å†Œç </strong>éƒ½å¯ä»¥ç ´è§£äº†ï¼Œå¹¶ä¸”è¿™ç§æ–¹æ³•ç ´è§£åè¿˜èƒ½åœ¨å…³äºæ˜¾ç¤ºä½ è‡ªå®šä¹‰çš„ç ´è§£ä¿¡æ¯ï¼ï¼å®Œç¾ï½<br><img src="/images/staruml-about.png" alt="staruml-about"></p><h1 id="é™„å½•1ï¼šå…³äºapp-asarçš„è§£å‹ä¸é‡æ‰“åŒ…"><a href="#é™„å½•1ï¼šå…³äºapp-asarçš„è§£å‹ä¸é‡æ‰“åŒ…" class="headerlink" title="é™„å½•1ï¼šå…³äºapp.asarçš„è§£å‹ä¸é‡æ‰“åŒ…"></a>é™„å½•1ï¼šå…³äº<code>app.asar</code>çš„è§£å‹ä¸é‡æ‰“åŒ…</h1><blockquote><p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/b6b1f6ad0bd6">https://www.jianshu.com/p/b6b1f6ad0bd6</a></p></blockquote><h2 id="å®‰è£…asar"><a href="#å®‰è£…asar" class="headerlink" title="å®‰è£…asar"></a>å®‰è£…asar</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g asar</span><br></pre></td></tr></table></figure><h2 id="è§£å‹app-asar"><a href="#è§£å‹app-asar" class="headerlink" title="è§£å‹app.asar"></a>è§£å‹app.asar</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asar extract app.asar app</span><br></pre></td></tr></table></figure><h2 id="é‡æ–°æ‰“åŒ…app-asar"><a href="#é‡æ–°æ‰“åŒ…app-asar" class="headerlink" title="é‡æ–°æ‰“åŒ…app.asar"></a>é‡æ–°æ‰“åŒ…app.asar</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asar pack app app.asar</span><br></pre></td></tr></table></figure><h1 id="é™„å½•2ï¼šè‡ªå®šä¹‰å…³äºç•Œé¢"><a href="#é™„å½•2ï¼šè‡ªå®šä¹‰å…³äºç•Œé¢" class="headerlink" title="é™„å½•2ï¼šè‡ªå®šä¹‰å…³äºç•Œé¢"></a>é™„å½•2ï¼šè‡ªå®šä¹‰å…³äºç•Œé¢</h1><p>å¤§å®¶åšå®Œä¸Šé¢çš„æ“ä½œè‚¯å®šä¼šå‘ç°ï¼Œä¸ºä»€ä¹ˆä½ ä»¬çš„å…³äºæ²¡æœ‰<code>Cracked By XXX</code>çš„å­—æ ·ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä¿®æ”¹äº†<code>å…³äº</code>çš„ GUIï¼Œåœ¨å‰é¢å¹¶æ²¡æœ‰è¯´ï¼Œåœ¨è¿™é‡Œæˆ‘ç‰¹åˆ«åˆ†å‡ºæ¥å†™ä¸€ä¸‹ï¼Œç®—æ˜¯ä¸ªå°å½©è›‹å§ï¼</p><h2 id="æ‰¾åˆ°ä»£ç æ‰€åœ¨æ–‡ä»¶"><a href="#æ‰¾åˆ°ä»£ç æ‰€åœ¨æ–‡ä»¶" class="headerlink" title="æ‰¾åˆ°ä»£ç æ‰€åœ¨æ–‡ä»¶"></a>æ‰¾åˆ°ä»£ç æ‰€åœ¨æ–‡ä»¶</h2><p>é¦–å…ˆæˆ‘ä»¬è¦æ‰¾åˆ°<code>å…³äº</code>è¿™ä¸ªç•Œé¢çš„ä»£ç æ–‡ä»¶ï¼Œç»è¿‡åˆ†æå’ŒæŸ¥æ‰¾ï¼Œæˆ‘æ‰¾åˆ°äº†<code>about-dialog.js</code>å’Œ<code>about-dialog.html</code></p><p>è‡³äºæ€ä¹ˆæ‰¾åˆ°çš„ï¼Œå¤§å®¶çœ‹ä¸€ä¸‹<code>about-dialog.js</code>çš„è¿™å¥ä»£ç å°±çŸ¥é“äº†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> aboutDialogTemplate = fs.readFileSync(path.join(__dirname, <span class="string">&#x27;../static/html-contents/about-dialog.html&#x27;</span>), <span class="string">&#x27;utf8&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="å¼€å§‹åˆ†æ-1"><a href="#å¼€å§‹åˆ†æ-1" class="headerlink" title="å¼€å§‹åˆ†æ"></a>å¼€å§‹åˆ†æ</h2><h3 id="about-dialog-html"><a href="#about-dialog-html" class="headerlink" title="about-dialog.html"></a>about-dialog.html</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ html å§ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å¤§å®¶å¯ä»¥å¾ˆæ˜æ˜¾çœ‹åˆ°è¿™ä¹ˆä¸€æ®µï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=<span class="string">&quot;font-size: 20px;&quot;</span>&gt;&#123;&#123;metadata.name&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div style=<span class="string">&quot;font-size: 14px;&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;license&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;div style=<span class="string">&quot;font-size: 14px;&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;licenseType&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;div style=<span class="string">&quot;font-size: 14px;&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;quantity&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123;metadata.copyright&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;div&gt;<span class="xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span>Version &#123;&#123;metadata.version&#125;&#125;<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span>&lt;/div&gt;</span><br><span class="line">&lt;div&gt;<span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;thirdparty&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Third party softwares<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>å¯¹æ¯”ä¸€ä¸‹å…³äºçš„ç•Œé¢ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—åˆšå¥½å¯¹ä¸Šäº†ğŸŒš</p><p>å¥½çš„é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬åŠ ä¸€ä¸ªç ´è§£è€…çš„ä¿¡æ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">&lt;div style=<span class="string">&quot;font-size: 14px;&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;quantity&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;div style=<span class="string">&quot;font-size: 16px;&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;crackedAuthor&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç¬¬ 3 è¡Œå°±æ˜¯æˆ‘æ·»åŠ çš„ä¿¡æ¯ï¼Œå…¶ä¸­<code>font-size</code>æ˜¯è°ƒæ•´å­—ä½“å¤§å°ï¼Œ<code>class=&quot;crackedAuthor&quot;</code>è¿™ä¸ªç±»é€‰æ‹©å™¨å<code>crackedAuthor</code>è¦è®°ä½ï¼Œç­‰ä¸‹è¦ç”¨åˆ°ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹<code>about-dialog.js</code></p><h3 id="about-dialog-js"><a href="#about-dialog-js" class="headerlink" title="about-dialog.js"></a>about-dialog.js</h3><p>åœ¨è¿™ä¸ª js æ–‡ä»¶é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™å‡ è¡Œä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="keyword">var</span> $license = $dlg.find(<span class="string">&#x27;.license&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> $licenseType = $dlg.find(<span class="string">&#x27;.licenseType&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> $quantity = $dlg.find(<span class="string">&#x27;.quantity&#x27;</span>)</span><br><span class="line">......</span><br><span class="line">$license.html(<span class="string">&#x27;Licensed to &#x27;</span> + info.name)</span><br><span class="line">$licenseType.html(licenseTypeName + <span class="string">&#x27; License&#x27;</span>)</span><br><span class="line">$quantity.html(info.quantity + <span class="string">&#x27; User(s)&#x27;</span>)</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™å‡ è¡Œä»£ç å§ï¼</p><p><code>$dlg.find(&#39;.xxx&#39;)</code>çš„æ„æ€æ˜¯æœç´¢æ‰€æœ‰ç±»é€‰æ‹©å™¨åä¸º<code>.xxx</code>çš„å…ƒç´ ã€‚<br><code>$xxx.html(&#39;abc&#39;)</code>çš„æ„æ€æ˜¯è®¾ç½®<code>xxx</code>å…ƒç´ çš„å†…å®¹ä¸º<code>abc</code>ã€‚</p><p>è¯´åˆ°è¿™é‡Œå¤§å®¶åº”è¯¥çŸ¥é“æ€ä¹ˆä¿®æ”¹äº†å§ï¼è¿™æ˜¯æˆ‘ä¿®æ”¹çš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="keyword">var</span> $license = $dlg.find(<span class="string">&#x27;.license&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> $licenseType = $dlg.find(<span class="string">&#x27;.licenseType&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> $quantity = $dlg.find(<span class="string">&#x27;.quantity&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> $crackedAuthor = $dlg.find(<span class="string">&#x27;.crackedAuthor&#x27;</span>)</span><br><span class="line">......</span><br><span class="line">$license.html(<span class="string">&#x27;Licensed to &#x27;</span> + info.name)</span><br><span class="line">$licenseType.html(licenseTypeName + <span class="string">&#x27; License&#x27;</span>)</span><br><span class="line">$quantity.html(info.quantity + <span class="string">&#x27; User(s)&#x27;</span>)</span><br><span class="line">$crackedAuthor.html(<span class="string">&#x27;Cracked by &#x27;</span> + info.crackedAuthor)</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹æˆåŠŸ"><a href="#ä¿®æ”¹æˆåŠŸ" class="headerlink" title="ä¿®æ”¹æˆåŠŸ"></a>ä¿®æ”¹æˆåŠŸ</h3><p>ä¿å­˜å¥½ä»£ç <a href="#%E9%87%8D%E6%96%B0%E6%89%93%E5%8C%85app-asar">é‡æ–°æ‰“åŒ…<code>app.asar</code></a>å°±å¯ä»¥çœ‹åˆ°ä¿®æ”¹åçš„å…³äºç•Œé¢å•¦ï¼<br><img src="/images/staruml-about.png" alt="staruml-about"></p>]]></content>
      
      
      <categories>
          
          <category> é€†å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é€†å‘ </tag>
            
            <tag> ç ´è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æš´åŠ›æŸ¥è¯¢å››å…­çº§å‡†è€ƒè¯å·â€”â€”çœŸçš„å¾ˆæš´åŠ›</title>
      <link href="/posts/90d0bd8.html"/>
      <url>/posts/90d0bd8.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><blockquote><p>å‚è€ƒï¼š<a href="http://www.freebuf.com/articles/database/145261.html">http://www.freebuf.com/articles/database/145261.html</a></p></blockquote><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>æ˜¨å¤©æœ‰ä¸ªæœ‹å‹è¯´å‡†è€ƒè¯æ²¡å¸¦å›æ¥ï¼Œé—®æˆ‘èƒ½ä¸èƒ½å¸®å¥¹æŸ¥ä¸‹å‡†è€ƒè¯å·ï¼Œæˆ‘çªç„¶æƒ³èµ·äº†ä»Šå¹´2æœˆä»½ç©·ä¸¾çš„å››çº§å‡†è€ƒè¯ï¼Œäºæ˜¯å°±ç¿»å‡ºæ¥è¯•è¯•ã€‚</p><p>å½“æ—¶æˆ‘å¯¹æºç è¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ï¼Œä¸è¿‡ä¸€å¹´å‰æˆ‘è¿˜æ²¡æ­å»ºåšå®¢ï¼Œå¦‚ä»Šä¹Ÿç®—æœ‰ä¸ªæœºä¼šå¯¹å½“æ—¶çš„å­¦ä¹ åšä¸ªè®°å½•å’Œæ€»ç»“ã€‚</p><p>æ˜¨å¤©æˆ‘ä¹Ÿç»§ç»­å¯¹æºç è¿›è¡Œäº†ä¸€ç•ªæ”¹è¿›ï¼Œæ”¹çš„éƒ½éå¸¸ç®€å•ï¼Œ<strong>è®¤çœŸé˜…è¯»</strong>äº†åŸä½œè€…é‚£éƒ¨åˆ†ä¿®æ”¹å‰çš„<strong>æºç </strong>å°±è‚¯å®šèƒ½çœ‹æ‡‚ã€‚</p><a id="more"></a><h1 id="è¦æ‡‚å¾—æ„Ÿæ¿€"><a href="#è¦æ‡‚å¾—æ„Ÿæ¿€" class="headerlink" title="è¦æ‡‚å¾—æ„Ÿæ¿€"></a>è¦æ‡‚å¾—æ„Ÿæ¿€</h1><p>é¦–å…ˆï¼Œæ„Ÿè°¢<a href="http://www.freebuf.com/author/FlashYo">@FlashYo</a>æä¾›çš„æºç ï¼Œè®©æˆ‘ä¹Ÿå­¦ä¹ äº†ä¸å°‘ä¸œè¥¿ã€‚é‡Œé¢é“¾æ¥åŸæœ¬æ˜¯å¤±æ•ˆäº†çš„ï¼Œæˆ‘åˆå»é—®äº†<a href="http://www.freebuf.com/author/FlashYo">@FlashYo</a>ï¼Œæƒ³çœ‹ä¸‹<code>utils.py</code>æ˜¯æ€ä¹ˆå†™çš„ï¼Œä»–æƒ³éƒ½æ²¡æƒ³å°±åˆ†äº«äº†ï¼Œæˆ‘è¡¨ç¤ºå¾ˆæ„Ÿæ¿€ã€‚</p><p>äºæ˜¯å‘¢ï¼Œæˆ‘å°±å¼€å§‹äº†ç¬¬ä¸€æ¬¡é˜…è¯» Python ä»£ç çš„ç»å†ï¼ˆå…¶å®è¿™ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦ Python ï¼‰ï¼Œä»£ç çœ‹å®Œä¹‹åæ„Ÿè§‰ä¹Ÿä¸éš¾ï¼Œ<a href="http://www.freebuf.com/author/FlashYo">@FlashYo</a>çš„ä»£ç å†™çš„å¾ˆæœ‰æ¡ç†ï¼Œä»–çš„æ–‡ç« ä¹Ÿæœ‰å¾ˆè¯¦ç»†çš„ä»£ç è¯´æ˜ã€‚</p><p><del>ä½†ç”±äºåŸæ–‡è¯´<strong>ä¸ç»å…è®¸ç¦æ­¢è½¬è½½</strong>ï¼Œæˆ‘ä¹Ÿå°Šé‡ä½œè€…ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸è´´ä»–çš„ä»£ç å’Œæ–‡ç« å†…å®¹å•¦ï¼æœ‰å…´è¶£çš„å¯ä»¥å»ä¸Šé¢æä¾›çš„å‚è€ƒé“¾æ¥çœ‹ã€‚</del></p><p><strong><font color="red">2018-08-25æ›´æ–°ï¼šå·²è·å¾—ä½œè€…æˆæƒå¼•ç”¨ä»–çš„æ–‡ç« å†…å®¹ï¼Œæ„Ÿè°¢<a href="http://www.freebuf.com/author/FlashYo">@FlashYo</a>ğŸŒš</font></strong></p><p><strong>é‚£ä¹ˆâ€¦â€¦æˆ‘è¿™ç¯‡åšæ–‡æ˜¯å†™ä»€ä¹ˆçš„å‘¢ï¼Ÿ</strong></p><h1 id="è‡ªå·±çš„æ”¶è·"><a href="#è‡ªå·±çš„æ”¶è·" class="headerlink" title="è‡ªå·±çš„æ”¶è·"></a>è‡ªå·±çš„æ”¶è·</h1><p>é‚£å½“ç„¶æ˜¯å†™è‡ªå·±çš„æ”¶è·å•¦ï¼ï¼ˆè¯´äº†é‚£ä¹ˆå¤šä¹Ÿè¯¥è¿›å…¥æ­£æ–‡äº†å—¯ã€‚ã€‚ã€‚ï¼‰</p><h2 id="å…¶å®æˆ‘å¯¹åŸç¨‹åºåšäº†ç‚¹æ”¹è¿›ğŸŒš"><a href="#å…¶å®æˆ‘å¯¹åŸç¨‹åºåšäº†ç‚¹æ”¹è¿›ğŸŒš" class="headerlink" title="å…¶å®æˆ‘å¯¹åŸç¨‹åºåšäº†ç‚¹æ”¹è¿›ğŸŒš"></a>å…¶å®æˆ‘å¯¹åŸç¨‹åºåšäº†ç‚¹æ”¹è¿›ğŸŒš</h2><p>åœ¨è¯´æˆ‘æ”¹è¿›äº†ä»€ä¹ˆä¹‹å‰ï¼Œå…ˆç»™å¤§å®¶ç§‘æ™®ä¸€ä¸‹å››å…­çº§å‡†è€ƒè¯å·çš„ç»„æˆå§ï¼</p><h3 id="å››å…­çº§å‡†è€ƒè¯å·çš„ç»„æˆå…ƒç´ "><a href="#å››å…­çº§å‡†è€ƒè¯å·çš„ç»„æˆå…ƒç´ " class="headerlink" title="å››å…­çº§å‡†è€ƒè¯å·çš„ç»„æˆå…ƒç´ "></a>å››å…­çº§å‡†è€ƒè¯å·çš„ç»„æˆå…ƒç´ </h3><p>è¿™ä¸œè¥¿ç™¾åº¦è°·æ­Œéšä¾¿éƒ½æŸ¥çš„åˆ°ï¼Œä¸€å¼ å›¾å¸¦ä½ äº†è§£è‹±è¯­å…­çº§å‡†è€ƒè¯å·ç»„æˆï½</p><p><img src="/images/CET-ID.png" alt="CET-ID"></p><blockquote><p>å…­çº§å‡†è€ƒè¯å·ä¸€å…±ç”±15ä½ç»„æˆï¼š</p></blockquote><ol><li>å‰5ä½æ˜¯å­¦æ ¡ä»£ç </li><li>ç¬¬6ä½æ˜¯å­¦æ ¡çš„æ ¡åŒºä»£ç ã€€å¤§å­¦è‹±è¯­å››å…­çº§è€ƒè¯•é™¢æ ¡è€ƒç‚¹ä»£ç å¤§å…¨(å‰6ä½)</li><li>ç¬¬7-8ä½æ˜¯è€ƒè¯•å¹´ä»½<blockquote><blockquote><p>å¦‚2014å¹´è€ƒè¯•æ­¤å¤„åº”ä¸º14ï¼Œ14ä»£è¡¨2014å¹´ã€‚</p></blockquote></blockquote></li><li>ç¬¬9ä½æ˜¯è¯¥å¹´ä¸­ç¬¬å‡ æ¬¡å››å…­çº§è€ƒè¯•<blockquote><blockquote><p>ä¸ŠåŠå¹´æ˜¯ç¬¬1æ¬¡ï¼Œä¸‹åŠå¹´æ˜¯ç¬¬2æ¬¡ï¼Œé‚£ä¹ˆ2014å¹´12æœˆå°±æ˜¯2ã€‚</p></blockquote></blockquote></li><li>ç¬¬10ä½æ˜¯å››å…­çº§ç±»åˆ«ï¼Œå››çº§æ˜¯1ï¼Œå…­çº§æ˜¯2ã€‚</li><li>ç¬¬11-13ä½æ˜¯è€ƒåœºå·<blockquote><blockquote><p>æ¯”å¦‚ä½ åœ¨100è€ƒåœºçš„ï¼Œé‚£å°±æ˜¯100ï¼Œ14è€ƒåœºçš„å°±æ˜¯014ã€‚</p></blockquote></blockquote></li><li>ç¬¬14-15ä½æ˜¯åº§ä½å·<blockquote><blockquote><p>å¦‚æœä½ æ˜¯01å·åº§ä½ï¼Œé‚£å°±æ˜¯01ï¼Œ29å·å°±æ˜¯29 ã€‚</p></blockquote></blockquote></li></ol><p><code>å­¦æ ¡ä»£ç </code>å’Œ<code>æ ¡åŒºä»£ç </code>æŸ¥ä¸åˆ°çš„ç›´æ¥éšä¾¿é—®ä¸€ä¸ªè‡ªå·±å­¦æ ¡çš„è€ƒå››å…­çº§çš„åŒå­¦é—®ä¸€ä¸‹å°±å¥½äº†ï¼Œé‚£ä¹ˆ<strong>å‰6ä½</strong>å·²ç»å¾—åˆ°äº†ï¼›<strong>7~10ä½</strong>å°±ä¸ç”¨æˆ‘è¯´äº†å§ï¼Œè‡ªå·±æ˜¯<strong>ä»€ä¹ˆæ—¶å€™è€ƒ</strong>çš„<strong>ä»€ä¹ˆè¯•</strong>å¯¹åº”å°±å¥½äº†ã€‚<strong>å‰10ä½</strong>ç¡®å®šå¥½äº†ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ä¸çŸ¥é“çš„å…¶å®å°±åªå‰©ä¸‹<code>è€ƒåœºå·</code>å’Œ<code>åº§ä½å·</code>äº†</p><h3 id="æ”¹è¿›1-æ”¯æŒè‡ªå®šä¹‰è¯•å®¤èŒƒå›´å’Œåº§ä½å·èŒƒå›´ï¼ˆ2018å¹´2æœˆâ€¦å¿˜äº†å…·ä½“å•¥æ—¶å€™äº†å“ˆå“ˆå“ˆï¼‰"><a href="#æ”¹è¿›1-æ”¯æŒè‡ªå®šä¹‰è¯•å®¤èŒƒå›´å’Œåº§ä½å·èŒƒå›´ï¼ˆ2018å¹´2æœˆâ€¦å¿˜äº†å…·ä½“å•¥æ—¶å€™äº†å“ˆå“ˆå“ˆï¼‰" class="headerlink" title="æ”¹è¿›1: æ”¯æŒè‡ªå®šä¹‰è¯•å®¤èŒƒå›´å’Œåº§ä½å·èŒƒå›´ï¼ˆ2018å¹´2æœˆâ€¦å¿˜äº†å…·ä½“å•¥æ—¶å€™äº†å“ˆå“ˆå“ˆï¼‰"></a>æ”¹è¿›1: æ”¯æŒè‡ªå®šä¹‰è¯•å®¤èŒƒå›´å’Œåº§ä½å·èŒƒå›´ï¼ˆ2018å¹´2æœˆâ€¦å¿˜äº†å…·ä½“å•¥æ—¶å€™äº†å“ˆå“ˆå“ˆï¼‰</h3><p>å…¶å®ä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯è‡ªå®šä¹‰åº§ä½å·èŒƒå›´ï¼Œå› ä¸ºæˆ‘æƒ³åˆ°å¾ˆå¤šå­¦æ ¡ä¸€é—´è¯•å®¤éƒ½ä¸ä¼šå99ä¸ªäººã€‚åŸç¨‹åºçš„åº§ä½å·æ˜¯ä» 1 è·‘åˆ° 99 çš„ï¼Œæ²¡æ³•è‡ªå®šä¹‰èŒƒå›´ï¼Œè¿™æ ·çš„è¯å°±ä¼šæµªè´¹å¾ˆå¤šæ—¶é—´å»æŸ¥è¯¢å¾ˆå¤šä¸å­˜åœ¨çš„å‡†è€ƒè¯å·ã€‚</p><p>äºæ˜¯æˆ‘åšäº†ä»¥ä¸‹æ”¹è¿›ï¼š<br>æ—¢ç„¶è¦è‡ªå®šä¹‰åº§ä½å·èŒƒå›´ï¼Œé‚£ä¹ˆå°±è¦æŠŠè¯•å®¤å·å’Œåº§ä½å·æ‹†å¼€äº†ï¼Œäºæ˜¯æˆ‘é¡ºä¾¿æŠŠè‡ªå®šä¹‰è¯•å®¤èŒƒå›´ä¹Ÿæäº†ï¼Œè¿™ä¸ªå¾ˆç®€å•ï¼ŒåŠ ä¸ªforå¾ªç¯ä»¥åŠæ”¹ä¸‹å‡½æ•°å‚æ•°å°±å¥½äº†ã€‚</p><p>åŸä»£ç ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">myid = <span class="string">&quot;ä½ çš„å‡†è€ƒè¯å·å‰10ä½&#123;id:05d&#125;&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">10001</span>):</span><br><span class="line">    query_text =send_query_until_true(num)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æ”¹è¿›åï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">myid = <span class="string">&quot;ä½ çš„å‡†è€ƒè¯å·å‰10ä½&#123;room_id:03d&#125;&#123;seat_id:02d&#125;&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="comment"># è¯•å®¤èŒƒå›´ï¼š1~999ï¼Œè¯•å®¤äººæ•° 1~40</span></span><br><span class="line">    <span class="keyword">for</span> room_num <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">999</span>):</span><br><span class="line">        <span class="keyword">for</span> seat_num <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">40</span>):</span><br><span class="line">            query_text = send_query_until_true(room_num, seat_num)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è®°å¾—æŠŠ<code>send_query_until_true()</code>å‡½æ•°çš„å‚æ•°ä¹Ÿä¿®æ”¹æˆ<code>room_num, seat_num</code></p><h3 id="æ”¹è¿›2-è®©ç¨‹åºé‡åˆ°-Error-ä¸ä¸­æ–­æ‰§è¡Œï¼ˆ2018-08-22-æ›´æ–°ï¼‰"><a href="#æ”¹è¿›2-è®©ç¨‹åºé‡åˆ°-Error-ä¸ä¸­æ–­æ‰§è¡Œï¼ˆ2018-08-22-æ›´æ–°ï¼‰" class="headerlink" title="æ”¹è¿›2: è®©ç¨‹åºé‡åˆ° Error ä¸ä¸­æ–­æ‰§è¡Œï¼ˆ2018-08-22 æ›´æ–°ï¼‰"></a>æ”¹è¿›2: è®©ç¨‹åºé‡åˆ° Error ä¸ä¸­æ–­æ‰§è¡Œï¼ˆ2018-08-22 æ›´æ–°ï¼‰</h3><p><a href="http://www.freebuf.com/author/FlashYo">@FlashYo</a>åœ¨ä»–çš„æ–‡ç« æœ€åè®²è¿‡ï¼Œç¨‹åºåœæ­¢äº†ä¸æ˜¯æŠ¥é”™å°±æ˜¯æŸ¥åˆ°äº†ï¼Œæˆ‘å½“æ—¶å¥½å¥‡ä¼šä»€ä¹ˆæŠ¥é”™å’§ï¼Ÿ</p><p>è·‘äº†ä¸€æ®µæ—¶é—´åç»ˆäºä¸­æ–­äº†ï¼Œçœ‹äº†ä¸€ä¸‹ç»ˆç«¯ä¿¡æ¯ï¼ŒåŸæ¥æ˜¯<code>requests</code>æ¨¡å—æŠ›å‡ºçš„å¼‚å¸¸ã€‚åé¢åˆè¯•äº†å¥½å‡ æ¬¡ä¸­æ–­ï¼Œç„¶åè·‘è‡ªå·±çš„å‡†è€ƒè¯å·æ—¶é‡ä¸Šäº†ç½‘ç»œé«˜å³°æœŸï¼Œå°¤å…¶æ˜¯è¿™æ¸£ç½‘ç»œï¼Œç®€ç›´ç–¯ç‹‚æ–­çº¿ï¼Œä¸å¸¦é‡è¿é‚£ç§ğŸ˜‚ã€‚ç»ˆäºå¿æ— å¯å¿ï¼Œå·èµ·è¢–å­å°±å¼€æ’¸ï¼</p><p>ï¼ˆå’³ï½ä¸èƒ½é‚£ä¹ˆç²—é²ï¼Œè¦æ–‡æ˜ğŸŒšï¼ˆé€ƒï½</p><p>ç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment"># 2018-08-22 æ›´æ–° æ•æ‰ç½‘ç»œå¼‚å¸¸å®ç°ç¨‹åºé‡åˆ° Error ä¸ä¸­æ–­æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:  <span class="comment"># ä¸€ç›´å¾ªç¯ï¼Œç›´åˆ°è®¿é—®ç«™ç‚¹æˆåŠŸ</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># ä»¥ä¸‹exceptéƒ½æ˜¯ç”¨æ¥æ•è·å½“requestsè¯·æ±‚å‡ºç°å¼‚å¸¸æ—¶ï¼Œ</span></span><br><span class="line">            <span class="comment"># é€šè¿‡æ•è·ç„¶åç­‰å¾…ç½‘ç»œæƒ…å†µçš„å˜åŒ–ï¼Œä»¥æ­¤æ¥ä¿æŠ¤ç¨‹åºçš„ä¸é—´æ–­è¿è¡Œ</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ­¤å¤„å†™requestsè¯·æ±‚</span></span><br><span class="line">            ...</span><br><span class="line">            ...æŸ¥è¯¢å‡†è€ƒè¯çš„å‡½æ•°`send_query_until_true(...)`çš„å†…å®¹...</span><br><span class="line">            ...</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> requests.exceptions.ConnectionError:</span><br><span class="line">            log_info(<span class="string">&#x27;Unfortunitely -- ConnectionError Happened, please wait 3 seconds&#x27;</span>)</span><br><span class="line">            time.sleep(<span class="number">3</span>)</span><br><span class="line">        <span class="keyword">except</span> requests.exceptions.ChunkedEncodingError:</span><br><span class="line">            log_info(<span class="string">&#x27;Unfortunitely -- ChunkedEncodingError Happened, please wait 3 seconds&#x27;</span>)</span><br><span class="line">            time.sleep(<span class="number">3</span>)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            log_info(<span class="string">&#x27;Unfortunitely -- An Unknow Error Happened, Please wait 3 seconds&#x27;</span>)</span><br><span class="line">            time.sleep(<span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>Ummâ€¦æˆ‘ä¸€å£æ°”æŠŠæ‰€æœ‰å¼‚å¸¸éƒ½æ•æ‰äº†å“ˆå“ˆå“ˆï¼ï¼ï¼è¿™ä¸ªä»£ç ä¹Ÿå¾ˆç®€å•ï¼Œæ•æ‰åˆ°å¼‚å¸¸å°±ç­‰å¾…3ç§’ï¼Œç„¶åå°è¯•é‡æ–°è·‘ <strong>ä¸Šä¸€ä¸ª</strong> å‡†è€ƒè¯å·ï¼Œæœ‰ç§æ–­çº¿é‡è¿çš„æ•ˆæœã€‚</p><p><code>log_info(*arg)</code>æ˜¯æˆ‘è‡ªå®šä¹‰çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåœ¨ç»ˆç«¯è¾“å‡ºä¿¡æ¯çš„<strong>åŒæ—¶</strong>æŠŠä¿¡æ¯å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿åæœŸæŸ¥çœ‹ï¼ˆå¥½å§ï¼Œå…¶å®æ˜¯é¿å…ç”µè„‘çªç„¶è“å±æˆ–è€…ä»€ä¹ˆåŸå› é‡å¯å¯¼è‡´çš„ç»ˆç«¯è®°å½•ä¸¢å¤±ï¼Œé‚£æˆ‘åˆè¦é‡æ–°è·‘ï¼Œå¤šäºå“¦ï¼ï¼‰ã€‚</p><h2 id="çœŸä¸¶å†™æ”¶è·"><a href="#çœŸä¸¶å†™æ”¶è·" class="headerlink" title="çœŸä¸¶å†™æ”¶è·"></a>çœŸä¸¶å†™æ”¶è·</h2><p>æ—¶é—´é—®é¢˜ï¼Œå…ˆåœ¨æ‰‹æœºä¾¿ç­¾å†™ç€ï¼Œå†™å®Œé©¬ä¸Šè¡¥ä¸Šï¼Œå¤§å®¶ä¸è¦å¤ªæœŸå¾…å“ˆå“ˆå“ˆğŸŒš</p><h1 id="æˆ˜æœ"><a href="#æˆ˜æœ" class="headerlink" title="æˆ˜æœ"></a>æˆ˜æœ</h1><p>å®Œæˆè¿™äº›ä¹‹åï¼Œç»ˆäºèƒ½ <strong>å…¨è‡ªåŠ¨</strong> è·‘äº†ï¼ï¼<strong>å…¨è‡ªåŠ¨ï¼ï¼ï¼</strong></p><p>Oh, Yeahï¼å¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çš„ç¨‹åºçªç„¶ä¸­æ–­äº†ï¼ï¼</p><p>æ˜¨å¤©æ™šä¸Šï¼Œå™¢ä¸ï¼Œä»Šå¤©å‡Œæ™¨ğŸ˜‚3ç‚¹å¤šï¼Œå¸®æˆ‘çš„æœ‹å‹è·‘å‡ºäº†å¥¹çš„å‡†è€ƒè¯å·ï¼Œè·‘äº†å¥½ä¹…å“¦ï¼Œå¥½å‡ ä¸ªå°æ—¶ï¼Œè¿˜å¥½å…¨è‡ªåŠ¨ğŸŒšã€‚ã€‚ã€‚</p><p>å—¯â€¦é¡ºä¾¿åœ¨è¿™é‡Œå†æ¬¡æ­å–œä¸€ä¸‹ä½ è¿‡äº†å…­çº§å§ğŸ‘ğŸ‘ <strong>@å¿µå¿µ</strong> ï¼Œè¢«æˆ‘åŠäº†ä¸€æ‰‹èƒƒå£åˆºæ¿€ä¸ğŸŒšï¼Ÿ</p><p>ï¼ˆä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆä¸æŸ¥è‡ªå·±çš„ï¼Œå› ä¸ºæˆ‘è¿˜æ²¡è€ƒå“ˆå“ˆå“ˆï¼ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®ç”¨ </tag>
            
            <tag> CET </tag>
            
            <tag> python </tag>
            
            <tag> å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NginxåŸŸåè½¬å‘ï¼ˆåå‘ä»£ç†ï¼‰</title>
      <link href="/posts/357640ff.html"/>
      <url>/posts/357640ff.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><blockquote><p>å‚è€ƒï¼š</p><ul><li><a href="https://www.cnblogs.com/linxiong945/p/4182928.html">ã€Nginxã€‘å…³äºåŸŸåè½¬å‘proxy_pass</a></li><li><a href="https://doub.io/wlzy-3/">å¦ä¸€ç§åˆ©ç”¨Nginxåå‘ä»£ç†æ¥ç®€å•é•œåƒ HTTP(S)ç½‘ç«™ çš„æ–¹æ³•</a></li></ul></blockquote><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªè¿™æ ·çš„éœ€æ±‚ï¼šè®¿é—®<code>m.XXX.com</code>çš„æ—¶å€™ï¼Œéœ€è¦å®é™…è®¿é—®<code>www.YYY.com/m</code>ï¼Œå¹¶ä¸”åŸŸåä¸èƒ½å‘ç”Ÿå˜åŒ–ï¼ˆè¿™ç§ä¹Ÿå¯ç§°ä¸ºé•œåƒï¼Ÿï¼‰ã€‚</p><a id="more"></a><p>è¾¾æˆè¿™ä¸ªéœ€æ±‚å¯ä»¥ä½¿ç”¨Nginxï¼Œæœ‰ä¸¤ç§åšæ³•ï¼š</p><ul><li>ç¬¬ä¸€ç§å°±æ˜¯301è·³è½¬ï¼Œä½¿ç”¨rewriteæ¥è·³è½¬åŸŸåï¼Œä¸è¿‡è¿™æ ·åŸŸåå°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¸éœ€æ±‚ä¸ç¬¦ã€‚</li><li>ç¬¬äºŒç§å°±æ˜¯ç”¨proxy_passè·³è½¬ï¼Œåªè¦æŒ‡å®šè·³è½¬ç›®çš„åŸŸåï¼Œå°±å¯ä»¥åœ¨è®¿é—®çš„æ—¶å€™è‡ªåŠ¨è·³è½¬è®¿é—®ç›®çš„åŸŸåï¼Œè€Œä¸”åŸŸåä¹Ÿä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚æ‰€ä»¥è¿™é‡Œéœ€è¦ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ã€‚</li></ul><h2 id="é…ç½®æ–‡ä»¶ç¤ºä¾‹"><a href="#é…ç½®æ–‡ä»¶ç¤ºä¾‹" class="headerlink" title="é…ç½®æ–‡ä»¶ç¤ºä¾‹"></a>é…ç½®æ–‡ä»¶ç¤ºä¾‹</h2><p>ä»¥ä¸‹æ•™ç¨‹ åŸŸåä»¥<code>m.XXX.com</code>ä¸ºä¾‹ï¼Œè¢«é•œåƒç½‘ç«™ä»¥<code>www.YYY.com/m</code>ä¸ºä¾‹</p><p>ç„¶åè®¿é—®ä½ çš„åŸŸåçœ‹ä¸€çœ‹æ˜¯å¦æˆåŠŸé•œåƒï¼Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœè¢«é•œåƒçš„ç½‘ç«™è®¾ç½®äº†<strong>é˜²ç›—é“¾</strong>ï¼Œé‚£ä¹ˆ<strong>é™æ€æ–‡ä»¶(js/css/å›¾ç‰‡)å¯èƒ½æ— æ³•æ˜¾ç¤º</strong>ï¼Œè¿™å°±æ²¡åŠæ³•äº†ã€‚</p><h3 id="å‚æ•°è§£é‡Š"><a href="#å‚æ•°è§£é‡Š" class="headerlink" title="å‚æ•°è§£é‡Š"></a>å‚æ•°è§£é‡Š</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹åªéœ€è¦æ›´æ”¹è¿™å‡ ä¸ªå‚æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server_name ä½ çš„åŸŸå;</span><br><span class="line"> </span><br><span class="line">sub_filter æ¬²è¢«é•œåƒçš„åŸŸå ä½ çš„åŸŸå;</span><br><span class="line"> </span><br><span class="line">proxy_set_header Referer http:<span class="comment">//æ¬²è¢«é•œåƒçš„åŸŸå;</span></span><br><span class="line"> </span><br><span class="line">proxy_set_header Host æ¬²è¢«é•œåƒçš„åŸŸå;</span><br><span class="line"> </span><br><span class="line">proxy_pass http:<span class="comment">//æ¬²è¢«é•œåƒçš„åŸŸå;</span></span><br></pre></td></tr></table></figure><h3 id="å»ºç«‹-Nginx-é…ç½®æ–‡ä»¶"><a href="#å»ºç«‹-Nginx-é…ç½®æ–‡ä»¶" class="headerlink" title="å»ºç«‹ Nginx é…ç½®æ–‡ä»¶"></a>å»ºç«‹ Nginx é…ç½®æ–‡ä»¶</h3><p><strong>é¦–å…ˆ</strong><br>åœ¨<code>/etc/nginx/sites-available/</code>å»ºç«‹ä¸€ä¸ª<code>m.XXX.com.conf</code>é…ç½®æ–‡ä»¶ï¼Œå†…å®¹å‚è€ƒ<a href="#HTTP-%E7%A4%BA%E4%BE%8B">HTTP ç¤ºä¾‹</a>å’Œ<a href="#HTTPS-%E7%A4%BA%E4%BE%8B">HTTPS ç¤ºä¾‹</a>ã€‚</p><h3 id="HTTP-ç¤ºä¾‹"><a href="#HTTP-ç¤ºä¾‹" class="headerlink" title="HTTP ç¤ºä¾‹"></a>HTTP ç¤ºä¾‹</h3><p>ä»¥ä¸‹ç¤ºä¾‹æ˜¯ä»¥<code>Â m.XXX.comÂ </code>é•œåƒ<code>Â www.YYY.com/mÂ </code>ä¸ºä¾‹ã€‚è‡ªè¡Œæ›¿æ¢ å…¶ä¸­çš„å‚æ•°ï¼š</p><p><strong>ç¬¬äºŒæ®µæ˜¯ å±è”½æœç´¢å¼•æ“æ”¶å½•</strong>ï¼Œæ¯”å¦‚é•œåƒè‡ªå·±çš„ç½‘ç«™ï¼Œå¦‚æœä¸å±è”½ä¼šå¯¼è‡´ æ”¶å½•æµå¤±ã€‚</p><blockquote><p>æ³¨æ„ï¼šä¸ç®¡ä½ æ˜¯é•œåƒÂ <strong><a href="http://www.baidu.com/">www.baidu.com</a></strong>Â è¿˜æ˜¯Â <strong><a href="http://www.google.com.hk/">www.google.com.hk</a></strong>Â ï¼ˆä¸è¦ç›´æ¥ä½¿ç”¨ .com ä¼šè¢«è°·æ­Œè‡ªåŠ¨æ ¹æ®VPSæ‰€åœ¨åœ°åŒºé‡å®šå‘çš„ï¼‰ï¼Œä»–ä»¬ä¸¤ä¸ªç›®å‰éƒ½æ˜¯å¼ºåˆ¶é‡å®šå‘åˆ° https ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ åªé…ç½®äº† http åå‘ä»£ç†ï¼Œé‚£ä¹ˆè®¿é—®åå‘ä»£ç†åŸŸååä¼šé‡å®šå‘åˆ° https çš„ç›®æ ‡åŸŸåï¼Œæ‰€ä»¥ä½ ä¹Ÿ<strong>å¿…é¡»é…ç½® https æ‰è¡Œã€‚</strong></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># ä¸‹é¢è¿™æ®µä»£ç æ‰æ˜¯ HTTP å®Œæ•´ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼Œæ³¨æ„ä½¿ç”¨æ—¶ä¿®æ”¹é‡Œé¢çš„é»˜è®¤åŸŸåç­‰ä¿¡æ¯ã€‚</span><br><span class="line">server &#123;</span><br><span class="line">        listen <span class="number">80</span>;</span><br><span class="line">        server_name m.XXX.com;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> ($http_user_agent ~* (baiduspider|<span class="number">360</span>spider|haosouspider|googlebot|soso|bing|sogou|yahoo|sohu-search|yodao|YoudaoBot|robozilla|msnbot|MJ12bot|NHN|Twiceler)) &#123;</span><br><span class="line">          <span class="keyword">return</span>  <span class="number">403</span>;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        location / &#123;</span><br><span class="line">          sub_filter www.YYY.com m.XXX.com;</span><br><span class="line">          sub_filter_once off;</span><br><span class="line">          proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">          proxy_set_header Referer http:<span class="comment">//www.YYY.com;</span></span><br><span class="line">          proxy_set_header Host www.YYY.com;</span><br><span class="line">          proxy_pass http:<span class="comment">//www.YYY.com/m;</span></span><br><span class="line">          proxy_set_header Accept-Encoding <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="HTTPS-ç¤ºä¾‹"><a href="#HTTPS-ç¤ºä¾‹" class="headerlink" title="HTTPS ç¤ºä¾‹"></a>HTTPS ç¤ºä¾‹</h3><p>å½“ä½ è¦é•œåƒçš„ç½‘ç«™ä¸å¼€æ”¾ HTTP æˆ–è€… å¼ºåˆ¶HTTPS çš„æ—¶å€™ï¼Œä½ å°±éœ€è¦åŠ ä¸Š SSL æ¥è½¬æˆ HTTPS äº†ã€‚</p><p>å‡è®¾SSLè¯ä¹¦æ–‡ä»¶ä½ç½®æ˜¯ï¼š**/root/ssl.crt**</p><p>å‡è®¾SSLå¯†åŒ™æ–‡ä»¶ä½ç½®æ˜¯ï¼š**/root/ssl.key**</p><p><strong>ç¬¬äºŒæ®µçš„ 301 ä»£ç </strong>æ˜¯ï¼Œå¼ºåˆ¶èµ°HTTPSï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥å»æ‰ã€‚</p><p><strong>ç¬¬ä¸‰æ®µæ˜¯ å±è”½æœç´¢å¼•æ“æ”¶å½•</strong>ï¼Œæ¯”å¦‚é•œåƒè‡ªå·±çš„ç½‘ç«™ï¼Œå¦‚æœä¸å±è”½ä¼šå¯¼è‡´ æ”¶å½•æµå¤±ã€‚</p><p>åŒæ—¶ä¸‹é¢è¿™ä¸¤ä¸ªé€‰é¡¹çš„è®°å¾—æŠŠ<code>http://</code>æ”¹æˆ<code>https://</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxy_set_header Referer https:<span class="comment">//www.YYY.com;</span></span><br><span class="line">proxy_pass https:<span class="comment">//www.YYY.com/m;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># ä¸‹é¢è¿™æ®µä»£ç æ‰æ˜¯ HTTPS å®Œæ•´ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼Œæ³¨æ„ä½¿ç”¨æ—¶ä¿®æ”¹é‡Œé¢çš„é»˜è®¤åŸŸåç­‰ä¿¡æ¯ã€‚</span><br><span class="line">server</span><br><span class="line">    &#123;</span><br><span class="line">        listen <span class="number">80</span>;</span><br><span class="line">        listen <span class="number">443</span> ssl;</span><br><span class="line">        ssl on;</span><br><span class="line">        ssl_certificate /root/ssl.crt;</span><br><span class="line">        ssl_certificate_key /root/ssl.key;</span><br><span class="line">        ssl_session_cache shared:SSL:<span class="number">10</span>m;</span><br><span class="line">        ssl_session_timeout  <span class="number">10</span>m;</span><br><span class="line">        server_name m.XXX.com;</span><br><span class="line">        add_header Strict-Transport-Security <span class="string">&quot;max-age=31536000&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> ( $scheme = http )&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">301</span> https:<span class="comment">//$server_name$request_uri;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> ($http_user_agent ~* (baiduspider|<span class="number">360</span>spider|haosouspider|googlebot|soso|bing|sogou|yahoo|sohu-search|yodao|YoudaoBot|robozilla|msnbot|MJ12bot|NHN|Twiceler)) &#123;</span><br><span class="line">          <span class="keyword">return</span>  <span class="number">403</span>;</span><br><span class="line">        &#125;</span><br><span class="line">  </span><br><span class="line">        location / &#123;</span><br><span class="line">          sub_filter www.YYY.com m.XXX.com;</span><br><span class="line">          sub_filter_once off;</span><br><span class="line">          proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">          proxy_set_header Referer http:<span class="comment">//www.YYY.com;</span></span><br><span class="line">          proxy_set_header Host www.YYY.com;</span><br><span class="line">          proxy_pass http:<span class="comment">//www.YYY.com/m;</span></span><br><span class="line">          proxy_set_header Accept-Encoding <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ol><li><p>è‹¥æ˜¯è½¬å‘çš„åœ°å€å«äºŒçº§ç›®å½•å¦‚ï¼š<code>www.YYY.com/m</code>ï¼Œåªéœ€è¦æŠŠ<code>proxy_pass</code>å€¼ä¿®æ”¹ä¸ºå…·ä½“åœ°å€å³å¯ï¼Œè‹¥æ˜¯ä¸è¡Œåˆ™å°†<code>proxy_set_header</code>å€¼ä¹Ÿä¿®æ”¹ä¸ºå…·ä½“åœ°å€ã€‚</p></li><li><p>è‹¥æ˜¯ä½ è¾“å…¥çš„åœ°å€ä¸­è¦æœ‰äºŒçº§ç›®å½•å¦‚<code>m.XXX.com/tools/a</code>ï¼Œåˆ™<code>location</code>æ¨¡å—è¦æ”¹ä¸ºï¼š </p><pre><code class="js">location /tools/a &#123;      // ...  &#125;</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> æœåŠ¡å™¨ </tag>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³iframeè·¨åŸŸé«˜åº¦è‡ªé€‚åº”é—®é¢˜</title>
      <link href="/posts/a29672a0.html"/>
      <url>/posts/a29672a0.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>æˆ‘åœ¨å‰é¢å†™åšæ–‡çš„æ—¶å€™ï¼Œæœ‰é‡åˆ°ä¸€æ¬¡éœ€è¦åµŒå¥—åˆ«äººçš„ç½‘é¡µæ¥åšé¢„è§ˆï¼Œæˆ‘æƒ³åˆ°äº†ç”¨iframeæ ‡ç­¾ï¼Œç»“æœå‘ç°æ ¹æœ¬æ²¡æ³•è‡ªé€‚åº”é«˜åº¦ï¼Ÿï¼Ÿï¼ï¼ä»€ä¹ˆç©æ„ï¼Œå¼ºè¿«ç—‡çš„æˆ‘åˆèµ°ä¸Šäº†å¡«å‘ä¹‹è·¯ã€‚å¯¹ï¼Œä½ æ²¡çœ‹é”™ï¼Œåˆã€‚ã€‚ã€‚ã€‚</p><a id="more"></a><h1 id="iframeè‡ªé€‚åº”é«˜åº¦"><a href="#iframeè‡ªé€‚åº”é«˜åº¦" class="headerlink" title="iframeè‡ªé€‚åº”é«˜åº¦"></a>iframeè‡ªé€‚åº”é«˜åº¦</h1><blockquote><p>å‚è€ƒï¼š<a href="http://www.manongjc.com/article/946.html">å®Œç¾è§£å†³Iframeé«˜åº¦è‡ªé€‚åº”ï¼ˆå…¼å®¹æ€§å¥½å¹¶ä¸”æ”¯æŒè·¨åŸŸï¼‰</a></p></blockquote><p>ç»è¿‡ä¸€ç•ªæœç´¢ï¼Œç»ˆäºæ‰¾åˆ°äº†è‡ªé€‚åº”é«˜åº¦çš„æ–¹æ³•ã€‚<br>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript"> <span class="function"><span class="keyword">function</span> <span class="title">SetCwinHeight</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> iframeid=<span class="built_in">document</span>.getElementById(<span class="string">&quot;iframeid&quot;</span>); <span class="comment">//iframe id</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">if</span> (<span class="built_in">document</span>.getElementById)&#123;</span></span><br><span class="line"><span class="javascript">   <span class="keyword">if</span> (iframeid &amp;&amp; !<span class="built_in">window</span>.opera)&#123;</span></span><br><span class="line">    if (iframeid.contentDocument &amp;&amp; iframeid.contentDocument.body.offsetHeight)&#123;</span><br><span class="line">     iframeid.height = iframeid.contentDocument.body.offsetHeight;</span><br><span class="line"><span class="javascript">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(iframeid.Document &amp;&amp; iframeid.Document.body.scrollHeight)&#123;</span></span><br><span class="line">     iframeid.height = iframeid.Document.body.scrollHeight;</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">id</span>=<span class="string">&quot;iframeid&quot;</span> <span class="attr">onload</span>=<span class="string">&quot;Javascript:SetCwinHeight()&quot;</span> <span class="attr">height</span>=<span class="string">&quot;1&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span> <span class="attr">src</span>=<span class="string">&quot;www.xxx.com&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åã€‚ã€‚ã€‚ç„¶åã€‚ã€‚ã€‚æ²¡æœ‰ç„¶åï¼Œä¸€ç‚¹ååº”éƒ½æ²¡æœ‰ï¼Ÿï¼Ÿï¼ï¼ä»€ä¹ˆä¸œè¥¿ï¼Ÿï¼Ÿæˆ‘ç›´è§‰å‘Šè¯‰æˆ‘å¾ˆå¿«å°±èƒ½æå®šäº†ï¼Œäºæ˜¯æˆ‘ç»§ç»­å¡«ï¼ˆwaï¼‰å‘ã€‚</p><h1 id="è§£å†³è·¨åŸŸé—®é¢˜"><a href="#è§£å†³è·¨åŸŸé—®é¢˜" class="headerlink" title="è§£å†³è·¨åŸŸé—®é¢˜"></a>è§£å†³è·¨åŸŸé—®é¢˜</h1><p>åŸæ¥ã€‚ã€‚ã€‚æ˜¯ js çš„è·¨åŸŸé—®é¢˜åœ¨æé¬¼ï¼ˆå¥½å§ï¼Œæˆ‘æ‰¿è®¤æˆ‘ä¸»å­¦çš„ä¸æ˜¯å‰ç«¯ğŸ˜‚ï¼‰</p><p>è·¨åŸŸçš„è§£å†³æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæˆ‘ç”¨çš„æ˜¯<code>document.domain</code>+<code>NginxåŸŸåè½¬å‘</code>çš„æ–¹æ³•ï¼Œæ¯”è¾ƒå·æ‡’å—¯ğŸ˜‚ã€‚</p><p>è¿™ç§æ–¹æ³•åªé€‚ç”¨äºåœ¨è‡ªå·±åšå®¢ä¸Šæ’å…¥iframeçš„æƒ…å†µï¼Œè€Œä¸”éœ€è¦åšå®¢åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå’Œæ‹¥æœ‰è‡ªå·±çš„åŸŸåã€‚</p><p>åºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘å…ˆè¯´ä¸€ä¸‹<code>NginxåŸŸåè½¬å‘</code>ã€‚</p><h2 id="NginxåŸŸåè½¬å‘"><a href="#NginxåŸŸåè½¬å‘" class="headerlink" title="NginxåŸŸåè½¬å‘"></a>NginxåŸŸåè½¬å‘</h2><p><strong><font color='red'>20180823æ›´æ–°ï¼šæœ¬èŠ‚å†…å®¹å·²è½¬ç§»åˆ°<a href="./357640ff.html">NginxåŸŸåè½¬å‘ï¼ˆåå‘ä»£ç†ï¼‰</a></font></strong></p><h2 id="document-domain"><a href="#document-domain" class="headerlink" title="document.domain"></a>document.domain</h2><blockquote><p>å‚è€ƒï¼š</p><ul><li><a href="https://www.zhangxinxu.com/wordpress/2010/12/%E5%B0%8Ftip%EF%BC%9Aiframe%E9%AB%98%E5%BA%A6%E5%8A%A8%E6%80%81%E8%87%AA%E9%80%82%E5%BA%94/">å°tipï¼šiframeé«˜åº¦åŠ¨æ€è‡ªé€‚åº”</a></li><li><a href="https://segmentfault.com/a/1190000000702539">æ–°æ‰‹å­¦è·¨åŸŸä¹‹iframe</a></li></ul></blockquote><p>æŠŠ iframe ä¸­<code>src</code>çš„ç½‘å€è½¬å‘åˆ°è‡ªå·±çš„åŸŸååå°±å¯ä»¥ç”¨<code>document.domain</code>è§£å†³è·¨åŸŸé—®é¢˜å•¦ï¼</p><p><code>document.domain</code>æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„è·¨åŸŸæ–¹æ³•ã€‚å®ç°æœ€ç®€å•ä½†åªèƒ½ç”¨äºåŒä¸€ä¸ªä¸»åŸŸä¸‹ä¸åŒå­åŸŸä¹‹é—´çš„è·¨åŸŸè¯·æ±‚ï¼Œæ¯”å¦‚Â <strong>foo.com</strong>å’ŒÂ <strong>img.foo.com</strong>Â ä¹‹é—´ï¼Œ<strong>img1.foo.com</strong>Â å’ŒÂ <strong>img2.foo.com</strong>Â ä¹‹é—´ã€‚åªè¦æŠŠä¸¤ä¸ªé¡µé¢çš„<code>document.domain</code>éƒ½æŒ‡å‘ä¸»åŸŸå°±å¯ä»¥äº†ï¼Œæ¯”å¦‚<code>document.domain=&#39;foo.com&#39;;</code>ã€‚<br>è®¾ç½®å¥½åçˆ¶é¡µé¢å’Œå­é¡µé¢å°±å¯ä»¥åƒåŒä¸€ä¸ªåŸŸä¸‹ä¸¤ä¸ªé¡µé¢ä¹‹é—´è®¿é—®äº†ã€‚çˆ¶é¡µé¢é€šè¿‡<code>ifr.contentWindow</code>å°±å¯ä»¥è®¿é—®å­é¡µé¢çš„windowï¼Œå­é¡µé¢é€šè¿‡<code>parent.window</code>æˆ–<code>parent</code>è®¿é—®çˆ¶é¡µé¢çš„windowï¼Œæ¥ä¸‹æ¥å¯ä»¥è¿›ä¸€æ­¥è·å–domå’Œjsã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- foo.com/a.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">&quot;ifr&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://img.foo.com/b.html&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"> <span class="built_in">document</span>.domain = <span class="string">&#x27;foo.com&#x27;</span>;</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">aa</span>(<span class="params">str</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(str);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#ifr&#x27;</span>).contentWindow.bb(<span class="string">&#x27;aaa&#x27;</span>);</span></span><br><span class="line">&#125; <span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- img.foo.com/b.html --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"> <span class="built_in">document</span>.domain = <span class="string">&#x27;foo.com&#x27;</span>;</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">bb</span>(<span class="params">str</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(str);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">parent.aa(<span class="string">&#x27;bbb&#x27;</span>); </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><strong>ä¸‹é¢æ˜¯æˆ‘ä¿®æ”¹åçš„ä»£ç ï¼š</strong></p><p><strong><font color='red'>my.js</font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SetCwinHeight</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.domain=<span class="string">&#x27;www.abc.com&#x27;</span></span><br><span class="line">    <span class="keyword">var</span> iframeid = <span class="built_in">document</span>.getElementById(id); <span class="comment">//iframe id</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.getElementById) &#123;</span><br><span class="line">        <span class="keyword">if</span> (iframeid &amp;&amp; !<span class="built_in">window</span>.opera) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;iframeid:&quot;</span> + iframeid.contentDocument);</span><br><span class="line">            <span class="keyword">if</span> (iframeid.contentDocument &amp;&amp; iframeid.contentDocument.body.offsetHeight) &#123;</span><br><span class="line">                iframeid.height = iframeid.contentDocument.body.offsetHeight + <span class="number">50</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (iframeid.Document &amp;&amp; iframeid.Document.body.scrollHeight) &#123;</span><br><span class="line">                frameid.height = iframeid.Document.body.scrollHeight + <span class="number">50</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><font color='red'>xxx.md</font></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/my.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">id</span>=<span class="string">&quot;iframe_id&quot;</span> <span class="attr">name</span>=<span class="string">&quot;iframe_id&quot;</span> <span class="attr">onload</span>=<span class="string">&quot;Javascript:SetCwinHeight(this.id)&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;auto&quot;</span> <span class="attr">height</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://www.abc.com/tools/a/&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>ç‰¹åˆ«è¯´æ˜ï¼š</strong><br>åœ¨è¿™é‡Œæˆ‘è¯´ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦åˆ†å¼€å†™ï¼Œå› ä¸ºæˆ‘å‘ç°ä¸åˆ†å¼€å†™æ²¡æ³•æ­£å¸¸åŠ è½½jsğŸ˜‚ã€‚</p><p>åƒä¸‹é¢è¿™ç§ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">SetCwinHeight</span>(<span class="params">id</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.domain=<span class="string">&#x27;www.abc.com&#x27;</span></span></span><br><span class="line"><span class="javascript">   <span class="keyword">var</span> iframeid = <span class="built_in">document</span>.getElementById(id); <span class="comment">//iframe id</span></span></span><br><span class="line"><span class="javascript">   <span class="keyword">if</span> (<span class="built_in">document</span>.getElementById) &#123;</span></span><br><span class="line"><span class="javascript">       <span class="keyword">if</span> (iframeid &amp;&amp; !<span class="built_in">window</span>.opera) &#123;</span></span><br><span class="line"><span class="javascript">           <span class="built_in">console</span>.log(<span class="string">&quot;iframeid:&quot;</span> + iframeid.contentDocument);</span></span><br><span class="line">           if (iframeid.contentDocument &amp;&amp; iframeid.contentDocument.body.offsetHeight) &#123;</span><br><span class="line">               iframeid.height = iframeid.contentDocument.body.offsetHeight + 50;</span><br><span class="line"><span class="javascript">           &#125; <span class="keyword">else</span> <span class="keyword">if</span> (iframeid.Document &amp;&amp; iframeid.Document.body.scrollHeight) &#123;</span></span><br><span class="line">               frameid.height = iframeid.Document.body.scrollHeight + 50;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">id</span>=<span class="string">&quot;iframe_id&quot;</span> <span class="attr">name</span>=<span class="string">&quot;iframe_id&quot;</span> <span class="attr">onload</span>=<span class="string">&quot;Javascript:SetCwinHeight(this.id)&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;auto&quot;</span> <span class="attr">height</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://www.abc.com/tools/a/&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆèµ·æ¥å†™ç„¶åæ’å…¥åˆ° Markdown é‡Œé¢è²Œä¼¼ hexo æ¸²æŸ“å js æ€»æœ‰é—®é¢˜ï¼Œä¸çŸ¥æ˜¯ä¸æ˜¯ä¸»é¢˜åŸå› ï¼Œæˆ‘çœ‹è¿‡æœ‰ä¸€ä¸ª Next ä¸»é¢˜çš„åŠ è½½æ­£å¸¸ï¼Œè’™é€¼ã€‚ã€‚</p><p>å‡ºç°çš„é—®é¢˜å¦‚ä¸‹å›¾ï¼š<br><img src="/images/cross-domain-error.png" alt="cross-domain-erro"></p><p>ç›¸ä¿¡å¤§å®¶éƒ½çœ‹å‡ºæ¥äº†ï¼Œjsä»£ç ä¹±æ‰äº†ğŸ˜‚.</p><p>æˆ‘è‡ªå·±ä¹Ÿæ‰¾è¿‡ä¸€äº›èµ„æ–™ï¼Œå…¶ä¸­ä¸ä¹è¯•è¿‡<a href="https://www.v2ex.com/t/162951#r_1717560">https://www.v2ex.com/t/162951#r_1717560</a>è¯´çš„ä½¿ç”¨<a href="https://hexo.io/zh-cn/docs/tag-plugins.html#Raw">Rawæ ‡ç­¾æ’ä»¶</a>ï¼Œä½†æ˜¯æ²¡æœ‰ç”¨ã€‚ã€‚ã€‚</p><p>å¦‚æœæœ‰äººçŸ¥é“æ˜¯ä»€ä¹ˆåŸå› çš„è¯ï¼Œè¯·å‘Šè¯‰æˆ‘ä¸€å£°è°¢è°¢ï¼ï¼ˆåœ¨ä¸‹æ–¹è¯„è®ºå³å¯ï¼ŒPMæˆ‘ä¹Ÿå¯ä»¥ï¼‰</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Webå‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Webå‰ç«¯ </tag>
            
            <tag> iframe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨èå‡ ä¸ªèƒ½è‡ªåŠ¨è½¬æ¢ç²˜è´´å†…å®¹ä¸ºMarkdownçš„å·¥å…·</title>
      <link href="/posts/48ffa897.html"/>
      <url>/posts/48ffa897.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>ä»Šå¤©åœ¨è½¬è½½å‡ ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œçœ‹åˆ°åˆ«äººçš„åšæ–‡å†™çš„ä¸é”™ï¼Œæƒ³è¦è½¬è½½åˆ°è‡ªå·±åšå®¢é‡Œã€‚<br>ä½†æ˜¯ç”±äºæˆ‘ä»¬æ˜¯è‡ªå·±æ­å»ºçš„åšå®¢ï¼Œå‘è¡¨çš„æ–‡ç« éƒ½æ˜¯ä»¥æºç æ–¹å¼ç¼–è¾‘çš„ï¼Œæ²¡æ³•ä¸€é”®è½¬è½½ã€‚</p><a id="more"></a><p>äºæ˜¯æˆ‘å°±æƒ³åˆ°å¤åˆ¶ç²˜è´´çš„æ—¶å€™èƒ½ä¸èƒ½è‡ªåŠ¨è½¬æ¢ç²˜è´´å†…å®¹ä¸ºMarkdownå‘¢ï¼Ÿ<br>ï¼ˆå…¶å®è¿˜æ˜¯<a href="http://wdbaoge.com/2015/12/09/%E9%9A%8F%E7%AC%94-2015-12-09-hexo-%E5%8D%9A%E5%AE%A2%E8%BD%AC%E8%BD%BD/">hexo åšå®¢ç¥é€Ÿè½¬è½½</a>è¿™ç¯‡æ–‡ç« ç»™æˆ‘çš„å¯å‘ï¼‰</p><p>ä¸€å¼€å§‹æˆ‘æ˜¯åœ¨è¯•ç”¨ä¸ºçŸ¥çš„ä¸€ä¸ªæ’ä»¶é¢„è§ˆ<a href="https://github.com/akof1314/Wiz.Editor.md">Wiz.Editor.md</a></p><blockquote><p>é¢„è§ˆåœ°å€ï¼š<a href="http://akof1314.github.io/Wiz.Editor.md/">http://akof1314.github.io/Wiz.Editor.md/</a></p></blockquote><p>åæ¥å‘ç°ç”¨ç€ç”¨ç€æ„Ÿè§‰æœ‰ç‚¹é—®é¢˜ï¼Œè§‰å¾—å¾ˆä¸çˆ½ï¼Œå¼ƒç”¨ã€‚<br>ç´§æ¥ç€æˆ‘è„‘å­ä¸€çƒ­å°±æƒ³è‡ªå·±å†™ä¸€ä¸ªã€‚ã€‚ã€‚ï¼ˆå¥½å§ï¼Œæœ€è¿‘é¡¹ç›®æ¯”è¾ƒå¤šï¼Œè¿™ä¸ªå¾—æç½®ä¸€æ®µæ—¶é—´äº†ï¼‰<br>äºæ˜¯å»githubä¸Šæ‰¾äº†ä¸€ä¸‹ï¼Œä¸è´Ÿæ‰€æœ›ï¼Œè¿™ç±»å·¥å…·è¿˜æ˜¯æœ‰çš„ï¼</p><h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>è¿™å‡ ä¸ªå·¥å…·åŸºæœ¬éƒ½æœ‰åœ¨çº¿é¢„è§ˆï¼Œä½¿ç”¨çš„æ—¶å€™ç›´æ¥é¢„è§ˆå°±å¥½äº†ï¼Œå¦‚æœè‡ªå·±éœ€è¦æ•´åˆæºç è¿›è‡ªå·±é¡¹ç›®çš„è¯ï¼Œå°±å»ä¸‹æºç å§ï¼</p><h2 id="2MD"><a href="#2MD" class="headerlink" title="2MD"></a><a href="https://github.com/phodal/2md">2MD</a></h2><blockquote><p><strong>æ¨èæŒ‡æ•°ï¼š<font color='red'>â˜†â˜†â˜†â˜†â˜†</font></strong><br>æºç ï¼š<a href="https://github.com/phodal/2md">https://github.com/phodal/2md</a><br>åŸæ–‡ï¼š<a href="http://www.sohu.com/a/134631771_385076">http://www.sohu.com/a/134631771_385076</a><br>é¢„è§ˆåœ°å€ï¼š[<a href="https://phodal.github.io/2md%1C](https://phodal.github.io/2md%1C)">https://phodal.github.io/2md](https://phodal.github.io/2md)</a></p></blockquote><p>æˆ‘åŠ äº†ä¸ªiframeæä¾›ç»™å¤§å®¶ç›´æ¥é¢„è§ˆï¼š</p><p><strong><font color='red'>20180822æ›´æ–°ï¼š</font></strong><br><strong><font color='red'>æ³¨æ„ï¼ï¼ï¼æ‰‹æœºç‰ˆç›®æµ‹æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œå…·ä½“è¡¨ç°ä¸ºæ— æ³•ç²˜è´´ï¼Œè‹¥æƒ³æœ‰å®Œç¾ä½“éªŒï¼Œè¯·è½¬ç§»åˆ°ç”µè„‘ç«¯ä½¿ç”¨ã€‚ä¸è¿‡ï¼Œæˆ‘åªåœ¨æˆ‘çš„é­…æ—MX4 Proä¸Šæµ‹è¯•è¿‡ï¼ˆç©·å­©å­æ²¡å…¶ä»–æ‰‹æœºäº†ğŸ˜‚ï¼‰ï¼Œå¦‚æœæœ‰æœºå‹æˆåŠŸç²˜è´´äº†ï¼Œå¯åœ¨ä¸‹æ–¹è¯„è®ºå‘Šè¯‰æˆ‘ğŸ˜‚</font></strong></p><script type="text/javascript" src="../js/my.js"></script><iframe width="100%" id="iframe_2MD" name="iframe_2MD" onload="Javascript:SetCwinHeight(this.id)" scrolling="auto" height="650" frameborder="0" src="https://reb.mallotec.com/tools/2md/"></iframe><blockquote><p>å¤©å“ªï¼ç»ˆäºè§£å†³è·¨åŸŸè‡ªé€‚åº”é«˜åº¦é—®é¢˜äº†ğŸ˜‚</p></blockquote><h2 id="clipboard2markdown"><a href="#clipboard2markdown" class="headerlink" title="clipboard2markdown"></a><a href="https://github.com/euangoddard/clipboard2markdown">clipboard2markdown</a></h2><blockquote><p><strong>æ¨èæŒ‡æ•°ï¼š<font color='red'>â˜†â˜†â˜†â˜†</font>ï¼ˆå› ä¸ºæ“ä½œæ²¡æœ‰2MDå’Œç•Œé¢å¥½ï¼Œæ‰€ä»¥å°±ä½ä¸€æ˜Ÿï¼‰</strong><br>æºç ï¼š<a href="https://github.com/euangoddard/clipboard2markdown">https://github.com/euangoddard/clipboard2markdown</a><br>é¢„è§ˆåœ°å€ï¼š<a href="http://euangoddard.github.io/clipboard2markdown/">http://euangoddard.github.io/clipboard2markdown/</a></p></blockquote><p><strong><font color='red'>20180822æ›´æ–°ï¼š</font></strong><br><strong><font color='red'>æ³¨æ„ï¼ï¼ï¼å’Œä¸Šé¢çš„æƒ…å†µä¸€æ ·ï¼Œæ‰‹æœºç‰ˆç›®æµ‹æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œå…·ä½“è¡¨ç°ä¸ºæ— æ³•ç²˜è´´ï¼Œè‹¥æƒ³æœ‰å®Œç¾ä½“éªŒï¼Œè¯·è½¬ç§»åˆ°ç”µè„‘ç«¯ä½¿ç”¨ã€‚ä¸è¿‡ï¼Œæˆ‘åªåœ¨æˆ‘çš„é­…æ—MX4 Proä¸Šæµ‹è¯•è¿‡ï¼ˆç©·å­©å­æ²¡å…¶ä»–æ‰‹æœºäº†ğŸ˜‚ï¼‰ï¼Œå¦‚æœæœ‰æœºå‹æˆåŠŸç²˜è´´äº†ï¼Œå¯åœ¨ä¸‹æ–¹è¯„è®ºå‘Šè¯‰æˆ‘ğŸ˜‚</font></strong></p><p><a href="http://euangoddard.github.io/clipboard2markdown/"><img src="/images//tools/clipboard2markdown-preview.png" alt="clipboard2markdown-preview"></a></p><blockquote><p>å’³ï½è¿™ä¸ªâ€¦å› ä¸ºé¢„è§ˆåœ°å€æ˜¯httpçš„ï¼Œiframeåœ¨Chromeä¼šç›´æ¥ç©ºç™½ï¼Œæ‰€ä»¥æ¢ä¸Šé¢„è§ˆå›¾ã€‚ã€‚ã€‚ã€‚ç‚¹å‡»é¢„è§ˆå›¾å¯ç›´æ¥è·³è½¬åˆ°é¢„è§ˆé¡µé¢å“¦ğŸŒšï¼</p></blockquote><h2 id="paste-as-markdown"><a href="#paste-as-markdown" class="headerlink" title="paste-as-markdown"></a>paste-as-markdown</h2><blockquote><p><strong>æ¨èæŒ‡æ•°ï¼šUmmâ€¦æ²¡æœ‰é¢„è§ˆæˆ‘æ‡’å¾—ä¸‹äº†ï¼Œæ²¡æœ‰æŒ‡æ•°æ²¡æœ‰é¢„è§ˆå“ˆå“ˆå“ˆï¼</strong><br>æºç ï¼š<a href="https://github.com/letiantian/paste-as-markdown">https://github.com/letiantian/paste-as-markdown</a><br>åŸæ–‡ï¼š<a href="https://my.oschina.net/letiantian/blog/754905">https://my.oschina.net/letiantian/blog/754905</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Disqus APIç§‘å­¦è¯„è®ºå¤§æ³•</title>
      <link href="/posts/d32fb564.html"/>
      <url>/posts/d32fb564.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>Disqus ä¸ç”¨è¯´ï¼Œå¤§å®¶éƒ½çŸ¥é“ä»–çš„ä¸»åŸŸå<code>disqus.com</code>åœ¨å›½å†…è¢«å±è”½äº†ï¼Œå¯¼è‡´åœ¨å›½å†…ä¸èƒ½è¯„è®ºä¹Ÿä¸èƒ½çœ‹è¯„è®ºï¼Œä½“éªŒååˆ†ä¸å¥½ã€‚çœ‹äº†ä¸€ä¸‹ Disqus å®˜æ–¹å‘ç°æœ‰ä¸ª API åä»£åŠ é€Ÿè®¿é—®çš„ç”¨æ³•ï¼Œäºæ˜¯å»æ‰¾äº†ç›¸å…³èµ„æ–™ï¼ŒåŸæœ¬æƒ³è‡ªå·±é€ è½®å­ï¼Œåæ¥å‘ç°å·²ç»æœ‰ç°æˆçš„ï¼Œæˆ‘å°±å…ˆæ‹¿æ¥ç”¨ç€å§ã€‚</p><a id="more"></a><h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><p>æˆ‘ä»¬å¯ä»¥æ¥çœ‹çœ‹disqusåå‘ä»£ç†çš„åŸç†å›¾ï¼š<br><img src="/images/disqus-api-diagram.png" alt="disqus-api-diagra"></p><p>æ•´ä½“æµç¨‹æ˜¯è¿™æ ·çš„ï¼Œåœ¨å‰ç«¯é¡µé¢ä¸Šæµ‹è¯•disqusåŠ è½½æ˜¯å¦æˆåŠŸï¼Œå¦‚æœæˆåŠŸåˆ™æ˜¾ç¤ºdisqusçš„è¯„è®ºæ¡†ï¼Œåä¹‹åŠ è½½ç‹¬ç«‹çš„è¯„è®ºæ¡†ï¼Œå¹¶å°†è¯·æ±‚å‘é€ç»™è‡ªå·±åœ¨å›½å¤–çš„vpsï¼Œåˆ©ç”¨vpsåšåå‘ä»£ç†ï¼Œæ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚åˆ°disqusæœåŠ¡å™¨å¹¶å†è½¬å‘ç»™å®¢æˆ·ç«¯ã€‚</p><p>ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼šå®¢æˆ·ç«¯å‘é€è¯·æ±‚ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨é€šè¿‡Disqus Apiæäº¤è¯„è®ºã€‚</p><h1 id="å·¥å…·ä»‹ç»"><a href="#å·¥å…·ä»‹ç»" class="headerlink" title="å·¥å…·ä»‹ç»"></a>å·¥å…·ä»‹ç»</h1><p><strong>ç›®å‰ç°æˆçš„disqusåä»£ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š</strong></p><ul><li><p><a href="https://github.com/ciqulover/disqus-proxy">disqus-proxy</a> <font color='gray'>â€“NodeJSå®ç°</font><br><img src="/images/disqus-proxy.png" alt="disqus-proxy"></p></li><li><p><a href="https://github.com/fooleap/disqus-php-api">disqus-php-api</a> <font color='gray'>â€“PHPå®ç°</font><br><img src="/images/disqus-php-api.gif" alt="disqus-php-api"></p></li></ul><p>ä¸Šè¿°ä¸¤ç§æ–¹æ¡ˆå‡æ”¯æŒæ ¹æ®ç½‘ç»œæƒ…å†µåˆ¤æ–­åŠ è½½ç®€æ˜“/åŸç‰ˆè¯„è®ºæ¡†ï¼Œçœ‹å®ŒUIåæˆ‘å¾ˆæœæ–­çš„é€‰æ‹©äº†<code>disqus-php-api</code>â€¦â€¦</p><p>ä»¥ä¸‹ä¸ºæ›¿æ¢ä¸º<code>disqus-php-api</code>çš„å…·ä½“æ­¥éª¤ï¼Œä¾›å¤§å®¶å‚è€ƒï¼Œä¹Ÿç»™è‡ªå·±ç•™ä¸‹ä¸€ä¸ªè®°å½•ã€‚</p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><ul><li>ä¸€å°å›½å¤–çš„VPSæœåŠ¡å™¨<h2 id="åç«¯é…ç½®"><a href="#åç«¯é…ç½®" class="headerlink" title="åç«¯é…ç½®"></a>åç«¯é…ç½®</h2></li></ul><h3 id="è·å–-disqus-php-api"><a href="#è·å–-disqus-php-api" class="headerlink" title="è·å– disqus-php-api"></a>è·å– <code>disqus-php-api</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/fooleap/disqus-php-api.git</span><br></pre></td></tr></table></figure><h3 id="ç§»åŠ¨å¹¶é‡å‘½å"><a href="#ç§»åŠ¨å¹¶é‡å‘½å" class="headerlink" title="ç§»åŠ¨å¹¶é‡å‘½å"></a>ç§»åŠ¨å¹¶é‡å‘½å</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv -r disqus-php-api /path/to/disqus-php-api</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„ï¼š</strong><br>æ­¤å¤„å»ºè®®æ–°å»ºä¸€ä¸ª Nginx ç«™ç‚¹ï¼Œå¦‚ï¼šapi.xxx.comè¿™ç±»ï¼Œä¸“é—¨æ”¾ API çš„åœ°æ–¹ï¼Œæ³¨æ„DNSè§£ææ·»åŠ Aè®°å½•å’Œå†™å¥½ Nginx é…ç½®ï¼Œå°¤å…¶æ˜¯è¦é…ç½®SSLè¯ä¹¦ã€‚</p></blockquote><h3 id="ä¿®æ”¹-config-php"><a href="#ä¿®æ”¹-config-php" class="headerlink" title="ä¿®æ”¹ config.php"></a>ä¿®æ”¹ <code>config.php</code></h3><p>æ ¹æ® <code>disqus-php-api/api/config.php</code> ä¸­çš„æ³¨é‡Šä¿®æ”¹ç›¸åº”é…ç½®ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">&#x27;DISQUS_PUBKEY&#x27;</span>, <span class="string">&#x27;E8Uh5l5fHZ6gD8U3KycjAIAk46f68Zw7C6eW8WSjZvCLXebZ7p0r1yrYDrLilk2F&#x27;</span>);</span><br><span class="line">define(<span class="string">&#x27;PUBLIC_KEY&#x27;</span>, <span class="string">&#x27;your-public-key&#x27;</span>);</span><br><span class="line">define(<span class="string">&#x27;SECRET_KEY&#x27;</span>, <span class="string">&#x27;your-secret-key&#x27;</span>);</span><br><span class="line">define(<span class="string">&#x27;DISQUS_USERNAME&#x27;</span>, <span class="string">&#x27;your-disqus-username&#x27;</span>);</span><br><span class="line">define(<span class="string">&#x27;DISQUS_EMAIL&#x27;</span>, <span class="string">&#x27;your-email@gmail.com&#x27;</span>);</span><br><span class="line">define(<span class="string">&#x27;DISQUS_PASSWORD&#x27;</span>, <span class="string">&#x27;your-disqus-password&#x27;</span>);</span><br><span class="line">define(<span class="string">&#x27;DISQUS_WEBSITE&#x27;</span>, <span class="string">&#x27;https:/\/your-website.com&#x27;</span>);  <span class="comment">// å®é™…ä½¿ç”¨æ—¶è¦å»æ‰é“¾æ¥çš„ \ ï¼Œè¿™é‡Œæ˜¯ä¸ºäº†é¿å…mdç›´æ¥å§åŒæ–œæ è§£ææˆæ³¨é‡Šäº†</span></span><br><span class="line">define(<span class="string">&#x27;DISQUS_SHORTNAME&#x27;</span>, <span class="string">&#x27;your-disqus-shortname&#x27;</span>);</span><br><span class="line">define(<span class="string">&#x27;DISQUS_APPROVED&#x27;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure><blockquote><p><strong>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œ<code>DISQUS_WEBSITE</code>é€‰é¡¹ä¸­ï¼ŒåŸŸå<font color='orange'>ä¸èƒ½</font>è¿™æ ·å†™ï¼šâ€˜<a style="underline: none">https://reb.mallotec.com/</a>â€˜ï¼ŒåŸŸååä¸èƒ½ä»¥â€™/â€˜ç»“å°¾ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸€ç›´åˆ›å»º<code>Thread</code>çš„æƒ…å†µ</strong></p></blockquote><h2 id="å‰ç«¯é…ç½®"><a href="#å‰ç«¯é…ç½®" class="headerlink" title="å‰ç«¯é…ç½®"></a>å‰ç«¯é…ç½®</h2><h3 id="disqus-php-apié›†æˆè‡³hexo"><a href="#disqus-php-apié›†æˆè‡³hexo" class="headerlink" title="disqus-php-apié›†æˆè‡³hexo"></a>disqus-php-apié›†æˆè‡³hexo</h3><p><strong>ä¿®æ”¹ hexo çš„ä¸»é¢˜é…ç½®æ–‡ä»¶</strong><br>åœ¨<code>ä¸»é¢˜é…ç½®</code>æ–‡ä»¶<code>_config.yml</code>ä¸­æ·»åŠ  disqusapi ç›¸å…³å‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">disqusapi:</span><br><span class="line">  forum: <span class="string">&#x27;your-short-name&#x27;</span></span><br><span class="line">  site: <span class="string">&#x27;https://your-site&#x27;</span></span><br><span class="line">  api: <span class="string">&#x27;https://your-site/.../disqus-php-api/api&#x27;</span></span><br><span class="line">  mode: <span class="number">1</span></span><br><span class="line">  badge: <span class="string">&#x27;åšä¸»&#x27;</span></span><br><span class="line">  timeout: <span class="number">3000</span></span><br></pre></td></tr></table></figure><blockquote><p>å‚æ•°å‚è€ƒæ–‡æ¡£ï¼š<a href="https://github.com/fooleap/disqus-php-api/blob/master/readme.md">https://github.com/fooleap/disqus-php-api/blob/master/readme.md</a></p></blockquote><ul><li>forumï¼šDisqus formçš„shortname</li><li>siteï¼šç½‘ç«™åŸŸå</li><li>apiï¼šPHPä»£ç éƒ¨ç½²çš„ç½‘å€ï¼š<a href="https://yoursite.com/disqus/api">https://yoursite.com/disqus/api</a></li><li>modeï¼š<ul><li>1 æ£€æµ‹èƒ½å¦è®¿é—® Disqusï¼Œè‹¥èƒ½åˆ™åŠ è½½ Disqus åŸç”Ÿè¯„è®ºæ¡†ï¼Œè¶…æ—¶åˆ™åŠ è½½ç®€æ˜“è¯„è®ºæ¡†</li><li>2 ä»…åŠ è½½ç®€æ˜“è¯„è®ºæ¡†</li><li>3 åŒæ—¶åŠ è½½ä¸¤ç§è¯„è®ºæ¡†ï¼Œå…ˆæ˜¾ç¤ºç®€æ˜“è¯„è®ºæ¡†ï¼ŒDisqus åŠ è½½å®Œæˆåˆ™åˆ‡æ¢è‡³ Disqus è¯„è®ºæ¡†</li></ul></li><li>badgeï¼šç®¡ç†å‘˜å¾½ç« æ–‡æœ¬</li><li>timeoutï¼šå½“modeä¸º1æ—¶çš„è¶…æ—¶æ—¶é—´</li></ul><h3 id="æ·»åŠ -disqusapi-æ¨¡å—"><a href="#æ·»åŠ -disqusapi-æ¨¡å—" class="headerlink" title="æ·»åŠ  disqusapi æ¨¡å—"></a>æ·»åŠ  disqusapi æ¨¡å—</h3><p>Materialä¸»é¢˜çš„ disqusapi æ¨¡å—æ·»åŠ å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£çš„<a href="https://material.viosey.com/docs/#/dev_comment">è¯„è®ºç³»ç»Ÿé€‚é…æŒ‡å—</a>ã€‚<br>ç›´æ¥æ‹·è´ä¸€ä»½å®˜æ–¹æä¾›çš„ disqus è¯„è®ºæ¨¡å—åˆ°<code>&lt;ä¸»é¢˜æ ¹ç›®å½•&gt;/layout/_widget/comment/disqusapi/</code>ä¸‹ã€‚ä¸‹é¢æ˜¯<code>common.ejs</code>ã€<code>enter.ejs</code>ã€<code>main.ejs</code>çš„å…·ä½“ä»£ç ï¼š</p><ul><li><p>common.ejs</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨ DISQUS js ä»£ç  --&gt;</span></span><br></pre></td></tr></table></figure><p>  common.ejsä¸ºç©º</p></li><li><p>enter.ejs</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨ DISQUS --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span>(<span class="attr">page.comments</span>) &#123;%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/disqus-php-api-dist/iDisqus.min.css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/disqus-php-api-dist/iDisqus.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;comment&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>(&#x27;<span class="attr">_widget</span>/<span class="attr">comment</span>/&#x27; + <span class="attr">theme.comment.use</span> + &#x27;/<span class="attr">main</span>&#x27;) %&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#comment</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#eee</span>;</span></span><br><span class="line">        padding: 2pc;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br></pre></td></tr></table></figure><blockquote><ul><li><code>page.comments</code>æ˜¯ä¸ºäº†æ§åˆ¶æ¯ä¸€ç¯‡æ–‡ç« æ˜¯å¦éœ€è¦å¼€å¯è¯„è®ºåŠŸèƒ½ï¼Œéœ€è¦åœ¨æ¯ä¸€ç¯‡æ–‡ç« çš„<code>Front-matter</code>ä¸­è®¾ç½®<code>comments=&#123;Boolean&#125;</code></li><li>å¦‚æœæœåŠ¡å™¨å¾ˆè¿œï¼Œè¿æ¥æ¯”è¾ƒæ…¢ï¼Œå»ºè®®æŠŠ<code>iDisqus.min.css</code>å’Œ<code>iDisqus.min.js</code>æ”¾åˆ°<code>ä¸»é¢˜ç›®å½•</code>çš„<code>source</code>é‡Œä¼šæ›´æ–¹ä¾¿ï¼Œæ¸²æŸ“è°ƒè¯•çš„æ—¶å€™ç›´æ¥ä»æœ¬åœ°åŠ è½½ï¼Œä¸ç„¶è°ƒè¯•çš„æ—¶å€™ä»ç½‘ç»œåŠ è½½åŠå¹´ç½‘é¡µéƒ½æ²¡åŠ è½½å®Œã€‚å½“ç„¶ï¼Œæ”¾åˆ°äº†CDNé‚£æ›´å¥½ï¼Œæ­¤å¤„ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿<code>hexo s</code>è°ƒè¯•ã€‚</li></ul></blockquote></li><li><p>main.ejs</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> emojiList = [&#123;</span></span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;smile&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;ç¬‘è„¸&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f604&#x27;</span></span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;mask&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;ç”Ÿç—…&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f637&#x27;</span></span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;joy&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;ç ´æ¶•ä¸ºç¬‘&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f602&#x27;</span></span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;stuck_out_tongue_closed_eyes&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;åèˆŒ&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f61d&#x27;</span></span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;flushed&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;è„¸çº¢&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f633&#x27;</span></span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;scream&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;ææƒ§&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f631&#x27;</span></span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;pensive&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;å¤±æœ›&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f614&#x27;</span></span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;unamused&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;æ— è¯­&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f612&#x27;</span></span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;grin&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;éœ²é½¿ç¬‘&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f601&#x27;</span></span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;heart_eyes&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;è‰²&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f60d&#x27;</span></span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;sweat&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;æ±—&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f613&#x27;</span></span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line"><span class="javascript">            code:<span class="string">&#x27;smirk&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            title:<span class="string">&#x27;å¾—æ„&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            unicode:<span class="string">&#x27;1f60f&#x27;</span></span></span><br><span class="line">        &#125;];</span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> disq = <span class="keyword">new</span> iDisqus(<span class="string">&#x27;comment&#x27;</span>, &#123;</span></span><br><span class="line"><span class="javascript">            forum: <span class="string">&#x27;&lt;%= theme.disqusapi.forum %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            site: <span class="string">&#x27;&lt;%= theme.disqusapi.site %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            api: <span class="string">&#x27;&lt;%= theme.disqusapi.api %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            mode: <span class="string">&#x27;&lt;%= theme.disqusapi.mode %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            badge: <span class="string">&#x27;&lt;%= theme.disqusapi.badge %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            timeout: <span class="string">&#x27;&lt;%= theme.disqusapi.timeout %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            init: <span class="literal">true</span>,</span></span><br><span class="line">            emoji_list: emojiList</span><br><span class="line">        &#125;);</span><br><span class="line">        disq.count();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€åç¼–è¾‘<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ä¸­çš„<code>comment</code>æ¨¡å—å¼€å¯<code>disqusapi</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">comment:</span><br><span class="line">    use: disqusapi</span><br></pre></td></tr></table></figure><h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><h2 id="1-æ²¡æœ‰æƒé™"><a href="#1-æ²¡æœ‰æƒé™" class="headerlink" title="1.æ²¡æœ‰æƒé™"></a>1.æ²¡æœ‰æƒé™</h2><blockquote><p>å‚è€ƒï¼š</p><ul><li><a href="https://blog.fooleap.org/disqus-php-api.html#comment-3954303091">https://blog.fooleap.org/disqus-php-api.html#comment-3954303091</a></li><li><a href="https://blog.csdn.net/Axela30W/article/details/78981749">LinuxæŸ¥çœ‹ã€ä¿®æ”¹æ–‡ä»¶è¯»å†™æƒé™</a></li></ul></blockquote><p>é—®é¢˜å¦‚å›¾ï¼š<br><img src="/images/disqus-php-api-no-permission.png" alt="disqus-php-api-no-permission"></p><p>æ®ä½œè€… fooleap æ‰€è¯´ï¼Œæ˜¾ç¤ºæ²¡æœ‰æƒé™çš„è¯ï¼Œå°±æ˜¯æ²¡æœ‰æƒé™åœ¨å½“å‰ç›®å½•åˆ›å»ºæ–‡ä»¶å¤¹ã€‚<br>äºæ˜¯æˆ‘ä¿®æ”¹äº† api æ‰€åœ¨ç›®å½•çš„æƒé™å°±å¥½äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R <span class="variable">$USER</span>:<span class="variable">$USER</span> path/to/disqus-php-api</span><br><span class="line">sudo chmod -R 777 path/to/disqus-php-api</span><br></pre></td></tr></table></figure><h2 id="2-ç”±äºdisqusæ²¡æœ‰æœ¬é¡µé¢çš„é¡¹ç®¡threadï¼Œæ•…éœ€å…ˆåˆ›å»ºthread"><a href="#2-ç”±äºdisqusæ²¡æœ‰æœ¬é¡µé¢çš„é¡¹ç®¡threadï¼Œæ•…éœ€å…ˆåˆ›å»ºthread" class="headerlink" title="2.ç”±äºdisqusæ²¡æœ‰æœ¬é¡µé¢çš„é¡¹ç®¡threadï¼Œæ•…éœ€å…ˆåˆ›å»ºthread"></a>2.ç”±äºdisqusæ²¡æœ‰æœ¬é¡µé¢çš„é¡¹ç®¡threadï¼Œæ•…éœ€å…ˆåˆ›å»ºthread</h2><blockquote><p>å‚è€ƒï¼š<a href="https://blog.fooleap.org/disqus-php-api.html#comment-3829428059">https://blog.fooleap.org/disqus-php-api.html#comment-3829428059</a></p></blockquote><p>æ®ä½œè€… fooleap æ‰€è¯´ï¼ŒåŠ è½½è¯„è®ºæ¡†çš„é¡µé¢ï¼Œè‹¥åœ¨ Disqus æ²¡æœ‰ç›¸å…³çš„ threadï¼Œæ˜¯å¿…é¡»å…ˆæ‰‹åŠ¨åˆ›å»ºçš„ï¼Œä¸è®¾ç½®æˆè‡ªåŠ¨æ˜¯é¿å…ç”Ÿæˆæ— ç”¨çš„ threadã€‚è‹¥æƒ³è‡ªåŠ¨åˆ›å»ºå¯ä»¥åœ¨<code>é…ç½®å‚æ•°</code>é‡Œæ·»åŠ <code>autoCreate: true</code>ã€‚</p><ul><li>è¿˜æœ‰ä¸€ç§è§£å†³æ–¹æ³•<strong>ï¼ˆæ¨èï¼‰</strong>ï¼š<br>å¦‚æœå‡ºç°åˆ›å»º<code>thread</code>çš„é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ <code>mode</code>é€‰æ‹©<code>1</code>ï¼Œå†ç¿»å¢™è®¿é—®ä½ çš„æ–‡ç« é¡µé¢ï¼Œè¿™æ—¶å€™åŠ è½½åŸç”ŸDisqusè¯„è®ºç³»ç»Ÿï¼Œ<code>thread</code>å°±åˆ›å»ºæˆåŠŸäº†ã€‚</li><li><strong>ç‰¹åˆ«è¦æ³¨æ„çš„æ˜¯ï¼š</strong>å¦‚æœä½ çš„æ–‡ç« æ ‡é¢˜ä¸­å¸¦æœ‰ä¸­æ–‡ï¼Œä¼šæ— æ³•åˆ›å»ºthreadï¼Œæ‰€ä»¥ä¸è¦ä½¿ç”¨ä¸­æ–‡å‘½åæ–‡ç« ã€‚</li></ul><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><blockquote><ul><li><a href="https://www.jianshu.com/p/9cc4cc8628c9">è§£å†³Hexoåšå®¢ä¸­ Disqus åœ¨å›½å†…ä¸èƒ½è®¿é—®çš„æ–¹æ¡ˆ</a></li><li><a href="https://www.jianshu.com/p/2671b28b79e5">HexoæŠ˜è…¾è®°ä¹‹ç§‘å­¦ä½¿ç”¨Disqusä¸Nextçš„é›†æˆ</a></li><li><a href="https://mou.science/2017/05/22/disqus-php-api/">disqus-php-api ç§‘å­¦è¯„è®º</a></li><li><a href="https://blog.fooleap.org/use-disqus-correctly.html#note-3">ç§‘å­¦ä½¿ç”¨ Disqus</a></li><li><a href="https://blog.kuroy.me/using-disqus-reverse-proxy-hexo-fexo-theme/">ä¸ºHexoä¸»é¢˜fexoæ·»åŠ disqusåä»£</a></li><li><a href="http://smk17.cn/posts/104/">ã€–åŸåˆ›ã€—åŸºäºdisqus-php-apiåœ¨Hexoåšå®¢ä¸­ä½¿ç”¨Disqus</a></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> Disqus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ‹è¯•ä¸“é¡µ</title>
      <link href="/posts/b84ba97.html"/>
      <url>/posts/b84ba97.html</url>
      
        <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">æµ‹è¯•çš„è‹±æ–‡ï¼Ÿï¼ˆå…¨å°å†™ï¼‰</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="a01d060086b15defd2d752aaca71776cb7125832980bb6e3ef8c16b401056737">9eb34fd69087ff307617da2521d9974231465798995628390a18386e66803264483992b232fbcaa2ecf2634c50828290ac2bfe47d39643dc93ab0613ca19daeb8e46350c33d7c086a8801ba33a78a4a22d0ec0d9f06b4a7f67effab48ad5d0a18900af16d40dcb9f2c051e6644857ba388a4e85cb079794d82995a810f3a9c720de8cd9a287ab85641c89253a8dc6a0491f2ea627a0d4dd648e05047a88e4482ac5ba28ef47b719fa3866409ac4b32a696893278ac6c437135eb56e25a14cdc9a5040f7afd8bfdf59ae0b65567faa4591f0af5aaa86e3ba78452e0176a4c704efdc5208c2c0511c2ed85fe560b544f68e777a0b893dfb72023162955fc7c68c70fc5adf169075f4fb78f90198738453109390c89a8f009fb65dc07a6a7c35ebc1e52a3e864571404fb59389d75c899c1ea1e0cece1da1727d0c5fc4dc546162183bd1a9ef177e509360969963bf187e1c12019f1c197e5d5ac49e0f6f82f194e4f5220432ff660d6d15a740a970e2836e682b24f840f722e4076ef6cbf4becc4253f30cb6c3368d2c5acb9e0d59c4c223977d28c28e21e4f872a5ef9fbc0ed0d23fe13afbbb0ca9a8590f31c8054b2212d8240bd02ddd58d2f03272da2cb0e948042d9702953736f4fe044cd947cd300358c7be6f6e0ceb5f76f113bc9621793b70b18d3becbabd94148ae5b3f68834de568bb8b2e18575bf1f23ac49aca655e7a8fb1f2eae133662c0b193191afe4b4d68cab138340853519590df6c27efa37618349c78bbb56537087650a383a441a8469f62b596768168290c50c2746d5ff7a0597c91328d36ce1547ff3e46bacb1ebe2915793e73cdea91014c26d081f82297c80a0b3b95513f13da8bc9e0e56636ac5ce9775a02ddef6f33f07c3b1766327d927670e62072cffc5a9f936675e0c98ceee0246124a88d0b01f2952f82d2defc3a0eb4535b7a66df66e4106d252cf36d36bc0262fb6ca9e206449373d33713711f9604d8009d87334528c38950c845686b56fa5f7289db412bdca9ec8a15e3df5f36343db3183ef86264ebe144bd77fa4348272baa62afe55664e19d3b83c4dfcea5be49b8d1bd423c5b2ba1402471180afedd2b538881edc732ad818d4497825153500504999232dd1c35213f2fd72fe6d7c043ef9e4cf97fec31960f164746e94ea0fc0d843f3fc3e93b62f16ab843cfb38909466a45697f413623fa06a767ce38952be2df0647790d98542663afbf9cae4059c8bb6dd1586cf0c2225e1cf351f18656697506e38729832d687d49c67ec2cfdbe72e9bd2775eeb7cc7bb41422a981a970f2beb8ec775d4d14d928d1a8fe3cdefa640904c62a02722581372ca3d2086da0c3b6a2904ade5c618f8fb196e8fbbd8f1d5a25b1dede0cac163de3b9b91ba14a76a6fdb919bddefd2914b226d3ebe9d4c2b064a649d76b15556348077d9945e1de4d435ad69122e0910545ccda7cc07f9ebb97ee9bb62731e1654819cbe33e108b2e0c86ee20f75292e2fce37a5eb1e8edbbead378f739c6ef6b68a977f606e8a7f678f7266f0bf9b47c1d28ca77808d1ef62a09ca3e7893563afe99d50ac4ae4db59d4df8f3ddce98c12eacebb027257216f69790b209c31ff4c9d2b7ac668e370b07d003a4b75a5d65878657c46ebe333ceb8595507446b785df5c2479d6ffd9438b7f8a878e0ec42f98abeee5c27ecf202deebf7905d250c6421f4e4b4d75283a99b56cd3b181460810e899fd3b9384b73d11a5468d0882963deac8373267ae46369e39b433bb2b93332a61f01ef60d2f3d92d9ba51d8408052bcab889a410b0c00c1ae45c4fbe84438e3eb38e0a3f9cd43b3d42e725417b9813da4cc74d6c61cb6073b4db30b49140ea29e272423a832dcb1ad404db2eee3e1b4f96dbfdadae5af6b2d17da8f7fecb939b8796d8ccdc293a6552f41fb2f16fdaa22021cda470b06bd7c0d8b026b65048f6f2a2ca7d670084f1194cc81db2de1ba47c29ed5ac2e43be9969471c485db40830074807c820787253b452080327e35246ffc0eba92c54f2b2d21201ad9b59591e695bac54a6432bf9d160ce7ae2f3d628f818cdd667686fd5803ae77c01eff694df4ac45330c2fb82c539874afde55e6017cd78f751366036cce725a4fdc6add2c512d685585c58d20d54932ef69c82d17894d4d510b14381a1a8b6e4906c6ad42e0b2daed71aae6e4beba9454a2516bafd81bc0e536b05053c7cced3bc4fc208edc3420c1145af2910c2de9d53bd0425607a44654fb4b22744a2f60df2526707d361cdda12898b1577e444c67710e3e1050c57ad0e9f0f1dfb100d5c9c7e6f242d20b10ab3130d43703f504063bc187d2d316080bad793f4b9f79577f8fc478a215895a6d513b16a228e086a51cc72d8f942cc8e2a7ac70b6e8435e50f26dc2b72e4a303948e66d4cea7807399</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexoæ·»åŠ Disqusè¯„è®º</title>
      <link href="/posts/2cb4e595.html"/>
      <url>/posts/2cb4e595.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å›½å†…çš„è¯„è®ºç³»ç»Ÿç•…è¨€éƒ½éœ€è¦ICPå¤‡æ¡ˆï¼Œåƒæˆ‘è¿™ç§æ‰“æ­»ä¸å¤‡æ¡ˆçš„äººæ¥è¯´ï¼Œå›½å†…çš„è¯„è®ºç³»ç»Ÿå°±ç”¨ä¸äº†äº†ã€‚æœ€ç»ˆå†³å®šåšå®¢ä½¿ç”¨çš„æ˜¯å›½å¤–çš„ <strong>Disqus</strong> è¯„è®ºç³»ç»Ÿï¼Œä½†ä»–çš„ä¸»åŸŸå<code>disqus.com</code>åœ¨å›½å†…è¢«å±è”½äº†ï¼Œåªèƒ½ç§‘å­¦ä¸Šç½‘åä½¿ç”¨ã€‚</p><p>æœç„¶æœ‰ç©ºè¿˜æ˜¯è‡ªå·±é€ è½®å­çˆ½ä¸€ç‚¹ï¼Œé€ƒï½</p><a id="more"></a><h1 id="é…ç½®-Disqus"><a href="#é…ç½®-Disqus" class="headerlink" title="é…ç½® Disqus"></a>é…ç½® Disqus</h1><p>Disquså®˜ç½‘ï¼š<a href="https://disqus.com/">https://disqus.com</a><br>æ‰“å¼€é“¾æ¥åï¼Œ å¯ä»¥ç›´æ¥ç”¨Facebookï¼ŒTwitterä»¥åŠ Google ç™»å½•ï¼Œä¹Ÿå¯ä»¥ç”¨é‚®ç®±æ³¨å†Œåç™»å½•ã€‚</p><h2 id="é€‰æ‹©åˆ›å»ºç›®çš„"><a href="#é€‰æ‹©åˆ›å»ºç›®çš„" class="headerlink" title="é€‰æ‹©åˆ›å»ºç›®çš„"></a>é€‰æ‹©åˆ›å»ºç›®çš„</h2><p>ç™»å½•åï¼Œç‚¹å‡»é¦–é¡µçš„GET STARTED æŒ‰é’®ï¼Œç„¶åç‚¹å‡»å›¾ç¤ºæŒ‰é’®ï¼š<br><img src="/images/disqus-step1-intent.png" alt="disqus-step1-intent"></p><h2 id="åˆ›å»ºä¸€ä¸ªæ–°ç«™ç‚¹"><a href="#åˆ›å»ºä¸€ä¸ªæ–°ç«™ç‚¹" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°ç«™ç‚¹"></a>åˆ›å»ºä¸€ä¸ªæ–°ç«™ç‚¹</h2><p><img src="/images/disqus-step2-newsite.png" alt="disqus-step2-newsite"></p><ul><li>Website Name å¡«çš„æ˜¯<code>shortname</code>ï¼Œåˆ°æ—¶å€™è¦å¡«åˆ°<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ä¸­</li><li>Category é€‰æ‹©ç§ç±»ï¼Œæˆ‘é€‰çš„æ˜¯ <code>Tech</code></li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="Select-Plan"><a href="#Select-Plan" class="headerlink" title="Select Plan"></a>Select Plan</h3><p>æ¥ä¸‹æ¥ä½ ä¼šçœ‹åˆ°ä»¥ä¸‹é¡µé¢ï¼š<br><img src="/images/disqus-step3-choose-plan.png" alt="disqus-step3-choose-plan"><br>è¿™ä¸€æ­¥ä¸éœ€è¦é€‰è®¡åˆ’ï¼Œè·³è¿‡<code>Select Plan</code>ï¼Œç›´æ¥åˆ°<code>Install Disqus</code>ã€‚</p><h3 id="Install-Disqus"><a href="#Install-Disqus" class="headerlink" title="Install Disqus"></a>Install Disqus</h3><h4 id="Select-Platform"><a href="#Select-Platform" class="headerlink" title="Select Platform"></a>Select Platform</h4><p><img src="/images/disqus-step4-choose-platform.png" alt="disqus-step4-choose-platform"><br>Hexo ä¸å±äºä»¥ä¸Šä»»ä½•å½¢å¼ï¼Œå› æ­¤é€‰æ‹©<code>Universal Code</code>(é€šç”¨ä»£ç )ã€‚</p><h4 id="Install-Instructions"><a href="#Install-Instructions" class="headerlink" title="Install Instructions"></a>Install Instructions</h4><p><img src="/images/disqus-step5-universalcode-install.png" alt="disqus-step5-universalcode-instal"><br>ç„¶åæ‹‰åˆ°æœ€ä¸‹é¢é€‰æ‹©<code>Configure</code></p><h3 id="Configure-Disqus"><a href="#Configure-Disqus" class="headerlink" title="Configure Disqus"></a>Configure Disqus</h3><p><img src="/images/disqus-step6-configure.png" alt="disqus-step6-configure"></p><ul><li>Website Name ä¸€èˆ¬å°±åˆšåˆšç¬¬ä¸€æ­¥å¡«çš„<code>short name</code>ï¼ˆæˆ‘åˆšåˆšå¡«äº† justtestmeï¼Œåˆ°è¿™æ­¥çš„æ—¶å€™ä¸€èˆ¬ä¼šè‡ªåŠ¨å¡«å……ï¼‰</li><li>Website URL å¡«å†™ä½ çš„åšå®¢åœ°å€</li></ul><p>å¡«å®Œä¿¡æ¯åç‚¹å‡»<code>Complete Setup</code>å®Œæˆé…ç½®ã€‚</p><h1 id="é…ç½®-Hexo"><a href="#é…ç½®-Hexo" class="headerlink" title="é…ç½® Hexo"></a>é…ç½® Hexo</h1><p>åœ¨<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ä¸­æ‰¾åˆ°<code>comment</code>é¡¹ï¼š<br>ï¼ˆä»¥ Material ä¸»é¢˜ä¸ºä¾‹ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Comment Systems</span></span><br><span class="line"><span class="comment"># Available value of &quot;use&quot;:</span></span><br><span class="line"><span class="comment">#     disqus | disqus_click | changyan | 163gentie</span></span><br><span class="line">comment:</span><br><span class="line">    use: disqus_click</span><br><span class="line">    shortname: justtestme <span class="comment"># duoshuo or disqus shortname</span></span><br></pre></td></tr></table></figure><ul><li><strong>use</strong>ï¼šé€‰æ‹©<code>disqus</code>æˆ–<code>disqus_click</code>ï¼Œä¸¤è€…å·®åˆ«è¯·å‚é˜…<a href="https://material.viosey.com/docs/">Materialä¸»é¢˜æ–‡æ¡£</a></li><li><strong>shortname</strong>ï¼šå¡«å†™ä½ åˆšåˆšåœ¨ Disqus è®¾ç½®çš„ Website Nameï¼Œè‹±æ–‡å†’å·åç©ºæ ¼ã€‚ï¼ˆä¸¥æ ¼æ„ä¹‰ä¸Šæ˜¯å¡«ç«™ç‚¹é…ç½®é¢æ¿ä¸­çš„ Shortname ï¼‰</li></ul><h1 id="éƒ¨ç½²åº”ç”¨"><a href="#éƒ¨ç½²åº”ç”¨" class="headerlink" title="éƒ¨ç½²åº”ç”¨"></a>éƒ¨ç½²åº”ç”¨</h1><p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æäº¤åˆ°æœåŠ¡å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>ç§‘å­¦ä¸Šç½‘åï¼Œä»»æ„æ‰“å¼€ä¸€ç¯‡ä½ çš„åšæ–‡å°±èƒ½è¯„è®ºäº†ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åœ¨<a href="https://justtestme.disqus.com/admin/settings/general/">https://justtestme.disqus.com/admin/settings/general/</a>é¡µé¢ç®¡ç† Your Sitesï¼ˆ justtestme æ¢æˆè‡ªå·±çš„ shortname ï¼‰ã€‚</p><p>æ­¤å¤„çš„ Shortname å’Œ Websit Name æ˜¯å¯ä»¥ä¸åŒçš„ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="/images/disqus-configure-differentname-short-website.png" alt="disqus-configure-differentname-short-website"></p><blockquote><p><strong>æ³¨æ„ï¼š</strong><code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>ä¸­<code>comment</code>é¡¹å¡«çš„æ˜¯æ­¤å¤„çš„ <font color='red'><strong>Shortname</strong></font> è€Œä¸æ˜¯ Website Nameï¼ï¼</p></blockquote><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://www.jianshu.com/p/d68de067ea74">Hexoæ­å»ºåšå®¢ç³»åˆ—ï¼šï¼ˆå…­ï¼‰Hexoæ·»åŠ Disqusè¯„è®º</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> Disqus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macä½¿ç”¨brewå®‰è£…çš„MySQLç‰ˆæœ¬åˆ‡æ¢</title>
      <link href="/posts/a96dbfbe.html"/>
      <url>/posts/a96dbfbe.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><blockquote><p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/f1a5a680b464">https://www.jianshu.com/p/f1a5a680b464</a></p></blockquote><p><font color='red'><strong>â˜†â˜†20180801æ›´æ–°ï¼šé€šè¿‡æµ‹è¯•å‘ç°ç›´æ¥ä½¿ç”¨<code>brew services start mysql@5.6</code>å³å¯åˆ‡æ¢è‡³5.6ç‰ˆæœ¬ä½¿ç”¨ï¼Œä¸éœ€è¦<code>brew unlink</code>ï¼Œæ˜¯å¦å¯ç”¨è¯·è‡ªè¡Œæµ‹è¯•ï¼Œæµ‹è¯•å‰è¯·å¤‡ä»½å¥½æ•°æ®ï¼ï¼â˜†â˜†</strong></font></p><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ä»Šå¤©å› ä¸ºè¦å†™JavaEEå¤§ä½œä¸šè¿è¡Œäº†ä¸€éé˜Ÿå‹å‘è¿‡æ¥çš„é¡¹ç›®ï¼Œå´æ— æ³•æ­£å¸¸è¿è¡Œã€‚ç»è¿‡ä¸€ç•ªè¿½è¸ªï¼Œå‘ç°æ˜¯MySQLç‰ˆæœ¬ä¸å¯¹çš„é—®é¢˜ï¼Œé¡¹ç›®ä½¿ç”¨çš„MySQLç‰ˆæœ¬æ˜¯5.6ï¼ˆä»ä½¿ç”¨çš„JDBCé©±åŠ¨å°±å¯ä»¥çœ‹å‡ºæ¥ï¼‰ã€‚æœ¬æ¥æƒ³ç€æ›´æ–°JDBCé©±åŠ¨å°±å¯ä»¥è§£å†³ï¼Œå´å‘ç°Hibernateä¹Ÿè¦æ›´æ–°ï¼Œè¿˜ä¸æ¸…æ¥šHibernateæ”¯ä¸æ”¯æŒ8.0çš„MySQLï¼Œæƒ³äº†ä¸€ä¸‹è¿˜æ˜¯å†³å®šè£…å¤šä¸€ä¸ªç‰ˆæœ¬çš„MySQLå§ã€‚</p><a id="more"></a><h2 id="åˆ‡æ¢é‡ç‚¹"><a href="#åˆ‡æ¢é‡ç‚¹" class="headerlink" title="åˆ‡æ¢é‡ç‚¹"></a>åˆ‡æ¢é‡ç‚¹</h2><ol><li><code>/usr/local/var/mysql/</code>é€šè¿‡åˆ‡æ¢æ¯ä¸ªç‰ˆæœ¬æ¥ä½¿ç”¨æ•°æ®åº“è®¾ç½®å’Œæ•°æ®</li><li>ä½¿ç”¨<code>brew unlink</code>å’Œ<code>brew link</code>åˆ‡æ¢æ´»åŠ¨ç‰ˆæœ¬çš„MySQL</li></ol><h2 id="æ•™ç¨‹æ‘˜è¦"><a href="#æ•™ç¨‹æ‘˜è¦" class="headerlink" title="æ•™ç¨‹æ‘˜è¦"></a>æ•™ç¨‹æ‘˜è¦</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¤§æ¦‚æµç¨‹ï¼š</p><ul><li>åœæ­¢è¿è¡ŒMySQL</li><li>åœ¨è®¾ç½®å’Œæ•°æ®ç›®å½•ï¼ˆusr/local/var/mysqlï¼‰ä¹‹é—´åˆ‡æ¢</li><li>brew unlinkå¹¶brew linkä¸åˆ‡æ¢æ´»åŠ¨çš„MySQL</li><li>å¯åŠ¨MySQL</li></ul><h2 id="è¯¦ç»†æ­¥éª¤"><a href="#è¯¦ç»†æ­¥éª¤" class="headerlink" title="è¯¦ç»†æ­¥éª¤"></a>è¯¦ç»†æ­¥éª¤</h2><p>æœ¬ä¾‹ä»¥å·²å®‰è£…MySQL 8.0å†å®‰è£…5.6 ä¸ºä¾‹</p><h4 id="1-å¤‡ä»½-usr-local-var-mysql"><a href="#1-å¤‡ä»½-usr-local-var-mysql" class="headerlink" title="1. å¤‡ä»½/usr/local/var/mysql/"></a>1. å¤‡ä»½<code>/usr/local/var/mysql/</code></h4><p>ç”±äºå­˜å‚¨äº†è®¾ç½®å’ŒDBæ•°æ®ï¼Œå› æ­¤åº”è¯¥å¤‡ä»½å¥½ï¼Œç„¶åæ’¤ç¦»ã€‚<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /usr/<span class="built_in">local</span>/var/mysql /usr/<span class="built_in">local</span>/var/mysql_80</span><br></pre></td></tr></table></figure></p><h4 id="2-åˆ é™¤MySQL-8-0çš„ç¬¦å·é“¾æ¥"><a href="#2-åˆ é™¤MySQL-8-0çš„ç¬¦å·é“¾æ¥" class="headerlink" title="2. åˆ é™¤MySQL 8.0çš„ç¬¦å·é“¾æ¥"></a>2. åˆ é™¤MySQL 8.0çš„ç¬¦å·é“¾æ¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew unlink mysql</span><br></pre></td></tr></table></figure><blockquote><p><strong>è§£é‡Šï¼š</strong><br>è¿™ä¸ªç¬¦å·é“¾æ¥ æŒ‡çš„æ˜¯è¯¸å¦‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/bin/mysql -&gt; ../Cellar/mysql/5.7.10/bin/mysql</span><br></pre></td></tr></table></figure><p>å’Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/lib/libmysqlclient.20.dylib -&gt; ../Cellar/mysql/5.7.10/lib/libmysqlclient.20.dylib</span><br></pre></td></tr></table></figure><p>ä¹‹ç±»çš„ä¸œè¥¿ã€‚</p></blockquote><p><strong>æ³¨æ„ï¼š</strong><br>å¦‚æœæ­¤ç¬¦å·é“¾æ¥å­˜åœ¨ï¼Œå®‰è£…å¦ä¸€ä¸ªç‰ˆæœ¬å°†å¯èƒ½å¯¼è‡´ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ brew install mysql56</span><br><span class="line">==&gt; Reinstalling homebrew/versions/mysql56</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles-versions/mysql56-5.6.27.el_capitan.bottle.tar.gz</span><br><span class="line">Already downloaded: /Library/Caches/Homebrew/mysql56-5.6.27.el_capitan.bottle.tar.gz</span><br><span class="line">==&gt; Pouring mysql56-5.6.27.el_capitan.bottle.tar.gz</span><br><span class="line">Error: The `brew link` step did not complete successfully</span><br><span class="line">The formula built, but is not symlinked into /usr/<span class="built_in">local</span></span><br><span class="line">Could not symlink bin/innochecksum</span><br><span class="line">Target /usr/<span class="built_in">local</span>/bin/innochecksum</span><br><span class="line">is a symlink belonging to mysql. You can unlink it:</span><br><span class="line">  brew unlink mysql</span><br><span class="line"></span><br><span class="line">To force the link and overwrite all conflicting files:</span><br><span class="line">  brew link --overwrite mysql56</span><br><span class="line"></span><br><span class="line">To list all files that would be deleted:</span><br><span class="line">  brew link --overwrite --dry-run mysql56</span><br></pre></td></tr></table></figure><p>æˆ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">$ brew install mysql56</span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 1 tap (homebrew/cask).</span><br><span class="line">No changes to formulae.</span><br><span class="line"></span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/mysql@5.6-5.6.40.sierra.bottle.tar.gz</span><br><span class="line"><span class="comment">######################################################################## 100.0%</span></span><br><span class="line">==&gt; Pouring mysql@5.6-5.6.40.sierra.bottle.tar.gz</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/mysql@5.6/5.6.40/bin/mysql_install_db --verbose --user=xxx --basedir=/usr/<span class="built_in">local</span>/Cellar/mysql@5.6/5.6.40 --datadir=/usr/<span class="built_in">local</span>/var/mysql --tmpdir=/tmp</span><br><span class="line">==&gt; Caveats</span><br><span class="line">A <span class="string">&quot;/etc/my.cnf&quot;</span> from another install may interfere with a Homebrew-built</span><br><span class="line">server starting up correctly.</span><br><span class="line"></span><br><span class="line">MySQL is configured to only allow connections from localhost by default</span><br><span class="line"></span><br><span class="line">To connect:</span><br><span class="line">    mysql -uroot</span><br><span class="line"></span><br><span class="line">This formula is keg-only, <span class="built_in">which</span> means it was not symlinked into /usr/<span class="built_in">local</span>,</span><br><span class="line">because this is an alternate version of another formula.</span><br><span class="line"></span><br><span class="line">If you need to have this software first <span class="keyword">in</span> your PATH run:</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;/usr/local/opt/mysql@5.6/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line"></span><br><span class="line">For compilers to find this software you may need to <span class="built_in">set</span>:</span><br><span class="line">    LDFLAGS:  -L/usr/<span class="built_in">local</span>/opt/mysql@5.6/lib</span><br><span class="line">    CPPFLAGS: -I/usr/<span class="built_in">local</span>/opt/mysql@5.6/include</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">To have launchd start mysql@5.6 now and restart at login:</span><br><span class="line">  brew services start mysql@5.6</span><br><span class="line">Or, <span class="keyword">if</span> you don<span class="string">&#x27;t want/need a background service you can just run:</span></span><br><span class="line"><span class="string">  /usr/local/opt/mysql@5.6/bin/mysql.server start</span></span><br><span class="line"><span class="string">==&gt; Summary</span></span><br><span class="line"><span class="string">ğŸº  /usr/local/Cellar/mysql@5.6/5.6.40: 340 files, 154.0MB</span></span><br></pre></td></tr></table></figure><h4 id="3-å®‰è£…MySQL-5-6"><a href="#3-å®‰è£…MySQL-5-6" class="headerlink" title="3. å®‰è£…MySQL 5.6"></a>3. å®‰è£…MySQL 5.6</h4><p>å¾ˆç®€å•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install mysql56</span><br></pre></td></tr></table></figure><p>å®‰è£…åè®°å¾—å¯¼å…¥ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;/usr/local/opt/mysql@5.6/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.zshrc</span><br></pre></td></tr></table></figure><h5 id="é™„å½•ï¼šMacé€šè¿‡brewå®‰è£…MySQLåè¯¦ç»†é…ç½®è¿‡ç¨‹"><a href="#é™„å½•ï¼šMacé€šè¿‡brewå®‰è£…MySQLåè¯¦ç»†é…ç½®è¿‡ç¨‹" class="headerlink" title="é™„å½•ï¼šMacé€šè¿‡brewå®‰è£…MySQLåè¯¦ç»†é…ç½®è¿‡ç¨‹"></a>é™„å½•ï¼šMacé€šè¿‡brewå®‰è£…MySQLåè¯¦ç»†é…ç½®è¿‡ç¨‹</h5><h4 id="4-åˆ†é…MySQL-5-6é“¾æ¥"><a href="#4-åˆ†é…MySQL-5-6é“¾æ¥" class="headerlink" title="4. åˆ†é…MySQL 5.6é“¾æ¥"></a>4. åˆ†é…MySQL 5.6é“¾æ¥</h4><p>å®‰è£…MySQL 5.6ä¹‹åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew unlink mysql &amp;&amp; brew link mysql@5.6 --force</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>å°½ç®¡å¯ä»¥é€šè¿‡æ‰§è¡Œé“¾æ¥æ¥é‡æ–°åˆ†é…é“¾æ¥ï¼Œä½†æœ€å¥½é¦–å…ˆæ¸…é™¤é“¾æ¥ï¼Œå› ä¸ºå‘å‡ºå¤§é‡æ—¥å¿—å¾ˆéš¾å‘ç°é”™è¯¯ã€‚<code>--force</code>å‚æ•°çœ‹å…·ä½“æƒ…å†µä½¿ç”¨ï¼Œè‹¥<code>brew link mysql@5.6</code>ä¸æç¤ºè¦å¼ºåˆ¶é“¾æ¥çš„è¯å°±ä¸éœ€è¦è¯¥å‚æ•°äº†ã€‚</p><h4 id="5-å¯åŠ¨MySQL-5-6å¹¶æ£€æŸ¥ç‰ˆæœ¬"><a href="#5-å¯åŠ¨MySQL-5-6å¹¶æ£€æŸ¥ç‰ˆæœ¬" class="headerlink" title="5. å¯åŠ¨MySQL 5.6å¹¶æ£€æŸ¥ç‰ˆæœ¬"></a>5. å¯åŠ¨MySQL 5.6å¹¶æ£€æŸ¥ç‰ˆæœ¬</h4><p>ç”¨brewå¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew services start mysql@5.6</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql.server start</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root -p</span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 1</span><br><span class="line">Server version: 5.6.40 Homebrew</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>ä»æ—¥å¿—å¯ä»¥ç¡®è®¤MySQL 5.6å¯åŠ¨ã€‚<br>å¦‚æœç‰ˆæœ¬ä¸­æ˜¾ç¤º5.7ï¼Œæˆ‘ä»¬è¦æ£€æŸ¥æ—¥å¿—ç­‰ï¼Œå› ä¸ºæœ‰å¯èƒ½æ— æ³•æ›¿æ¢ç¬¦å·é“¾æ¥ã€‚</p><h4 id="6-åœæ­¢MySQL-5-6æœåŠ¡å¹¶ä¿å­˜æ•°æ®"><a href="#6-åœæ­¢MySQL-5-6æœåŠ¡å¹¶ä¿å­˜æ•°æ®" class="headerlink" title="6. åœæ­¢MySQL 5.6æœåŠ¡å¹¶ä¿å­˜æ•°æ®"></a>6. åœæ­¢MySQL 5.6æœåŠ¡å¹¶ä¿å­˜æ•°æ®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mysql.server stop</span><br><span class="line">Shutting down MySQL</span><br><span class="line">. SUCCESS!</span><br><span class="line">$ mv /usr/<span class="built_in">local</span>/var/mysql /usr/<span class="built_in">local</span>/var/mysql_56</span><br></pre></td></tr></table></figure><h4 id="7-æ¢å¤æœ€åˆå®‰è£…çš„MySQL-5-7å¯åŠ¨"><a href="#7-æ¢å¤æœ€åˆå®‰è£…çš„MySQL-5-7å¯åŠ¨" class="headerlink" title="7. æ¢å¤æœ€åˆå®‰è£…çš„MySQL 5.7å¯åŠ¨"></a>7. æ¢å¤æœ€åˆå®‰è£…çš„MySQL 5.7å¯åŠ¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ mv /usr/<span class="built_in">local</span>/var/mysql_80 /usr/<span class="built_in">local</span>/var/mysql</span><br><span class="line">$ brew unlink mysql56 &amp;&amp; brew link mysql</span><br><span class="line">Unlinking /usr/<span class="built_in">local</span>/Cellar/mysql56/5.6.40... 99 symlinks removed</span><br><span class="line">Linking /usr/<span class="built_in">local</span>/Cellar/mysql/8.0.11... 79 symlinks created</span><br><span class="line">$ mysql.server start</span><br><span class="line">Starting MySQL</span><br><span class="line">. SUCCESS!</span><br><span class="line">$ mysql -u root</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 2</span><br><span class="line">Server version: 8.0.11 Homebrew</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>ä»æ—¥å¿—å¯ä»¥ç¡®è®¤MySQL 8.0å¯åŠ¨ã€‚</p><h3 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h3><ol><li><p><strong><code>/usr/local/var/mysql/</code>ä¸ºä»€ä¹ˆæœ‰å¿…è¦åˆ‡æ¢</strong><br>å¦‚æœè‡³å°‘å¯åŠ¨ä¸€æ¬¡8.0ï¼Œå¦‚æœä½¿ç”¨ç›¸åŒçš„æ•°æ®è¿è¡Œ5.6ï¼Œå°†å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">    Starting MySQL</span><br><span class="line">. ERROR! The server quit without updating PID file (/usr/<span class="built_in">local</span>/var/mysql/xxx.local.pid).</span><br></pre></td></tr></table></figure><p> ç”±äºmysqldç­‰æ²¡æœ‰åŠ¨ï¼Œä¼¼ä¹æ˜¯æƒå¨ï¼Œä½†è§£å†³ä¸äº†ã€‚<br>ï¼ˆç”±äºç›®å½•ç»“æ„æ ¹æ®ç‰ˆæœ¬ä¸åŒè€Œä¸åŒï¼Œå¯èƒ½ä¼šå½±å“æƒé™ä»¥å¤–çš„å†…å®¹ï¼‰</p></li><li><p><strong>MySQL 5.6å’ŒMySQL 5.7ï¼ˆ<code>/usr/local/var/mysql/</code>ï¼‰çš„åˆå§‹æ•°æ®ç›®å½•ç»“æ„</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># MySQL 5.6</span></span><br><span class="line">$ ls -l /usr/<span class="built_in">local</span>/var/mysql</span><br><span class="line">-rw-rw----   1 xxx  admin        56  7 26 20:54 auto.cnf</span><br><span class="line">-rw-r-----   1 xxx  admin         0  7 26 20:50 binlog.index</span><br><span class="line">-rw-r-----   1 xxx  admin     10369  7 27 18:30 xxx.local.err</span><br><span class="line">-rw-rw----   1 xxx  admin         5  7 27 18:30 xxx.local.pid</span><br><span class="line">-rw-rw----   1 xxx  admin  50331648  7 27 18:30 ib_logfile0</span><br><span class="line">-rw-rw----   1 xxx  admin  50331648  7 26 20:46 ib_logfile1</span><br><span class="line">-rw-rw----   1 xxx  admin  12582912  7 27 18:30 ibdata1</span><br><span class="line">drwx------  81 xxx  admin      2754  7 26 20:46 mysql</span><br><span class="line">drwx------  55 xxx  admin      1870  7 26 20:46 performance_schema</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MySQL 8.0</span></span><br><span class="line">$ ls -l /usr/<span class="built_in">local</span>/var/mysql_80</span><br><span class="line">-rw-r-----    1 xxx  admin        56  7 26 19:44 auto.cnf</span><br><span class="line">-rw-r-----    1 xxx  admin       178  7 26 19:50 binlog.000001</span><br><span class="line">-rw-r-----    1 xxx  admin     11628  7 26 20:42 binlog.000002</span><br><span class="line">-rw-r-----    1 xxx  admin        32  7 26 19:51 binlog.index</span><br><span class="line">-rw-------    1 xxx  admin      1680  7 26 19:44 ca-key.pem</span><br><span class="line">-rw-r--r--    1 xxx  admin      1112  7 26 19:44 ca.pem</span><br><span class="line">-rw-r-----    1 xxx  admin      2783  7 26 20:42 xxx.local.err</span><br><span class="line">-rw-r-----    1 xxx  admin         6  7 26 19:51 xxx.local.pid</span><br><span class="line">-rw-r--r--    1 xxx  admin      1112  7 26 19:44 client-cert.pem</span><br><span class="line">-rw-------    1 xxx  admin      1676  7 26 19:44 client-key.pem</span><br><span class="line">-rw-r-----    1 xxx  admin      3346  7 26 20:42 ib_buffer_pool</span><br><span class="line">-rw-r-----    1 xxx  admin  50331648  7 26 20:42 ib_logfile0</span><br><span class="line">-rw-r-----    1 xxx  admin  50331648  7 26 19:44 ib_logfile1</span><br><span class="line">-rw-r-----    1 xxx  admin  12582912  7 26 20:42 ibdata1</span><br><span class="line">drwxr-x---    8 xxx  admin       272  7 26 19:44 mysql</span><br><span class="line">-rw-r-----    1 xxx  admin  25165824  7 26 20:19 mysql.ibd</span><br><span class="line">drwxr-x---  104 xxx  admin      3536  7 26 19:44 performance_schema</span><br><span class="line">-rw-------    1 xxx  admin      1680  7 26 19:44 private_key.pem</span><br><span class="line">-rw-r--r--    1 xxx  admin       452  7 26 19:44 public_key.pem</span><br><span class="line">-rw-r--r--    1 xxx  admin      1112  7 26 19:44 server-cert.pem</span><br><span class="line">-rw-------    1 xxx  admin      1676  7 26 19:44 server-key.pem</span><br><span class="line">drwxr-x---    3 xxx  admin       102  7 26 19:44 sys</span><br><span class="line">-rw-r-----    1 xxx  admin  10485760  7 26 20:42 undo_001</span><br><span class="line">-rw-r-----    1 xxx  admin  10485760  7 26 20:42 undo_002</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Homebrew </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macé€šè¿‡brewå®‰è£…çš„MySQLå„ç§æ— æ³•è¿è¡Œé—®é¢˜æ€»ç»“</title>
      <link href="/posts/6965849b.html"/>
      <url>/posts/6965849b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h2 id="ä¸€ã€è§£å†³-ERROR-The-server-quit-without-updating-PID-file-usr-local-var-mysql-xxx-local-pid"><a href="#ä¸€ã€è§£å†³-ERROR-The-server-quit-without-updating-PID-file-usr-local-var-mysql-xxx-local-pid" class="headerlink" title="ä¸€ã€è§£å†³ ERROR! The server quit without updating PID file (/usr/local/var/mysql/xxx.local.pid)."></a>ä¸€ã€è§£å†³ ERROR! The server quit without updating PID file (/usr/local/var/mysql/xxx.local.pid).</h2><blockquote><p>å‚è€ƒï¼š<a href="https://stackoverflow.com/a/36156848">https://stackoverflow.com/a/36156848</a></p></blockquote><a id="more"></a><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>ä¹‹å‰ç”¨çš„å¥½å¥½çš„ï¼Œç»è¿‡ä¸€æ¬¡æ›´æ–°ï¼ˆ5.6-&gt;8.0ï¼‰åæŸä¸€å¤©çªç„¶ç‚¸äº†ã€‚<br>é€šè¿‡<code>brew services start mysql</code>å¯åŠ¨ MySQL åï¼Œä½¿ç”¨ Navicat è¿æ¥æç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2003 - Can<span class="string">&#x27;t connect to MySQL server on &#x27;</span>127.0.0.1<span class="string">&#x27; (61 &quot;Connection refused&quot;)</span></span><br></pre></td></tr></table></figure><p>ç»è¿‡ä¸€ç•ªæŸ¥è¯¢ï¼Œæ®è¯´æ˜¯ MySQL æœåŠ¡æ²¡å¯åŠ¨çš„é—®é¢˜ï¼ˆå…¶å®æˆ‘è§‰å¾—è¿™è¯´æ³•æœ‰ç‚¹ä¸å¯¹ï¼‰ï¼Œç„¶åæˆ‘å°±å°è¯•å¯åŠ¨MySQLæœåŠ¡ï¼Œå‘½ä»¤<code>mysql.server start</code>ã€‚<br>æ¥ç€æˆ‘æ”¶åˆ°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR! The server quit without updating PID file (/usr/<span class="built_in">local</span>/var/mysql/xxx.local.pid).</span><br></pre></td></tr></table></figure><p><code>xxx</code>ä¸ºæˆ‘çš„æœºå™¨åå­—ã€‚</p><p>ç„¶åæ‰§è¡Œ<code>mysql_secure_installation</code>åˆæç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Securing the MySQL server deployment.</span><br><span class="line"></span><br><span class="line">Enter password <span class="keyword">for</span> user root:</span><br><span class="line">Error: Can<span class="string">&#x27;t connect to local MySQL server through socket &#x27;</span>/tmp/mysql.sock<span class="string">&#x27; (2)</span></span><br></pre></td></tr></table></figure><p>åæ¥ç»è¿‡å„ç§å°è¯•å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rm /usr/<span class="built_in">local</span>/var/mysql/*.err</span><br><span class="line">rm /usr/<span class="built_in">local</span>/var/mysql/xxx.local.err</span><br><span class="line">find / -name mysql.sock</span><br><span class="line">sudo chmod -R 755 /usr/<span class="built_in">local</span>/var/mysql/</span><br><span class="line">sudo chown -R _mysql:mysql /usr/<span class="built_in">local</span>/var/mysql</span><br><span class="line">ls -laF /usr/<span class="built_in">local</span>/var/mysql/</span><br><span class="line">sudo rm -f /tmp/mysql.sock.lock</span><br><span class="line">ls -laF /tmp</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰é€šè¿‡<code>ps aux | grep mysql</code>æ‰¾å‡º MySQL çš„ PIDï¼Œå†ç”¨<code>kill -9 [PID]</code>æ€æ‰è¿›ç¨‹éƒ½æ²¡ç”¨ã€‚</p><h3 id="æœ€ç»ˆè§£å†³æ–¹æ³•ï¼šé‡è£…å¤§æ³•"><a href="#æœ€ç»ˆè§£å†³æ–¹æ³•ï¼šé‡è£…å¤§æ³•" class="headerlink" title="æœ€ç»ˆè§£å†³æ–¹æ³•ï¼šé‡è£…å¤§æ³•"></a>æœ€ç»ˆè§£å†³æ–¹æ³•ï¼šé‡è£…å¤§æ³•</h3><p>æœ€åå°è¯•å®Œå…¨é‡æ–°å®‰è£… MySQL ç»ˆäºè§£å†³äº†ã€‚<br><strong>è­¦å‘Šï¼š</strong>è¿™å°†åˆ é™¤æ‰€æœ‰æ•°æ®åº“ï¼Œå› æ­¤è¯·ç¡®ä¿å…ˆä¿å­˜è½¬å‚¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">brew remove mysql</span><br><span class="line">brew cleanup --force</span><br><span class="line">launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span><br><span class="line">rm ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span><br><span class="line">sudo rm -rf /usr/<span class="built_in">local</span>/var/mysql</span><br><span class="line"></span><br><span class="line">brew install mysql</span><br><span class="line">mysqld --initialize --explicit_defaults_for_timestamp</span><br><span class="line">mysql.server start <span class="comment"># no sudo!</span></span><br></pre></td></tr></table></figure><p>é‡è£…äº†MySQLåå»ºè®®é‡æ–°æ‰§è¡Œä¸€æ¬¡é…ç½®è„šæœ¬ï¼š<code>mysql_secure_installation</code></p><blockquote><p>æ³¨æ„ï¼š<br>å®‰è£…åå¿…é¡»æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize --explicit_defaults_for_timestamp</span><br></pre></td></tr></table></figure><p>å¦åˆ™ä»æ— æ³•è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error: Can<span class="string">&#x27;t connect to local MySQL server through socket &#x27;</span>/tmp/mysql.sock<span class="string">&#x27; (2)</span></span><br></pre></td></tr></table></figure></blockquote><h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><p>å¸è½½è¿‡ç¨‹å¦‚ä¸‹ï¼ˆä¿ç•™ä»¥ä¾¿æ—¥åéœ€è¦ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">$ brew remove mysql</span><br><span class="line">Uninstalling /usr/<span class="built_in">local</span>/Cellar/mysql/8.0.11... (254 files, 232.9MB)</span><br><span class="line">mysql 5.7.21, 5.7.22 2 are still installed.</span><br><span class="line">Remove all versions with `brew uninstall --force mysql`.</span><br><span class="line">$ brew uninstall --force mysql</span><br><span class="line">Uninstalling mysql... (640 files, 467.8MB)</span><br><span class="line">$ brew cleanup --force</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/dash/0.5.10... (6 files, 196.2KB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/dash/0.5.9.1... (5 files, 199KB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/freetds/1.00.89... (2,094 files, 11.9MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/freetds/1.00.91... (2,094 files, 11.9MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/freetype/2.9... (60 files, 2.7MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/gdbm/1.14.1_1... (20 files, 555.8KB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/icu4c/61.1... (249 files, 67.2MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/libidn2/2.0.4... (46 files, 580.8KB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/libpq/10.3... (2,425 files, 26.8MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/libunistring/0.9.9... (54 files, 4.4MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/nginx/1.13.12... (23 files, 1.4MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/nginx/1.15.0... (23 files, 1.4MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/node/10.0.0... (5,301 files, 51.7MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/node/10.1.0... (7,283 files, 55.4MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/node/10.2.1... (5,301 files, 51.9MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/node/9.11.1... (5,125 files, 49.7MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/openssl/1.0.2n... (1,792 files, 12.3MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/openssl/1.0.2o_1... (1,791 files, 12.3MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/php/7.2.5... (515 files, 78.9MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/php/7.2.6... (515 files, 78.9MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/php@5.6/5.6.35_1... (498 files, 63.8MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/php@5.6/5.6.36... (498 files, 63.8MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/php@7.0/7.0.29_1... (502 files, 65.5MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/php@7.0/7.0.30... (502 files, 65.5MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/python/3.6.5... (4,794 files, 99.9MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/readline/7.0.3_1... (46 files, 1.5MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/sqlite/3.23.1... (11 files, 3MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/webp/0.6.1... (38 files, 2MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/wget/1.19.4_1... (50 files, 3.7MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/xz/5.2.3... (92 files, 1.4MB)</span><br><span class="line">Removing: /usr/<span class="built_in">local</span>/Cellar/zsh/5.4.2_3... (1,390 files, 11.8MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/dash-0.5.10.sierra.bottle.tar.gz... (83.6KB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/dash-0.5.9.1.sierra.bottle.tar.gz... (83.2KB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/freetds-1.00.89.sierra.bottle.tar.gz... (2.3MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/freetds-1.00.91.sierra.bottle.tar.gz... (2.3MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/freetype-2.9.sierra.bottle.1.tar.gz... (896.8KB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/gdbm-1.14.1_1.sierra.bottle.tar.gz... (182.5KB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/icu4c-61.1.sierra.bottle.tar.gz... (25.4MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/libidn2-2.0.4.sierra.bottle.tar.gz... (190.4KB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/libpq-10.3.sierra.bottle.tar.gz... (6MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/libunistring-0.9.9.sierra.bottle.tar.gz... (1.4MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/mysql-5.7.21.sierra.bottle.tar.gz... (72.2MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/mysql-5.7.22.sierra.bottle.tar.gz... (72.2MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/nginx-1.13.12.sierra.bottle.tar.gz... (570.5KB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/nginx-1.15.0.sierra.bottle.tar.gz... (572.6KB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/node-10.0.0.sierra.bottle.tar.gz... (13.7MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/node-10.1.0.sierra.bottle.tar.gz... (13.7MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/node-10.2.1.sierra.bottle.tar.gz... (13.8MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/node-9.11.1.sierra.bottle.tar.gz... (13.3MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/openssl-1.0.2n.sierra.bottle.tar.gz... (3.7MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/openssl-1.0.2o_1.sierra.bottle.tar.gz... (3.7MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/php-7.2.4_1.sierra.bottle.tar.gz... (21.6MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/php-7.2.5.sierra.bottle.tar.gz... (21.6MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/php-7.2.6.sierra.bottle.tar.gz... (21.6MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/php@5.6-5.6.35_1.sierra.bottle.tar.gz... (19.4MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/php@5.6-5.6.36.sierra.bottle.tar.gz... (19.4MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/php@7.0-7.0.29_1.sierra.bottle.tar.gz... (20MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/php@7.0-7.0.30.sierra.bottle.tar.gz... (20MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/php@7.1-7.1.16_1.sierra.bottle.tar.gz... (20.5MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/python-3.6.5.sierra.bottle.1.tar.gz... (21.9MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/readline-7.0.3_1.sierra.bottle.tar.gz... (497.3KB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/sqlite-3.23.1.sierra.bottle.tar.gz... (1.4MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/tomcat-9.0.6.tar.gz.incomplete... (572KB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/webp-0.6.1.sierra.bottle.1.tar.gz... (809.1KB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/wget-1.19.4_1.sierra.bottle.tar.gz... (1.3MB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/xz-5.2.3.sierra.bottle.tar.gz... (462.1KB)</span><br><span class="line">Removing: /Users/seal/Library/Caches/Homebrew/zsh-5.4.2_3.sierra.bottle.tar.gz... (3.3MB)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/apr... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/apr-util... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/argon2... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/aspell... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/autoconf... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/brew-php-switcher... (119B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/dash... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/freetds... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/freetype... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/gdbm... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/gettext... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/glib... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/gmp... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/icu4c... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/jpeg... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/libffi... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/libidn2... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/libpng... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/libpq... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/libsodium... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/libtool... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/libunistring... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/libzip... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/mcrypt... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/mhash... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/mysql... (1.3KB)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/nginx... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/node... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/openssl... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/pcre... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/php... (12 files, 2.3KB)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/php@5.6... (12 files, 2.4KB)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/php@7.0... (12 files, 2.9KB)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/php@7.1... (12 files, 2.4KB)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/python... (3 files, 127.8KB)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/readline... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/sqlite... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/tomcat... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/tomcat@8... (110B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/unixodbc... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/webp... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/wget... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/xz... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/zsh... (68B)</span><br><span class="line">Removing: /Users/seal/Library/Logs/Homebrew/zsh-completions... (117B)</span><br><span class="line">==&gt; This operation has freed approximately 1.3GB of disk space.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Homebrew </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macä¸Šä½¿ç”¨brewå®‰è£…MySQL</title>
      <link href="/posts/e87d9191.html"/>
      <url>/posts/e87d9191.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><blockquote><p>å‚è€ƒï¼š<a href="https://segmentfault.com/q/1010000000475470">https://segmentfault.com/q/1010000000475470</a></p></blockquote><a id="more"></a><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install mysql</span><br></pre></td></tr></table></figure><h2 id="å¼€å¯MySQL"><a href="#å¼€å¯MySQL" class="headerlink" title="å¼€å¯MySQL"></a>å¼€å¯MySQL</h2><p>é€šè¿‡brew</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew services start mysql</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql.server start</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨MySQLçš„é…ç½®è„šæœ¬ï¼ˆMySQL-æä¾›çš„é…ç½®å‘å¯¼ï¼‰"><a href="#ä½¿ç”¨MySQLçš„é…ç½®è„šæœ¬ï¼ˆMySQL-æä¾›çš„é…ç½®å‘å¯¼ï¼‰" class="headerlink" title="ä½¿ç”¨MySQLçš„é…ç½®è„šæœ¬ï¼ˆMySQL æä¾›çš„é…ç½®å‘å¯¼ï¼‰"></a>ä½¿ç”¨MySQLçš„é…ç½®è„šæœ¬ï¼ˆMySQL æä¾›çš„é…ç½®å‘å¯¼ï¼‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br><span class="line"><span class="comment"># å®Œæ•´è·¯å¾„</span></span><br><span class="line">/usr/<span class="built_in">local</span>/opt/mysql/bin/mysql_secure_installation</span><br></pre></td></tr></table></figure><p>å¯åŠ¨è¿™ä¸ªè„šæœ¬åï¼Œå³å¯æ ¹æ®å¦‚ä¸‹å‘½ä»¤æç¤ºè¿›è¡Œåˆå§‹åŒ–è®¾ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">$ mysql_secure_installation</span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to <span class="built_in">log</span> into MySQL to secure it, we<span class="string">&#x27;ll need the current</span></span><br><span class="line"><span class="string">password for the root user.  If you&#x27;</span>ve just installed MySQL, and</span><br><span class="line">you haven<span class="string">&#x27;t set the root password yet, the password will be blank,</span></span><br><span class="line"><span class="string">so you should just press enter here.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># è¾“å…¥å½“å‰rootå¯†ç ï¼Œä¸€èˆ¬ä¸ºç©º</span></span><br><span class="line"><span class="string">Enter current password for root (enter for none):</span></span><br><span class="line"><span class="string">OK, successfully used password, moving on...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Setting the root password ensures that nobody can log into the MySQL</span></span><br><span class="line"><span class="string">root user without the proper authorisation.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># é¦–æ¬¡ä½¿ç”¨è‡ªå¸¦é…ç½®è„šæœ¬ï¼Œè®¾ç½®rootå¯†ç </span></span><br><span class="line"><span class="string">Set root password? [Y/n] y</span></span><br><span class="line"><span class="string">New password:</span></span><br><span class="line"><span class="string">Re-enter new password:</span></span><br><span class="line"><span class="string">Password updated successfully!</span></span><br><span class="line"><span class="string">Reloading privilege tables..</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, a MySQL installation has an anonymous user, allowing anyone</span></span><br><span class="line"><span class="string">to log into MySQL without having to have a user account created for</span></span><br><span class="line"><span class="string">them.  This is intended only for testing, and to make the installation</span></span><br><span class="line"><span class="string">go a bit smoother.  You should remove them before moving into a</span></span><br><span class="line"><span class="string">production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#  æ˜¯å¦åˆ é™¤åŒ¿åç”¨æˆ·</span></span><br><span class="line"><span class="string">Remove anonymous users? [Y/n] y</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Normally, root should only be allowed to connect from &#x27;</span>localhost<span class="string">&#x27;.  This</span></span><br><span class="line"><span class="string">ensures that someone cannot guess at the root password from the network.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#  æ˜¯å¦ç¦æ­¢è¿œç¨‹ç™»å½•</span></span><br><span class="line"><span class="string">Disallow root login remotely? [Y/n] y</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, MySQL comes with a database named &#x27;</span><span class="built_in">test</span><span class="string">&#x27; that anyone can</span></span><br><span class="line"><span class="string">access.  This is also intended only for testing, and should be removed</span></span><br><span class="line"><span class="string">before moving into a production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#  æ˜¯å¦åˆ é™¤æµ‹è¯•æ•°æ®åº“ï¼Œå¹¶ç™»å½•</span></span><br><span class="line"><span class="string">Remove test database and access to it? [Y/n] y</span></span><br><span class="line"><span class="string"> - Dropping test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"> - Removing privileges on test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reloading the privilege tables will ensure that all changes made so far</span></span><br><span class="line"><span class="string">will take effect immediately.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># æ˜¯å¦é‡æ–°è½½å…¥æƒé™è¡¨</span></span><br><span class="line"><span class="string">Reload privilege tables now? [Y/n] y</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">All done!  If you&#x27;</span>ve completed all of the above steps, your MySQL</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks <span class="keyword">for</span> using MySQL!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Cleaning up...</span><br></pre></td></tr></table></figure><p>5.6ç‰ˆæœ¬å’Œ8.0ç‰ˆæœ¬çš„æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œ8.0ç‰ˆä¼¼ä¹æœ‰ä¸ªå¯†ç å®‰å…¨æ£€æµ‹æ’ä»¶ã€‚<br>ä¸‹é¢æ˜¯8.0ç‰ˆæœ¬çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">$ mysql_secure_installation</span><br><span class="line"></span><br><span class="line">Securing the MySQL server deployment.</span><br><span class="line"></span><br><span class="line">Connecting to MySQL using a blank password.</span><br><span class="line">Securing the MySQL server deployment.</span><br><span class="line"></span><br><span class="line">Connecting to MySQL using a blank password.</span><br><span class="line"></span><br><span class="line">VALIDATE PASSWORD PLUGIN can be used to <span class="built_in">test</span> passwords</span><br><span class="line">and improve security. It checks the strength of password</span><br><span class="line">and allows the users to <span class="built_in">set</span> only those passwords <span class="built_in">which</span> are</span><br><span class="line">secure enough. Would you like to setup VALIDATE PASSWORD plugin?</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦é‡‡ç”¨mysqlå¯†ç å®‰å…¨æ£€æµ‹æ’ä»¶ï¼ˆè¿™é‡Œæˆ‘é€‰æ‹©äº†æ˜¯ï¼Œå¯†ç æ£€æŸ¥æ’ä»¶è¦æ±‚å¯†ç å¤æ‚ç¨‹åº¦é«˜ï¼Œå¤§å°å†™å­—æ¯+æ•°å­—+å­—ç¬¦ç­‰ï¼‰</span></span><br><span class="line">Press y|Y <span class="keyword">for</span> Yes, any other key <span class="keyword">for</span> No: y</span><br><span class="line"></span><br><span class="line">There are three levels of password validation policy:</span><br><span class="line"></span><br><span class="line">LOW    Length &gt;= 8</span><br><span class="line">MEDIUM Length &gt;= 8, numeric, mixed <span class="keyword">case</span>, and special characters</span><br><span class="line">STRONG Length &gt;= 8, numeric, mixed <span class="keyword">case</span>, special characters and dictionary                  file</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®ä¸Šé¢æç¤ºé€‰æ‹©å¯†ç å¼ºåº¦</span></span><br><span class="line">Please enter 0 = LOW, 1 = MEDIUM and 2 = STRONG: 2</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¦–æ¬¡ä½¿ç”¨è‡ªå¸¦é…ç½®è„šæœ¬ï¼Œè®¾ç½®rootå¯†ç </span></span><br><span class="line">Please <span class="built_in">set</span> the password <span class="keyword">for</span> root here.</span><br><span class="line"></span><br><span class="line">New password:</span><br><span class="line"></span><br><span class="line">Re-enter new password:</span><br><span class="line"></span><br><span class="line">Estimated strength of the password: 100</span><br><span class="line"></span><br><span class="line">Do you wish to <span class="built_in">continue</span> with the password provided?(Press y|Y <span class="keyword">for</span> Yes, any other key <span class="keyword">for</span> No) : y</span><br><span class="line">By default, a MySQL installation has an anonymous user,</span><br><span class="line">allowing anyone to <span class="built_in">log</span> into MySQL without having to have</span><br><span class="line">a user account created <span class="keyword">for</span> them. This is intended only <span class="keyword">for</span></span><br><span class="line">testing, and to make the installation go a bit smoother.</span><br><span class="line">You should remove them before moving into a production</span><br><span class="line">environment.</span><br><span class="line"></span><br><span class="line"><span class="comment">#  æ˜¯å¦åˆ é™¤åŒ¿åç”¨æˆ·</span></span><br><span class="line">Remove anonymous users? (Press y|Y <span class="keyword">for</span> Yes, any other key <span class="keyword">for</span> No) : y</span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Normally, root should only be allowed to connect from</span><br><span class="line"><span class="string">&#x27;localhost&#x27;</span>. This ensures that someone cannot guess at</span><br><span class="line">the root password from the network.</span><br><span class="line"></span><br><span class="line"><span class="comment">#  æ˜¯å¦ç¦æ­¢è¿œç¨‹ç™»å½•</span></span><br><span class="line">Disallow root login remotely? (Press y|Y <span class="keyword">for</span> Yes, any other key <span class="keyword">for</span> No) : y</span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line">By default, MySQL comes with a database named <span class="string">&#x27;test&#x27;</span> that</span><br><span class="line">anyone can access. This is also intended only <span class="keyword">for</span> testing,</span><br><span class="line">and should be removed before moving into a production</span><br><span class="line">environment.</span><br><span class="line"></span><br><span class="line"><span class="comment">#  æ˜¯å¦åˆ é™¤æµ‹è¯•æ•°æ®åº“ï¼Œå¹¶ç™»å½•</span></span><br><span class="line">Remove <span class="built_in">test</span> database and access to it? (Press y|Y <span class="keyword">for</span> Yes, any other key <span class="keyword">for</span> No) : y</span><br><span class="line"> - Dropping <span class="built_in">test</span> database...</span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line"> - Removing privileges on <span class="built_in">test</span> database...</span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line">Reloading the privilege tables will ensure that all changes</span><br><span class="line">made so far will take effect immediately.</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦é‡æ–°è½½å…¥æƒé™è¡¨</span></span><br><span class="line">Reload privilege tables now? (Press y|Y <span class="keyword">for</span> Yes, any other key <span class="keyword">for</span> No) : y</span><br><span class="line">Success.</span><br><span class="line"></span><br><span class="line">All <span class="keyword">done</span>!</span><br></pre></td></tr></table></figure><h2 id="åœæ­¢MySQL"><a href="#åœæ­¢MySQL" class="headerlink" title="åœæ­¢MySQL"></a>åœæ­¢MySQL</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew services stop mysql</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Homebrew </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BCompareç ´è§£æ–¹æ³•ï¼ˆå…¨å¹³å°ï¼‰</title>
      <link href="/posts/bfc4a775.html"/>
      <url>/posts/bfc4a775.html</url>
      
        <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">Who am I?</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="5521b4bb7ae97419ed036bb107bee976b7a3e149ed89c94617204788b9669de7">cea3ecfb186847c17b0ca6ea228b75d619ac8724f157518f84095d5b230c2801a49a24a210b7d886d7bc415cf2764d3356e3867bc181ccfcd3f10671d6abecfa02cb1d1182dede3393d2deb216c4c6354217bf42b4deeb94ec5c6e6fe9746191be92177f001d650c07fd330c5e52b3baa8e9e6d3660cab5ee238fc570c1e03a6f146c0d5e50be8a870638582279adb0d69bb4b749ff578838cf87bca0a9b464a83ac4a26a1e3707a9cd0244501fb8eac9d7d316d16c74d9232a08ba8fb9554e9bb455297882bd8b9d7cea100cddda7dfb9f5ff1519f43ac256f5676dd58899b6d9dfa9ab1378d6b1be8d419ec74b70a733aa610eba8a3f32ccf14b32498e0d96e7d0d0e0b9e1fbc55af7814e34ff0f3db291ef6acb24e19a2ae572d3830c3ef6dd5bf0e8a99154b31ee912addd9db6f1e5707cc26457a7bce30403fdcc42e8775b6f05ada72f88484ba8108ae62cafadae441650908e9d6f02fa1fb78a5f5ce54e2d0c57de05bed54aa5008245b28c93f80eaa82014ad770389642a9260947e04e13b4309b260f6c22a6c71a656ea2bb39e2005bce86969ffa7e2eb063911d48851a54a5b84dbeb94f7f374148f3dcda2073d84517536afd927454bac05243cd23ceb3bf2304f85eabcb6b3edccd00c9ebaa5b24ccd949109ef4500e606fa35c53934a95e63df260b641840451cf5756e659d77479450dd7e62bb7ece379775d653bc38d25bc1613243bfb866ee16d9c09670d95b5576fc64865fc68c716a1223bbd30b141f1b06970c45445e5ddcbd8ea487df13da558e8bd47631bead4e51e81228ad10bd59ab21159a883ec8e9dbc008f58513ed61c5c7204ecaa285dbe4fc1aa5e14b12840cc7cb69814f3383d51c51402953462d2fe0f7e63e673b4f0b4a61f879cebcd087a3a7599a586b1bbccc5d12c1f131964aa8ceaabcae25ca9d50571294f8b4a2d916e0a533098e7a4008834e2a740e284995cfeb524032b11b0196f9b0f31db015ac7b58236093631fed347d80d8886c4d383704e033751fa51497e8e9128e472b7f0dda991c764255d73e3bb972bf0e6d63420eccb272240b468d0c350d6474783ee48ca6ba58c1f56c361d685a367f2656a53b9d2ef25ffabbcc8a3c54ec57377df596c8ca8874bdd9ebbc0d7d01a266f0ecda5133e6935f0beb409914fb209deb8b688fa6172ff4a07564ee62183364bdde08afeb13569361b81a6019f84a742f3d0cc836648e833b1bf97aa81e68ab888ddc1d7f53af4b6cc1402a406ce0a93fd35c5fa114684fc0508f8dc372d02dcd0c4d79dfadf3b88048396725d7c2ffa22204a2919c74e80aabb34b69d2d741bc2ecf8eccf8576da16a6dec8eb012267ae1185f6274b74a708a4fb3ecdb2cedc2d21f2f32aad5f9dec9be7fba41d1bd7f9bd981a651974aff6d71940c5551fc9fb5fe3b39921f01339c8086e71cb5be8fa8ac9b0b01c38472b84cb082f7b6edf9284ce7c2a82e179696fc240fcb29e74ad445d9e3ec58ba6f1f915684af6720b0ad9554a2b6ec9299cc954bbe624f6ef008cb542f17b0df3630afb1f6e5c67ee700c60bb4c58f75fa1d8226fc4937ec5262b151f838e2e8e8499a115a69bd4a6cb5a2633fed9852171c12a7a7800464e6b7450e6966c52ee81e851ff5b7594fc325536020aa53cd5e34203bb729de677a909c9379cb167c5908c559a853ce7ff9be8b131dcc7f5b0a29565547e8cbbe2ef62baf0b0f1b690670cec38c1e523aeb0a89b37d1f5e79cab8ddd8b534d5092977ca7b6481af8ee424a870b61a778d55f10b590543632f4dfb0089c7cafc64f1713134dca667dd4f0e03f7e618a3cfc1824d27fbacb7193972e5daaf3d3efee74f51ae6f5a4cf6204b2baa2d9f2d39107179194a93453a83147af82e015ccadbd331bb3544d469a62edcfe25980fef9b2e344bc82ccd00f5b4b024ff19773cac93c0ea98c4516c3cfe86e6e494c88bbcdabe1e65b2633cc530234ea794f87f5e1da7d247352766976dfe7e0c882a410d08346cc9ccc8f82b672282574a095946faa898db4009035c0dedd573ac146d6814e7f796c2bf0daac9b5d7dea047d7e3046f4bb2ad4d01432af65ec43f0cac23716f685a8988e5eeb60d779a403eaa2ba44fae805b177c1c5f51eda745ecb9299511670fce56d980d62ef8abe4f4fcc1684c49c0642ed6e3ffc65b9e1072c89e475390e8b422db5af892e76bd43a594f320c7799dd868334d402f1c3db1ca210c5287a4817495575d9b67d6cd95e70408cfeb00daf9219dbf85e55e395ec382d093ce2bb7c877a2dd88e07260e2d52b74ba61e57e3e49cfb7bfb1f43025f73e1a22991d090d1e9a444791bcd695b87d0be01991180cd5404f3e4b21a11b6e6e0fea22bd1f2f05a2b325ac766584b94a3c162da0d3e6615f1a817d76d5989af43856559a671358480b33aef5bba621c1adbb7ae1217b87d43cb19eed27bbff365fdf2b1c3d577b6cd0d0c018414f8f1be7dde0a9ef82ca8362156a5342da5345e1b61e48fc596aa932148651c0558633bc409f204b032c57a113304433e21d65656fad83d0fd153d43f62895a58a230b398aa84e2137a97f2c0087550a8246998139c7e52ac42c659390539c89b63b684affbcf5a2a80c64e0cff5132ba220ebb74a4f23e9254b465134cb928d0a00d579ac2c744735542640f0d1d256d3eacf185063b160ad3c92268b850c836b42a4215c04cee9ac54f7a6965e413a17686f73294ae6c935e3a9d653d51abe00987d20f9391b0ad7251acc3adad0adadc9fc350ba7deba947597fc553352edfbf9f70601beab6c1487b7480f1c40e435907f6b87ec9302780740af01cc7b953261802a1e12e3d69881c99f42e5b6e8141fb118dd04441f78909d7757e368aab11c9d7a024efa55ab5a59f4c07bb9e1267a1049fb37b0928f822c2ad7804ae753c20cf57f798b55bba096fe6537c7ec5acc568d5a8eb917b12438e8a8f964e33e81eb1bda737eca6078a8b759b30835fcc96fcee9b47417af15ec841c86b5540be22f3c639f396a430ffd672598211b3ea025117ea437a75235694f981a5698ebb17f5b03c40f27e98c1447de64e70de491aa8af7d64d602421fa410c638b53479beb364097d58b4fa012ea1b2573402ea9cfbe6cfa9b6bb6f8195d7502df8905c338c4573a4f65b02447ca856a252ef77def600c551434304562976d40e4e1318a627357b9ba8ab3e26b30c5dc003725cfd0eafc8f02a60ee1f817a08caa8802e6da1730ec54517ca7fe3fb28735f510a8718725193b03703c1c93eeeee0e8aac4473e373a3b3f0678cae89f710019e837abba2311a5d163dc72e005a4d6ff28a02f0edbf70dd6b2af3a008d0aa1ff224deb185476acef2127f49dd6382f2f2a327dede1b1b0b147eaae5117cbdb6c7db7f9aa48401d6214c96ebc7c56391787d9a24529ab43abf28599a52cbd905898019184967f1ba3511db1b762947929eaaf66b1e385d89a69eb2114508e796bae3c072b0f00538e5a3113b88b5b0e2ce3141ec3b9caf9b8fa887f626e2c21c84328bdaa36432a7edbaa3de5b19f0328a9a282cf136e20e3f648661a416a390a7d8689711b1b48be5abea0d0c60acf0d116585e3533d6c8fd446d63fc636c0332f94569b48de9455ff336511b6de0995dc09d2560abe2f9953b9d5f6dea0dc8777c9ba22b8fc11775264411a5b1fd3aac7f69ad05ea0f03499c12a615ca642c8d20f2f23c4e9694d9eb24a4523e39f3b33218cff3e7e9721ebdb7ef51c07f7d5677d5c0fe133f6f56e3b5fb4550b37d8475055857dcc3d579d705c7a5405a93f0f075d3215bcc48069b53b4f602bfa0c3353e57d09ca25902335d078be26342c9eb744bfd73a203e84d7c02d4f0c043598e1d704da8d4b0c33f3b0d788782ce428289696ef26a590e9b3ce3024f26ab1a9a8fe2e80cdde4d5f27be6d66dc5486ce7d43a70caf772cc9e5c6bd19b6ca1731cf8697e0d1eca5d8dd96cc6f25887342f1e0eea0de2ad69e32ca786d5236f851a93deb9da0b1b9ee8ca7725a5b148278483002d56ae9e20c4730ec237c1f9cc23e840a6b9bc3a8119390a72a80425a9f1f3a887d867a2d256ea9de7a437ca6115e7e84b915eab65aae51f7671848a07db9ae82b20688b0db112f615598f2f1278dc25c245bea7ac139af983067ee907cd773e1b27f850cb154ff6fcff677e6b8d4022a1986bc4cadc0f5b4011d59ee3c8129d066254d4885289185025e4b48eb024debc0b2cbc06f088a0588c473d13498c152a8ce82017742551dc81f6ee4ab6369fcc6474f331dc8ba8cb46246654e2b8a7dbe82198cba340be6dab49db55fb977c70647560631be1c93dbf69cf26b2fb7c531269a1954d5f399f0ea272298807be0207925445d1a1c2485eee2f005020de810ae4f6930664a7c90073ae69d83b28cd3d218ab75449b2a312deffebfc034ddf6428a2947d26e833397065cf59513389231a2591c90dea5dd1cf6f40898432fde8c296fc1a39467cc28b12b3259219d7a7cecb397ac76148fb99c34cd4a406b84d1ac537f1f7a3f37661d2e37405f73369f41cf2d0d8f5eb397ab447200ed2d80feb59341b66833c499a8962a26a016f39524fd86820a75859eeaaa80a02f0b6fac091581c036c85dad25bd38f09f11812729e16b1203ca8ff203f838c4a35eaaf14d819ebc723dbf003a7dfc65b46197e8121b91768dace763e8bcd2c130412557fb33c25f575dff07a36f950ddfd12cec205372e71419516b13eb1ab633a55718c39830f3cc2fdec0399ba9129a3c5af4a47f0f71753110fe0eadb5181438660f669dd1a98b7fe86140a102ecf5a5c50ba1db0ffea9338dcbd67a342dc3baac46547ccf7014686cb7478fd0944bc3c6b22836bec78f8ec647516b2037f55afde8b1678ae5e24a592dcd3f9ad1f171b0369e846860ae63053a2b16140d588c727cf6f21874dc2442b47096a5b57432cede7196863fb05b9147764ea4966550e11522962971d8b9c870581f9f1aa3e53022702733a58e275a6f6199bddd92097a197e06dd3878c290967fb73a61791771d3c47562a6f31d68d06e832935230e585403b01d3b16c5e8e1cc008bb64a456997f39ea394a2795ba0de862b9b88171cff40eeee5dd942f5c683f3b11f5809471aa92763665352237b900f2c83999c111e50c58a67558d63f5f84d8c054ae73234467d865659175338c05c2c10a4d6e24c25c56dd54e6e45b17dc4950728269cc6d36141419687695a4d6ed1cc9914b2310a1cf99bb0efd2ee965ae535c03df2b82a8b9cb5e024a48d6609efdd5ef07d3451f91f88b17f7ca5c33d51b56d21bb2b6a11a95494f38d475b83c4832fa75988d6476ff5538df1694d39bccfc6dbd8fed745dc63f769606801112d1359a936ea9b2de4ac8d4331cdd4d1a38b4a717de8afc5985b690c27eb82f5d2390eacf758a6d3e881ed70f78b557f29f55baf8e3673e2aa5bc894d9beb87507c5bea2e556e6dc756641567780ee09df2ff0f37099b6192de6e4c122602a0922301a90cf86c404778f6b7d15a8ba39561effe471b105e1e052fe273001886a18bbf774093d85dc9bde2864f1c99068f5e0a29d72819e8b28616675ea64d5a87ca2a12e7021c563ce2734add2d09ef86a9a50ad9b7084d82fc872dd6f80de2b602c876d211108e6aea78eb82e6a1cb353e638df9939be4afc61a758ea0ef9309bff1454840d96de4935e195b6336cd39dc543615ec4da372cd6e01046d42df1ab88aa6e8105fc6396713924314dd8dd6c1d354ff4a35e216ee7525bd43daf9eb7d41233f4160ebe2d9440e1074762c163da5742329965a062a4434af103de348e8fad8151efd84d1207df351e97d4bb6a95526d10a62e4bf192c196d3a1bf6eb236729fc79adc420d043b3b1e6cf8e16e83dfb266723d632389a0d34c2e62593bca5927515145585b24d978a68dc73d3d8f558700ebfce1df6e108c9862a73067b28ad1f096c32bbe1603746a4d82fce68776b13a8d3f2c4dc71c73aa366ef0ea2233a0d05b18c1c79b0577f5a9c531ade8383e715c5e3eb5e2b13668b4f3bbf64591c73ffd37348eb49f186dfc704446d3afc18d49f0e0e2d36ef3fb5ca6a540c89284e163470f48487a5e19d9c7e660eada20226d3e746ae33cfbd75ffc606a5c2d5ea27d82d3a2b0e988b920a662865c0b6cff0f15ecfb59d38c03d1bc2ce27ffe69307ad706f9bd2097a9cf43d7c6f7537816dcae69502ab05dc3222168dbc8e7c5cc0265e84e56757156889404cf032091abf8982692c1b4a5d59b68c22b1a3b51376b5f4527aff4775755509ae831e2fbf933ce1a68e3ec8e829396a2c303b82e9fe9bab58edf46fcb1c21e1403c51aeef4f2e19dc45dc4638848bc805a03cea614ad0c5f3b455b02039814d71dc6fb8dc78bc8bd512f3cafa089d587df8e4cca5f42d1a8dc97d31411104bd65b1db20b68f3f105a76c222827a7af0012945c5ca1d99ed7f8dcee3a437f5ff45c84ab04e170da1b5918733dfa55dfd28251e4520b6f20fc14a61a8a20e24d3696eaccafd1e145d75ede9e2cdc553dee38af9ff057ac70b2b137a71753d14e7b1619c409389ce07f417458055ff4951e31d991d725b18920dd5ab6ea7a953ffe6848729bfb3ec263f0f40c4d5e16d58e89bdd02763b148a1613323fadd88358721ca33cc79c97c70e70d28180be0fe753f62b073018f5e3b4025a0aba65837f51eb7c5c886cb5d5c52cc3aa426b88e7743ce294fe90acfd46f713d8ca0222dc92ea3a555007e16ca058e21c8e21722f53382605612cd14cd12b1824c4d94e06da938871b2a49bc2fade812e6cadecde67054acbcc586a82bf9f9d186c14635b241a7ddfd4ed68980295550eb8321b957ee33ae60cfe04217c6c9c8e8ab3e97035f6afcae764e4c24a99dcca342b6622216b69445b2fa1e1298d508ff972cbd12131a0d033d63e2e2a28968b7d8b7598d7507c5a0fa8287fd82bd3c0d96ff46f4d7e4b9d71debb37be2b64579600845788294f9f79d9258aa173052c109374fa880e10b3f0fe7e8f7d2ae9dfc72bd0141c227676c4efe9e1c156ea03c598f995ce575f1ec6576e1e7847f3d64718bd3678d53da1010f9aba93289033593543c50e9cddb895f1a39eadcd87d6de3b534bff5cd47da9553199dff690d2d3231439d4610b6eac7cf00f8e424f9d7c1b5a0f22bf5b9c1ea323dd38da457660cb702342f465995ca5e07184bc8451989f935d469b65aca8d943104ecef37712bddd854e409eb58540fb91dc63d337d6c8163dc7afa223f6ad1ec11ec623c1d4286d62f3224ea3bab05a6734b911b75c7641c0e224511253d31a450e33fd1ec506c318dc443cc64c81a25f38f291a86ad610404e0d93812b1fa08b69ed716f8489f8138ea6863ca93ee6257871138abce658fbcf8fbb027adf74a499fbd9fe27264f3e216bfd94fa1b851b61f7fabd2f3e52e3175d63f29284cfd9e23a8578d51e5ae49d58150d906bad50998f09eef6612eb939f1a210ebc963cef4953aaf217f587db9f91fa1fca8faf86f2c04bcede4d27ff5425fa8a8324eafa8ff1b52c63c835bbe01ad530f1917363e641194c679a8cf7228726ae6d2e7eea44fd6aa67eb50ac9261f0235aab323b8a2a6257b020cb36dea03bd904e77b38db2ca7f205ca71aa4673b7c2446e67b17c04b4ade82559541fc0d80f8d328b068b38f21f6ed7d0978ffc3885cc282e6b835a3ee3affb137a432ccf89379d6db3198a1a89f8b64cc8690479db00bf7148997c9d383745b509e3a397087471f73070e64b99c20dbc5696bdac90bb4f1cf8ef5b08adc3452890918b7b2af319d64cb635e3b03d67f4c2920a4ddc6260898cecea775defcdb040b915893b1ed9d8d4e293061ce5586c52a9efaf1c162a413c7d0d7eddd3cc24d99649bb154ae56c2bee691ec85ba41b9fe4fc70f963f6c3bb44149696090ea77af20077877e6ba6b0a390ebcb4f6ee3cf4bd7df7dfd15776a3b03ac1f18d89c83e1bbfba984e04172c29877e1c623bd02aed98a45b81f24300182641b22b77f8f2e130b2cf1c409009d5c8b171eae3566c32018a3129af2f07b8cb21efbb854b3ced6e4e661afc675f7c1ab2a777da977fe2dd2898775fe876c2e0d63e484669b483fec71eeb3fc88503b23d0b47ea263a882175c47da1333f5c9a22084d5df4a4a537ba6ec587819ae2771b323050b68233b2fff070e5937b736cdaddb820652470942ab655341d237cb3c63e3d0cc5c70c327ba1d4795ad5228dab38d76096b00b9de2b2dcd0375db66fa302a9df09af939fcd9770a0b8a3393340b23742b2fbf83befce3204a999d8b0ff22336423ab45586fc5dd6d353d21c085779b5e4c3dd255a9c843f4968bc771b8faf92125b89060f70e7aa430c04975d8b7974fecde6db484e6c94ad19db53cebf9bd8eb068fe31c6334ea54dfbd106c38c6a35c467f326bcb8eeb3640368cdc4cdd6ab70d49fb1c41b9dc30f49802e6b6585d70cd3f634aa8202c1f34f5bc4aa21724682383859a5ea5ec3697af8236dab54bb8a8335a9cc0a70941c37a84428372ac3dbe2a30750fcd35e2d07f2448aa6e64ceb66ea684baff3edbd9d572f639d240a381eed46754d65a0275195e68a88b41ee9d10fdfa2acc238b294ca1b1e1cc43b7eba64d04be33da50cf0f1792bee32bec00138f804a709f15880183816c8cbb11f236da9600628d6578e0d907390562ad2a6c50613a4c1a0a033bedf2780c17cdd7c811185d47bb4acc7c54661d0e68ac9cb4efbf27510806debc84cfd710985c8cd2a2c764aec588b275619e9ec37754626fb85506a58b1951dc6015cc154d132c92dac160b489741522bcd102b6f704158c39a9c8d128818196aca5bbf94c3b45e955a827ef4cfddc61881532c4ef8160b7cfa0062371e7ce9066f70e7a8efdc2dee427f5332ec830762b4fd896fbd1920e7c11ad7026d0e1c04aca0292978d03832c712b4fdc9fdd321131cd53a3836a9f3c8470787cbad7f65d8f1a58ec525187a31ccbfea19c77fd761572313eda24c14e8ad451555030a4262fe296c26e2e2c09f7835c4c1a93ec20ce1884872367a35604f5fb53dcb1e890d1751fd7a081238c3f86bf9f8a2e0835ceee4d1f730aca894ff9921f8518ddf14f7995e6e40b5d3eecfeea766e6f7df47780ec56fc68c8be6fec9c0c4e397ee4eaf2c0dbad2deff3163fdc9213382fceafa3ef824fd6c466069d1636b839a06c45637eef1827b4b20a8844ab9f0c2bfed5003cfb63c5853938296e5f1b860a103cde967a90cb10fde3072f83b1dd1729aefa581b9a48d9604b347db6eb2707f3639c38ce36e988ee3ebb685e530694fafe8453da0bbbf02dbd5340a476f62fcd7394a5535e61449d6d50a812c37d4ee06336c951a4c7db136e1137309ef36d5b78167a4b226cfcd99495daa1797e1cde77dd25b3c5940000ef023e6ae0ab8bc7d91e900332c8bda07e19c4c3f8bf45b221db634d2a488c8f9b3cfa7d6b22c79532797f87389baed49cc5f9e52a3da910253a12204d6f4bc204bbc9c32ad3cf4a25b50bb3df26748fcf5f39edc2af1ed4c6519010ac5b24ae513dee08322e76a2e59bb82cc4dd5e8c7c0a2bbfa73811411c4d11a7a96c7e900b4620c96f9b75c4ff3c89ff275b43cd325110b79f27fdf42b7a4902f621ecfc5b7ccdce91a66cb79d44a8bbca6192cb8a89f7b0867184492a27ad5bdc5c495a81ec9134cd7a124478e4242a7d9385c337d916bba3c09c08e5562e02f04969a0cc1f04ff202165f3c92c1d3c983cce484821ca0b28c2043b62b221e42bb5ea1c3db8e6afcb33fd17119b43cbac60559fb6e5dd78147f9505d938b4fe5eb2e3a9a4b0723f2525a2cace59018afe7e2091b8314881a7374ff8bf00405cf2422a5c5004c384f6d466f1b4a4b318a0cae49defdee6d22b569af7538421ca028884f40d8d8f797efb133f8ee4f461c3029dadc29f85f0b63971cafd1bad14c9ab3c1b8ff4cc359d95680bdbb72e61fe5b43a06aa4fff3e8c0ae49cb2f393dc23e99d72dc9ac23c5d6dae2eae639960a6cb097e182520d5202b95dbaae8c0061d42d7c6a6c9bf1e66aab58cdc2f4189e076684fd7b033bfec706bc60857096810413deebad931e73504e66d244e7a871ec44cc86e4fd866e49a7690db3567491255a60f2fa465af1c301cdcd8b9e0626acff85eb485b43b09eabe42d74c34f04870b1a552b2213950454715bd5e31a784ecc7e2adfbe260cecd086e06b8afb5823d9c370b1640fa9224c901fb6d744aa26f67d61cbc48df2a3b510e3330eba9a5c48a6f423f9ebd5e2636930757240565f5b1f5e57272ed1d86c4118381f4de65fb6c031e9269ba62e755137e5ad78ef199278a569da10ae61f9a5641097c14e05dc6a00ea3d914faae91337bfb68f25eff1ce3a8c2a037ecf1883647c19af910cf1e277629898a7a20ccbfa734dd37752427fca0a5132c7c5ac0494de299dac87c78db0e34f7f022bca93cf1dab5640634f52c8c63164967d1bc961a57a6c1a9b042bccfa5ab99039a9e042bf585e09561f9a41bd4d78fba866d403beecd86bc9ebbad927cc6784fc9cebd1df2538e8a62633cca6dc0fbd0898ea754bee73cad7b1cae57c3a047f44b11cb454fb6972f69270c36ca8dd39895f1a9a18e50ff6ab14434bfc80f1ba755b98ee90c7f47f742d1cdde19c5026ff73bd1c931361f57b2590641895eb1847f72990204c86581b517a41efa8d5a99433c454a251e901bfdc71f2d5473dbc292f42a70b4d2a19a43779fb8f035ba71a5b17ac9297c5bf1aa4769d3f3b10ab8f9bc7b111065fa1e1283137c6c17df057cd16ae7e0d1538d34df4bf488d21d39e9b6f3fd01443a45f553e62351f5978f04dcc868c53da29aae540d7508fbb78d5711ec4f6386fe35fe9f234cc2b1d9c5d91241ac2c880d042870d3ec3ab820871fea46859dd728e0b116642f04a390e0ccc9a36625f01868e40c21e573b2ac4549999cd5571bbc4dc08e486b16ff3721d4edee4a171e77cfa45ff16f1c2d2beb7ce73112bc71b2ca7aa41a29cc10e13e87a00f40623362338d0a3180a1e4d002e312d9df795abde1d2e336fecfe2002b592e5411ec88fea29a4a5ac5f5b6e3a245bd52778e499125a6e3333814b34417e793a224e891ca5c4ad21f4dcd0dfcb1131174ef1976b9a13fba06122cfec17e278e3e4d6bc5e123a3ac535230927443215256bdf07a80f79f34918c3c44d62f0bd02cc19862ffa178af8029f40919e5cb10b955ac08532c1ff122af0180b32bf8f94a181fcee5fe963817ebc92f3e38e5fbd36fa85140f455f343dc19ba071cf1ffc76f195408d1dd16a2f65220c6e94109bb8ad56433c34de638dde5ce6794c6d863f0713ef6e9fa82aff8216128b9ada8a830cce9b5f047a82f08ad6d8047733342fd1c3b5a085cd96d4edf0081d28a75d2918031068f5824c10182b47723752b9b47ab9fe5189184254917391e9a2e0dff4fac07de3b010bd250c4d07c9a7950a430b545de6ffab5904249e3807eb1ad74a33c0cf3c722cf1c23143f480672d42bdbd7fcba9a0290c3d91188e248c043ae84cbcc10eaab92ded340cba0b1a972621c62d509ecabade0a59f2eced461cae314a5d43a4e0a9dc2a70687d7bc31404e0a7e79a6fcbca9c4b2f879b0c9fdbb91213633d609f780089f7039286cebdc68f5290ff95102230fd4a403d75d0994599fd02e5db3fdc17ee9382310987d87d5c475e945541ca3745c1bde7d7d2ef57a78794db9941ba373b6c82d7eb1191634e5e0894e8acf02b8bc14d7e873c366d9654f48dfec6b014014c67d471117c1b8e4f094f547830f1707889f50b67870d467f6c8cafe9f0099d126fbe106a21941c633639e6de76e36081f3adc4b122aa1436df483a706dc2a5591c5fc4c15873c7858f3edd0133bac1116ebeda1a51ba726e70a7c744dfcf90f22021ddfb633a6253d3395bd36e11ae2e752da2fa8f0c4593f627eafa9166b569d00f5ec7683aeb08a6ed0b5580281deaf158cbbbfccc47093e51007f5ba79565e73e219f4aeb16a19782cf6b858d26547a909307384d267776c184735fd4a112caccef1fbe60e0772d87dda0e65a0bc3ae05cf87a39fcebee8a00ada3617a986a375d2a20b47c69967fd3cba70d839d75899463a09e8cc3cc3d8fade2b94d1f6956304a9f086b9f5aae20c0996678b905c64c38419fcfc555a7914d532d16a32e2fce1bb60dc5f9a8acd8789a35a04395acc33f8b97873277749804c550f4cd4ef129410b63573bda0a5852c269f8e6f381f8d4b9e908aa5b16ea9782dc3ff8b0fff7f9761ef1c536177e5322d1e06d3fc0889585fa6bef511a1e0fa971f96f7b6c7d11fa6bdccd8fa05946ab7b5790be4fd05638aca719610bba8cd4dcad47a8364f037230ea61b3602f99c33c667ffbc421e828ee3470518a3a2ef0d4f658bc1400600cdea792f9a6f525881867d6bee6bf70b1585dd672e1c70fb105700e6a5529ed2063e5f1e5359525a32922b6487eba57b706623e48c680c8253900380ab8e5f804c3e1bb6d21c4aa22006d9ac5c375815d82caf45c1915e41c367f650fa8c4878e05e89148af60563a0c5d3c4f76d3c734499dcad35def61d0d6e53f8f65d5a9bf8cb77d5df9f3e926993f1014f11bddcd7c86edb8345a55ae4e8024b4a5225bdc37f3ebecb29d704de20d8cf2bcf9dc0739e17826c0dbfc081016380e488fdb38c3ddc9562496a0cb6c4161c2170e8d07b35ddbe37011d0a46bc3175f4e156b9c54262f994cccad78f7a0eac99d8c8ddf86707540df820bde081c88520abe69ada04e19f599a45a11b4e0805ae62416155c2ddbd5ee980247758251fe551ebedcf27243975cd55d9a983fcb357e8d235ca04cadbb74b4a73168834be4db3bdf82123c8565164155bc48cd7e3d09f53ee160d8c6fcef33cf181eb3e0c3df529b923edccd7656ffa5fadc7df5b9419327f0229261a6d041c15bc33ae9b6b6d5d312b94d9a3fc50c71d30d534f5b7e589c7915450f524e7988b4af2266fa782b15242985bfc6cd8d6a10258359ed104a8096a80610535fcbabd507d1eae53f599198439d63370b61cd9338962b7962a1c7c5dd43de427d8cb84a81332517469fd48e56c02173cf6743a04a4701837286387945eed36dffc451d1407124ed56a645bb40b67386f8ace451e0e4dc79ef38a25ef4037185b68f378c4b998e0b653f8c96ec7338cd7cd86ad887caca3086cce7c7f684646349a95353389efa3957ff8c416689fb41673ab8a858c858a01b6bbdafef5ab27cd7213994ca0d4c612488b94d9268a48fd36eedbd7caa4a4bc95b4819275fddf91820466f7e5576c626573bd1839c47dc000ae8f499917dd156f26fe27a4e8f2074ee5122f77bbfcdf8466efb6489f8cdb8c978874be1df3ebe71909e00bca5b878c477e40e11c604bb44239c9422bb72811c5fe146122f01bde49ffb152dafce3e7f569f82a57a15fa450b31fc67822827aa97140a51d7b445f9556531e124dc287e50c582791b5be7ebed4d5fcb598d7b14b8e2312e391f653e7e2ec67488fc6733753bb6bf1bfa3f6aca02de614888e370cc76be7cceb533a4afee66f346bc6756d923de0273a75716d7b5e5e4375cdd38837d0cda4dc24abe8320d0c714d34d14ab7fdb2c7cdee887063c2fc5dd0c66be7b3047f6a57723ebda67f584b1c1cb11cc68ccfb67fbfdf098f85b542e26ece4bc857a9fea26214371c7142d102b696b76488ae6bf7871f7a7773d44aa482771e11d8f2bb5bc66af3f49d592ab</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> é€†å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é€†å‘ </tag>
            
            <tag> ç ´è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºMaterialä¸»é¢˜æºç çš„ä¸€äº›å°ä¿®æ”¹ï¼ˆä¿®å¤Bugï¼Ÿï¼‰</title>
      <link href="/posts/832fa05b.html"/>
      <url>/posts/832fa05b.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h3 id="ä¸€ã€æ’ä»¶hexo-prism-pluginå®ç°ä»£ç é«˜äº®å¯¼è‡´çš„è¡Œå·ä¸æ˜¾ç¤ºé—®é¢˜"><a href="#ä¸€ã€æ’ä»¶hexo-prism-pluginå®ç°ä»£ç é«˜äº®å¯¼è‡´çš„è¡Œå·ä¸æ˜¾ç¤ºé—®é¢˜" class="headerlink" title="ä¸€ã€æ’ä»¶hexo-prism-pluginå®ç°ä»£ç é«˜äº®å¯¼è‡´çš„è¡Œå·ä¸æ˜¾ç¤ºé—®é¢˜"></a>ä¸€ã€æ’ä»¶<code>hexo-prism-plugin</code>å®ç°ä»£ç é«˜äº®å¯¼è‡´çš„è¡Œå·ä¸æ˜¾ç¤ºé—®é¢˜</h3><p>ä»<a href="https://material.viosey.com/docs/#/expert">å®˜æ–¹æ–‡æ¡£</a>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°mdä¸»é¢˜æ”¯æŒçš„ä»£ç é«˜äº®æ–¹å¼ï¼š<br><img src="/images/document-md+code.png" alt="document-md+code"></p><p>ç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯<a href="https://github.com/viosey/hexo-theme-material/releases/tag/1.4.0">1.4.0ç¨³å®šç‰ˆ</a>ï¼ˆæ—¶é—´20180722ï¼‰ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨ <code>hexo-prism-plugin</code> æ’ä»¶ï¼Œå…·ä½“ç”¨æ³•<a href="https://github.com/ele828/hexo-prism-plugin">å®˜æ–¹æ–‡æ¡£</a>è®²çš„å¾ˆè¯¦ç»†æˆ‘å°±ä¸å¤šè¯´äº†ã€‚</p><h4 id="æ•²é»‘æ¿ï¼Œé‡ç‚¹é‡ç‚¹ï¼ï¼ï¼"><a href="#æ•²é»‘æ¿ï¼Œé‡ç‚¹é‡ç‚¹ï¼ï¼ï¼" class="headerlink" title="æ•²é»‘æ¿ï¼Œé‡ç‚¹é‡ç‚¹ï¼ï¼ï¼"></a>æ•²é»‘æ¿ï¼Œé‡ç‚¹é‡ç‚¹ï¼ï¼ï¼</h4><p>æˆ‘åœ¨è¿™é‡Œä¸»è¦è¯´ä¸€ä¸‹1.4.0ç‰ˆçš„mdä¸»é¢˜å¯¹ <code>hexo-prism-plugin</code> æ’ä»¶ä¼¼ä¹ä¸å¤ªå…¼å®¹ã€‚</p><a id="more"></a><p>è¿™æ˜¯æˆ‘çš„ prism æ’ä»¶é…ç½®ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">prism_plugin:</span><br><span class="line">  mode: &#x27;preprocess&#x27;    # realtime/preprocess</span><br><span class="line">  theme: &#x27;solarizedlight&#x27;</span><br><span class="line">  line_number: true    # default false</span><br></pre></td></tr></table></figure><p>å†ç»™ä½ ä»¬çœ‹ä¸€ä¸‹æˆªå›¾ï¼š<br><img src="/images/bug-MD+prism.png" alt="bug-MD+pris"></p><p>æ˜¯ä¸æ˜¯æ„Ÿè§‰æœ‰ä»€ä¹ˆä¸å¯¹åŠ²ï¼Ÿï¼Ÿ</p><p>ç›¸ä¿¡çœ‹åˆ°è¿™é‡Œå¤§å®¶åº”è¯¥éƒ½çŸ¥é“ä»€ä¹ˆå›äº‹äº†ï¼Œ<code>line_number</code>æˆ‘è®¾ç½®ä¸º<code>true</code>è¡¨ç¤ºæˆ‘å¼€äº†è¡Œå·æ˜¾ç¤ºï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬çš„è¡Œå·å‘¢ï¼Ÿè¿˜æœ‰é‚£ä¸ªè¯¡å¼‚çš„ç«–çº¿æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ</p><p>äºæ˜¯æˆ‘ç”¨chromeçš„å¼€å‘è€…æ¨¡å¼è°ƒè¯•äº†ä¸€ä¸‹ï¼Œå‘ç°äº†ä¸€ä¸ªå¾ˆçœ¼ç†Ÿçš„CSSå±æ€§â€”â€”<code>padding</code>ã€‚å¦‚å›¾ï¼š<br><img src="/images/md-css-contentpre-padding.png" alt="md-css-contentpre-padding"></p><blockquote><p>è¿™é‡Œç»™æ²¡å­¦è¿‡ç¼–ç¨‹çš„åŒå­¦ç§‘æ™®ä¸€ä¸‹<code>padding</code>æ˜¯ä»€ä¹ˆæ„æ€ï¼š</p><p>å…ˆæ”¾ä¸ªW3Schoolçš„é“¾æ¥å‹å‹æƒŠ= =ï¼š<a href="http://www.w3school.com.cn/cssref/pr_padding.asp">CSS padding å±æ€§</a></p><p><strong>paddingå®šä¹‰å’Œç”¨æ³•ï¼š</strong><br>padding ç®€å†™å±æ€§åœ¨ä¸€ä¸ªå£°æ˜ä¸­è®¾ç½®æ‰€æœ‰å†…è¾¹è·å±æ€§ã€‚<br>ä¾‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">padding</span><span class="selector-pseudo">:10px</span>;</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼äºè¿™ç§çš„æ„æ€å°±æ˜¯ä¸Šä¸‹å·¦å³å››ä¸ªå†…è¾¹è·éƒ½æ˜¯ 10pxã€‚</p></blockquote><blockquote><p>é‚£ä¹ˆå†…è¾¹è·åˆæ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ<br>çœ‹å›¾ï¼š<br><img src="/images/explain-padding.jpg" alt="explain-padding"><br>æ‰€ä»¥<strong>å†…è¾¹è·</strong>çš„æ„æ€å°±æ˜¯<font color='#6EA1DF'>ç»„ä»¶çš„å†…å®¹</font>åˆ°<font color='#D1AF40'>è¾¹æ¡†</font>çš„<font color='#81A670'>è·ç¦»</font>ã€‚å†…è¾¹è·çš„æ”¹å˜ä¸ä¼šå½±å“æ•´ä¸ªç»„ä»¶çš„å¤§å°ï¼Œä½†æ˜¯ä¼šå½±å“ç»„ä»¶å†…å®¹çš„æ˜¾ç¤ºå¤§å°</p></blockquote><p>åºŸè¯å°±ä¸å¤šè¯´äº†â€¦..<br>æˆ‘çš„ç›´è§‰å‘Šè¯‰æˆ‘å°±æ˜¯å®ƒçš„é”…ï¼Œæˆ‘ä»¬ç°åœ¨æ¥æŠŠå®ƒå»æ‰è¯•è¯•ï¼<br><img src="/images/md-css-contentpre-nopadding.png" alt="md-css-contentpre-nopadding"></p><p>Unbelievable! <font color='red'><strong>è¡Œå·å‡ºç°äº†ï¼</strong></font>ä½†æ˜¯åœ¨Chromeçš„å¼€å‘è€…æ¨¡å¼æ”¹åªæ˜¯ä¸´æ—¶çš„ï¼Œåˆ·æ–°å°±å›åˆ°åŸæ¥çš„æ ·å­äº†ï¼Œæˆ‘ä»¬è¦å»ä¸»é¢˜çš„æºä»£ç ä¿®æ”¹ã€‚</p><p>ç»è¿‡ä¸€ç•ªæŸ¥æ‰¾ç»ˆäºæ‰¾åˆ°äº†ç›¸å…³ä»£ç æ‰€åœ¨çš„æ–‡ä»¶<code>hexoæ ¹ç›®å½•/themes/material/source/css/style.min.css</code><br><img src="/images/md-css-stylemin.png" alt="md-css-stylemin"></p><blockquote><p><strong>æ³¨æ„ï¼š</strong>æ˜¯<code>style.min.css</code>è¿™ä¸ªå‹ç¼©è¿‡çš„cssæ–‡ä»¶ï¼Œè€Œä¸æ˜¯<code>style.css</code>ï¼ï¼</p></blockquote><p>æ‰“å¼€<code>style.min.css</code>ï¼ŒæŸ¥æ‰¾<code>padding:1pc</code>æˆ–è€…<code>#post-content pre</code>éƒ½OKï¼Œç„¶åæŠŠ<code>padding:1pc;</code>æ³¨é‡Šæ‰å³å¯ã€‚å¦‚å›¾ï¼š<br><img src="/images/md-css-stylemin-padding-commented.png" alt="md-css-stylemin-padding-commented"></p><hr><h3 id="äºŒã€æ–‡ç« ç»“å°¾æ·»åŠ ç‰ˆæƒå£°æ˜"><a href="#äºŒã€æ–‡ç« ç»“å°¾æ·»åŠ ç‰ˆæƒå£°æ˜" class="headerlink" title="äºŒã€æ–‡ç« ç»“å°¾æ·»åŠ ç‰ˆæƒå£°æ˜"></a>äºŒã€æ–‡ç« ç»“å°¾æ·»åŠ ç‰ˆæƒå£°æ˜</h3><blockquote><p>å‚è€ƒï¼š<a href="http://tianma.space/post/1810369046/index.html">http://tianma.space/post/1810369046/index.html</a></p></blockquote><p>ç°åœ¨æ˜¯ç‰ˆæƒæ—¶ä»£ï¼Œå¾ˆå¤šåšä¸»éƒ½ä¼šåœ¨æ–‡ç« ç»“å°¾å‡ºå†™ä¸Šè¯¸å¦‚â€œè½¬è½½è¯·ä¿ç•™å£°æ˜ä¿¡æ¯â€ä¹‹ç±»çš„ã€‚ä¸‹é¢æˆ‘æ¥è¯´ä¸‹å¦‚ä½•åœ¨ Hexo ä¸­æ·»åŠ ç‰ˆæƒå£°æ˜ã€‚è¿™é‡Œæˆ‘æ‹¿ Material ä¸»é¢˜ä½œä¸ºä¾‹å­ï¼Œå…¶ä»–ä¸»é¢˜å¯å‚è€ƒåè‡ªè¡Œä¿®æ”¹ã€‚</p><ol><li><p>è‡ªå®šä¹‰å­—æ®µï¼šè€ƒè™‘åˆ°æœ‰äº›åšæ–‡å¯èƒ½æ˜¯ä¸éœ€è¦ç‰ˆæƒå£°æ˜çš„ï¼Œæ¯”å¦‚è½¬è½½ã€ç¿»è¯‘ä¹‹ç±»çš„ï¼Œæ‰€ä»¥è‡ªå®šä¹‰ post_license ä½œä¸ºå¼€å…³ï¼š</p><ul><li><p>ä¸»é¢˜é…ç½®æ–‡ä»¶ _config.yml ä¸­æ·»åŠ å­—æ®µï¼Œä½œä¸ºæ€»å¼€å…³ï¼š</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">post_license:</span><br><span class="line"><span class="built_in">enable</span>: <span class="literal">true</span> <span class="comment"># or false</span></span><br></pre></td></tr></table></figure></li><li><p>æ–‡ç« çš„ Front-matter ä¸­æ·»åŠ å­—æ®µï¼Œä½œä¸ºç‹¬ç«‹å¼€å…³ï¼š</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_license: <span class="literal">true</span> <span class="comment"># or false</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>åˆ›å»º material/layout/_partial/post_license.ejs:</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;post-license&quot;</span> <span class="attr">class</span>=<span class="string">&quot;post-license&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;post-license-author&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">strong</span>&gt;</span>æœ¬æ–‡ä½œè€…ï¼š<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= config.url %&gt;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">theme.author</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;post-license-link&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">strong</span>&gt;</span>æœ¬æ–‡é“¾æ¥ï¼š<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= page.permalink %&gt;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">page.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;post-license-statement&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">strong</span>&gt;</span>ç‰ˆæƒå£°æ˜ï¼š <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">           æœ¬æ–‡ç”± <span class="tag">&lt;<span class="name">%=</span> <span class="attr">config.author</span> %&gt;</span> åŸåˆ›ï¼Œé‡‡ç”¨ <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;license&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«ï¼ˆCC BY-NC-SAï¼‰4.0 å›½é™…è®¸å¯åè®®<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">br</span>&gt;</span>è½¬è½½è¯·ä¿ç•™ä»¥ä¸Šå£°æ˜ä¿¡æ¯ï¼</span><br><span class="line">       <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ material/layout/_partial/post-content.ejs å¼•å…¥ post_license.ejs:</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span>(theme.post_license.enable &amp;&amp; page.post_license !== <span class="literal">false</span>)&#123;%&gt;</span><br><span class="line">   &lt;%- partial(<span class="string">&#x27;_partial/post_license&#x27;</span>) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ material/source/css/style.min.css ä¸­æ·»åŠ  ç‰ˆæƒå£°æ˜ æ ·å¼ï¼š</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#post-license</span> &#123;</span><br><span class="line">   <span class="attribute">margin</span>: <span class="number">2em</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">0.5em</span> <span class="number">1em</span>;</span><br><span class="line">   <span class="attribute">border-left</span>: <span class="number">3px</span> solid <span class="number">#ff4081</span>;</span><br><span class="line">   <span class="attribute">background-color</span>: <span class="number">#f9f9f9</span>;</span><br><span class="line">   <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="ä¸‰ã€Disquså»¶è¿ŸåŠ è½½"><a href="#ä¸‰ã€Disquså»¶è¿ŸåŠ è½½" class="headerlink" title="ä¸‰ã€Disquså»¶è¿ŸåŠ è½½"></a>ä¸‰ã€Disquså»¶è¿ŸåŠ è½½</h3><p><font color='red'>â˜†â˜† 2018-08-11 æ›´æ–°ï¼šMaterialä¸»é¢˜1.5.6ç‰ˆæœ¬å¼€å§‹<code>disqus_click</code>è‡ªå¸¦å»¶è¿ŸåŠ è½½ â˜†â˜†</font></p><blockquote><p>å‚è€ƒï¼š<a href="https://blog.itswincer.com/posts/e5d13eb/">https://blog.itswincer.com/posts/e5d13eb/</a></p></blockquote><p><strong>å…ˆè®²ä¸‹è€ƒè™‘å»¶è¿ŸåŠ è½½çš„åˆè¡·ï¼š</strong><br>å¥½å§ï¼Œå…¶å®æ˜¯å› ä¸ºåœ¨å¤§å±€åŸŸç½‘å†…æ²¡æ³•åšåˆ°æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½çœ‹è¯„è®ºï¼Œå¦‚æœåŠ è½½ä¸å‡ºè¯„è®ºå°±ä¼šæœ‰ä¸€æ®µæ—¶é—´åœ¨ä¸‹æ–¹æ˜¾ç¤ºç™½å—ï¼Œå¼ºè¿«ç—‡çš„æˆ‘æ€ä¹ˆèƒ½å¿å—ï¼Ÿï¼Ÿï¼ï¼äºæ˜¯æˆ‘å°±æƒ³æŠŠè¯„è®ºåŠŸèƒ½è®¾è®¡æˆç½‘ç»œå¥½çš„è¯å°±è‡ªåŠ¨æ˜¾ç¤ºè¯„è®ºï¼Œå¦åˆ™éœ€è¦æ‰‹åŠ¨ç‚¹å‡»ã€‚æ­£å¥½çœ‹åˆ°ç½‘ä¸Šæœ‰ï¼Œäºæ˜¯å°±å€Ÿé‰´äº†ã€‚</p><p><strong>ç„¶åè¯´ä¸‹åŸç†ï¼š</strong><br>åŸç†å˜›ï¼Œå…ˆç”¨ ajax å¼‚æ­¥å‘é€ä¸€ä¸ª get è¯·æ±‚è‡³ Disqus æœåŠ¡å™¨ï¼Œæ¥æ”¶æˆåŠŸåˆ™å±è”½æŒ‰é’®ï¼ŒåŠ è½½è¯„è®ºï¼›è¶…æ—¶åˆ™è‡ªåŠ¨æ–­å¼€ï¼Œå¹¶æ˜¾ç¤ºåŠ è½½æŒ‰é’®ï¼š</p><p>ä¿®æ”¹æ–‡ä»¶ä½ç½®ï¼š<code>&lt;Materialä¸»é¢˜ç›®å½•&gt;/layout/_widget/comment/disqus_click/main.ejs</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn_click_load&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;disqus_click_btn&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">__</span>(&#x27;<span class="attr">post.comments_load_button</span>&#x27;) %&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">&lt;script type=&quot;text/ls-javascript&quot; id=&quot;disqus-lazy-load-script&quot;&gt;</span></span><br><span class="line"><span class="comment">    $(&#x27;.btn_click_load&#x27;).click(function() &#123;  //click to load comments</span></span><br><span class="line"><span class="comment">        (function() &#123; // DON&#x27;T EDIT BELOW THIS LINE</span></span><br><span class="line"><span class="comment">            var d = document;</span></span><br><span class="line"><span class="comment">            var s = d.createElement(&#x27;script&#x27;);</span></span><br><span class="line"><span class="comment">            s.src = &#x27;//&lt;%= theme.comment.shortname %&gt;.disqus.com/embed.js&#x27;;</span></span><br><span class="line"><span class="comment">            s.setAttribute(&#x27;data-timestamp&#x27;, + new Date());</span></span><br><span class="line"><span class="comment">            (d.head || d.body).appendChild(s);</span></span><br><span class="line"><span class="comment">        &#125;)();</span></span><br><span class="line"><span class="comment">        $(&#x27;.btn_click_load&#x27;).css(&#x27;display&#x27;,&#x27;none&#x27;);</span></span><br><span class="line"><span class="comment">    &#125;);</span></span><br><span class="line"><span class="comment">&lt;/script&gt;</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span></span></span><br><span class="line"><span class="tag">/*</span></span><br><span class="line"><span class="tag">å»¶è¿ŸåŠ è½½ <span class="attr">disqus</span>ï¼Œ<span class="attr">timeout</span> å¯ä»¥è‡ªå·±è®¾ç½®æ—¶é•¿</span></span><br><span class="line"><span class="tag">*/</span></span><br><span class="line"><span class="tag">%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">id</span>=<span class="string">&quot;disqus-lazy-load-script&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">    $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">    url: <span class="string">&#x27;https://disqus.com/next/config.json&#x27;</span>,</span></span><br><span class="line">    timeout: 1000,</span><br><span class="line"><span class="javascript">    type: <span class="string">&#x27;GET&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    success: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> d = <span class="built_in">document</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> s = d.createElement(<span class="string">&#x27;script&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        s.src = <span class="string">&#x27;//&lt;%= theme.comment.shortname %&gt;.disqus.com/embed.js&#x27;</span>;</span></span><br><span class="line"><span class="javascript">        s.setAttribute(<span class="string">&#x27;data-timestamp&#x27;</span>, + <span class="keyword">new</span> <span class="built_in">Date</span>());</span></span><br><span class="line">        (d.head || d.body).appendChild(s);</span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.disqus_click_btn&#x27;</span>).css(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;none&#x27;</span>);</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    error: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.disqus_click_btn&#x27;</span>).css(<span class="string">&#x27;display&#x27;</span>, <span class="string">&#x27;block&#x27;</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span></span></span><br><span class="line"><span class="tag">/*</span></span><br><span class="line"><span class="tag">ç”±äºæˆ‘è¶…æ—¶æ—¶é•¿è®¾ç½®å¾—æ¯”è¾ƒçŸ­ï¼Œæ‰€ä»¥å¯èƒ½ç¿»å¢™äº†è¿˜æ˜¯æ²¡æœ‰è‡ªåŠ¨åŠ è½½è¯„è®ºï¼Œè¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨ç‚¹å‡»åŠ è½½äº†</span></span><br><span class="line"><span class="tag">*/</span></span><br><span class="line"><span class="tag">%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">id</span>=<span class="string">&quot;disqus-click-load&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;.btn_click_load&#x27;</span>).click(<span class="function">() =&gt;</span> &#123;  <span class="comment">//click to load comments</span></span></span><br><span class="line"><span class="javascript">        (<span class="function">() =&gt;</span> &#123; <span class="comment">// DON&#x27;T EDIT BELOW THIS LINE</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> d = <span class="built_in">document</span>;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> s = d.createElement(<span class="string">&#x27;script&#x27;</span>);</span></span><br><span class="line"><span class="javascript">            s.src = <span class="string">&#x27;//&lt;%= theme.comment.shortname %&gt;.disqus.com/embed.js&#x27;</span>;</span></span><br><span class="line"><span class="javascript">            s.setAttribute(<span class="string">&#x27;data-timestamp&#x27;</span>, + <span class="keyword">new</span> <span class="built_in">Date</span>());</span></span><br><span class="line">            (d.head || d.body).appendChild(s);</span><br><span class="line">        &#125;)();</span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.disqus_click_btn&#x27;</span>).css(<span class="string">&#x27;display&#x27;</span>,<span class="string">&#x27;none&#x27;</span>);</span></span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘æ˜¯æŠŠåŸæ¥çš„æ³¨é‡Šæ‰å†åŠ åé¢çš„ï¼Œé“¾æ¥ä¸­è¯´è¶…æ—¶æ—¶é—´è®¾ä¸º<code>300</code>æ¯”è¾ƒçŸ­ï¼Œçš„ç¡®çŸ­ï¼Œæˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œè®¾ç½®ä¸º<code>1000</code>å°±ä¸å½±å“é˜…è¯»äº†ã€‚</p><blockquote><p><strong>æ³¨æ„ï¼š</strong>æ”¹å®Œåè®°å¾—ç¡®è®¤<code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code>æ˜¯å¦å¯ç”¨äº†<code>disqus_click</code></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> hexoä¸»é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¨ç«™å¼€å¯httpsæ€»ç»“ï¼ˆè‰°è‹¦å†ç¨‹ï¼Ÿï¼‰</title>
      <link href="/posts/41e1ea07.html"/>
      <url>/posts/41e1ea07.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨æ­å»ºå®ŒHexoä¹‹åï¼Œæˆ‘å°±å¼€å§‹æ€è€ƒè¦ä¸è¦é…ç½®httpså‘¢ï¼Ÿæœ€åæ·±æ€ç†Ÿè™‘ï¼Œè¿˜æ˜¯å†³å®šä¸Šhttpså§ï¼æ¯•ç«Ÿç°åœ¨httpså·²ç»å¼€å§‹æ™®åŠï¼ŒåƒChromeã€Firfoxè¿™äº›æµè§ˆå™¨å¦‚æœä¸æ˜¯httpsåè®®çš„ä¼šæç¤ºå¦‚ä¸‹å›¾ï¼Œè­¦å‘Šâ€œä¸å®‰å…¨â€ä»€ä¹ˆçš„ã€‚å¼ºè¿«ç—‡æ‚£è€…è¡¨ç¤ºçœ‹ç€æœ€ä¸èˆ’æœäº†ï¼ˆé€ƒï½<br><img src="/images/http%20browser%20show.jpg" alt="http browser sho"></p><p>äºæ˜¯æˆ‘å°±å¼€å§‹äº†é…ç½®httpsä¹‹è·¯â€¦â€¦</p><p><strong><font color="red">2018-12-02æ›´æ–°ï¼šæ·»åŠ <a href="#%E8%A1%A5%E5%85%85%EF%BC%9A%E8%8E%B7%E5%8F%96-Let%E2%80%99s-Encrypt-%E9%80%9A%E9%85%8D%E7%AC%A6%E8%AF%81%E4%B9%A6">é€šé…ç¬¦è¯ä¹¦ç”³è¯·æ–¹æ³•</a></font></strong></p><a id="more"></a><h1 id="SSLè¯ä¹¦"><a href="#SSLè¯ä¹¦" class="headerlink" title="SSLè¯ä¹¦"></a>SSLè¯ä¹¦</h1><h2 id="é€‰å–åˆé€‚çš„sslè¯ä¹¦"><a href="#é€‰å–åˆé€‚çš„sslè¯ä¹¦" class="headerlink" title="é€‰å–åˆé€‚çš„sslè¯ä¹¦"></a>é€‰å–åˆé€‚çš„sslè¯ä¹¦</h2><p>https = http + sslï¼Œæ‰€ä»¥è¦èµ°httpsåè®®é¦–å…ˆè¦ç”³è¯·sslè¯ä¹¦ã€‚<br>ä½†æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å»ºç«™ï¼Œå¯¹sslè¯ä¹¦ä¸€ç‚¹éƒ½ä¸æ‡‚å•Šï¼ï¼å“ªä¸ªsslè¯ä¹¦æ›´å¥½æˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œå»æœç´¢ä¸€ç¿»å‘ç°å„ç§è¯´æ³•ï¼Œæœ€åè¿˜æ˜¯å»è¯·æ•™äº†å„ä½å‰è¾ˆã€‚<br>ç»è¿‡å„ä½å‰è¾ˆçš„å»ºè®®ï¼Œæˆ‘äº†è§£åˆ°äº†<code>Let&#39;s Encrypt</code>ï¼Œè¯¦ç»†ä»‹ç»æˆ‘å°±ä¸è¯´äº†ï¼Œè¿™æ˜¯<a href="https://zh.wikipedia.org/zh-hans/Let%27s_Encrypt">å®ƒåœ¨ç»´åŸºç™¾ç§‘çš„èµ„æ–™</a>ï¼Œç„¶åè¿™æ˜¯<a href="https://letsencrypt.org/">å®˜ç½‘</a></p><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰<a href="https://www.digicert.com/">Digicert</a>ã€<a href="https://www.sslforfree.com/">SSL For Free</a>ã€<a href="http://www.cacert.org/">CA Cert</a>ã€‚Digicertå¾ˆè´µï¼Œä½†æ˜¯æ®æŸä½å‰è¾ˆè¯´ä¼¼ä¹å¤§ä¼ä¸šå–œæ¬¢ç”¨å®ƒçš„æŒºå¤šï¼Œè€Œä¸”äººå®¶è¿˜æ”¯æŒç­¾å‘ .onion åŸŸåçš„è¯ä¹¦ï¼ˆEVï¼‰ã€‚</p><p>çœ‹è‡ªå·±éœ€æ±‚å§ï¼Œæˆ‘æœ€åè¿˜æ˜¯ç”¨äº†<code>Let&#39;s Encrypt</code>ã€‚<br>è€çˆ¶äº²è¯´è¿™æ˜¯å…è´¹çš„ï¼Œä½†éªŒè¯è¿‡ç¨‹è¦åœ¨æœåŠ¡å™¨ä¸Šåšï¼Œæœ‰ç‚¹å¤æ‚ã€‚æˆ‘è§‰å¾—å¤æ‚ç‚¹æ²¡æ‰€è°“ï¼Œå¥½ç”¨å°±è¡Œã€‚<br>æŸç¾¤é‡Œçš„å‰è¾ˆè¯´ä¹Ÿå¯ä»¥ä¸éªŒè¯ï¼Œè‡ªç­¾åå°±å¥½ï¼ˆå…¶å®æˆ‘è¿˜æ²¡æ‡‚å“ˆå“ˆå“ˆï¼Œå°´å°¬.jpgï¼‰ï¼›å‰è¾ˆä»¬è¿˜è¯´äº†ä¸€ç§DNSæ–¹å¼éªŒè¯ï¼Œä¸éœ€è¦æ¶è®¾é¢å¤–æœåŠ¡ï¼›åœ¨æˆ‘é—®äº†â€œLetâ€™s encryptç”¨standaloneè¿˜æ˜¯webrootæ¨¡å¼æ›´å¥½â€ä¹‹å(å…¶å®è¿™ä¸ªæˆ‘ä¹Ÿä¸æ‡‚)ï¼Œ<font color='red'><strong>ç»ˆäºå†³å®šç”¨DNSæ¨¡å¼</strong></font>ï¼ŒDNS æ¨¡å¼æ›´æ–¹ä¾¿ï¼Œè¿˜å¯ä»¥ç­¾é€šé…ç¬¦è¯ä¹¦ã€‚</p><h2 id="å¼€å§‹è·å–SSLè¯ä¹¦"><a href="#å¼€å§‹è·å–SSLè¯ä¹¦" class="headerlink" title="å¼€å§‹è·å–SSLè¯ä¹¦"></a>å¼€å§‹è·å–SSLè¯ä¹¦</h2><blockquote><p>å‚è€ƒï¼š<a href="http://www.racksam.com/2016/12/26/centos-nginx-setup-lets-encrypt-with-acme-sh/">ä½¿ç”¨acme.shè„šæœ¬çš„DNS APIæ–¹å¼ç”³è¯·åŠæ›´æ–°letâ€™s encryptè¯ä¹¦</a></p></blockquote><p>ç¾¤é‡Œå¤šä½å‰è¾ˆä»‹ç»äº†ä¸€ä¸ªåœ¨ Linux ä¸Šç”³è¯·letâ€™s encryptè¯ä¹¦çš„è„šæœ¬â€”â€”<a href="https://github.com/Neilpang/acme.sh">acme.sh</a></p><h3 id="acme-shè„šæœ¬"><a href="#acme-shè„šæœ¬" class="headerlink" title="acme.shè„šæœ¬"></a>acme.shè„šæœ¬</h3><p>LinuxæœåŠ¡å™¨ä¸‹ä½¿ç”¨acme.shè„šæœ¬æ˜¯ç”³è¯·letâ€™s encryptè¯ä¹¦æœ€ä¾¿æ·çš„æ–¹å¼ï¼Œæ¯”å®˜æ–¹æ¨èçš„<code>certbot</code>è„šæœ¬å·¥å…·è¦æ–¹ä¾¿å¼ºå¤§çš„å¤šã€‚å¥½å¤„æ˜¯å¯¹ç¯å¢ƒè¦æ±‚è¾ƒä½ï¼Œè·¯ç”±å™¨ä¸Š busybox ash éƒ½èƒ½è·‘ï¼Œåªéœ€è¦ä½¿ç”¨åˆ° curl ç­‰å°‘æ•°å‡ ä¸ªå¤–éƒ¨ç¨‹åº</p><p>å®‰è£…æ–‡æ¡£ï¼š <a href="https://github.com/Neilpang/acme.sh/wiki/%E8%AF%B4%E6%98%8E">https://github.com/Neilpang/acme.sh/wiki/è¯´æ˜</a></p><h4 id="å‰ææ¡ä»¶"><a href="#å‰ææ¡ä»¶" class="headerlink" title="å‰ææ¡ä»¶"></a>å‰ææ¡ä»¶</h4><ol><li>æ‹¥æœ‰ä¸€ä¸ªåŸŸåï¼Œä¾‹å¦‚ mydomain.com (åœ¨å›½å†…ä¸»æœºçš„ç”¨çš„è¯ï¼Œè¿˜éœ€è¦é€šè¿‡ICPå¤‡æ¡ˆ)</li><li>ç¡®å®šäºŒçº§åŸŸåï¼Œå¹¶ä¸”åœ¨åŸŸåæœåŠ¡å™¨åˆ›å»ºä¸€æ¡Aè®°å½•ï¼Œæ‰§è¡Œäº‘ä¸»æœºçš„å…¬ç½‘IPåœ°å€ã€‚<a href="http://www.mydomain.comæŒ‡å‘xxx.xxx.xxx.xxxçš„ipåœ°å€/">www.mydomain.comæŒ‡å‘xxx.xxx.xxx.xxxçš„IPåœ°å€</a></li><li>è¦ç­‰åˆ°æ–°åˆ›å»ºçš„åŸŸåè§£æèƒ½åœ¨å…¬ç½‘ä¸Šè¢«è§£æåˆ°ã€‚</li><li>æ®è¯´å›½å†…çš„åŸŸåæä¾›å•†å¯¹letsencryptçš„æ”¯æŒéå¸¸å·®ï¼Œä½†æ˜¯æ®è¯´ç°é˜¶æ®µç”¨dnspodè§£æçš„åŸŸåè¿˜æ²¡ç¢°åˆ°é—®é¢˜ã€‚æˆ‘ç”¨çš„æ˜¯å›½å¤–çš„Cloudflareè§£ææˆ‘çš„åŸŸåï¼Œä½†æ˜¯ç»å¸¸è¢«å¢™ï¼ˆæƒ³éª‚äººâ€¦ï¼‰ï¼Œç§»åŠ¨è¡¨ç¤ºå¤§å¤šæ•°éƒ½æ²¡æœ‰ä½“éªŒ= =ï¼Œè”é€šæƒ…å†µå¥½ä¸€ç‚¹ã€‚</li></ol><h4 id="å®‰è£…acme-shè„šæœ¬"><a href="#å®‰è£…acme-shè„šæœ¬" class="headerlink" title="å®‰è£…acme.shè„šæœ¬"></a>å®‰è£…acme.shè„šæœ¬</h4><p>æ‰§è¡Œä¸€ä¸‹å‘½ä»¤åé‡æ–°sshç™»å½•æœåŠ¡å™¨å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl  https://get.acme.sh | sh</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤ä¼šæŠŠ acme.sh å®‰è£…åˆ°ä½ çš„ home ç›®å½•ä¸‹: <code>~/.acme.sh/</code>ï¼Œä¸€èˆ¬ä¼šè‡ªåŠ¨åˆ›å»ºç¯å¢ƒå˜é‡ï¼ŒåæœŸç›´æ¥å‘½ä»¤è¡Œè¾“å…¥acme.shå³å¯ã€‚</p><h4 id="ä½¿ç”¨DNS-APIç”³è¯·è¯ä¹¦"><a href="#ä½¿ç”¨DNS-APIç”³è¯·è¯ä¹¦" class="headerlink" title="ä½¿ç”¨DNS APIç”³è¯·è¯ä¹¦"></a>ä½¿ç”¨DNS APIç”³è¯·è¯ä¹¦</h4><p>(æ¨èé…ç½®ä½¿ç”¨APIçš„æ–¹å¼ï¼Œå¦åˆ™æ¯éš”ä¸‰ä¸ªæœˆï¼Œä»ç„¶éœ€è¦é‡æ–°éªŒè¯DNS TXTè®°å½•)</p><p>åˆ›å»ºDNS APIçš„KeyåŠSecret</p><blockquote><p>å‚è€ƒï¼š</p><ol><li><a href="https://github.com/Neilpang/acme.sh/tree/master/dnsapi">https://github.com/Neilpang/acme.sh/tree/master/dnsapi</a></li><li><a href="https://github.com/Neilpang/acme.sh/blob/master/dnsapi/README.md">https://github.com/Neilpang/acme.sh/blob/master/dnsapi/README.md</a></li></ol></blockquote><p>acme.sh ç›®å‰æ”¯æŒ cloudflare, dnspod, cloudxns, godaddy ä»¥åŠ ovh ç­‰æ•°åç§è§£æå•†çš„è‡ªåŠ¨é›†æˆ.</p><p><strong>ã€ä¾‹å­ä¸€ã€‘åŸŸåç”±Cloudflareæä¾›è§£æçš„ç½‘ç«™ï¼Œä½¿ç”¨CloudFlareåŸŸåAPIè‡ªåŠ¨é¢å‘è¯ä¹¦</strong></p><ol><li><p>ä»¥ Cloudflare ä¸ºä¾‹, ä½ éœ€è¦å…ˆç™»å½•åˆ° Cloudflare è´¦å·æ‰èƒ½è·å¾—APIå¯†é’¥, éƒ½æ˜¯å…è´¹çš„ã€‚<br> <img src="/images/Cloudflare-Api-1.jpg" alt="Cloudflare-Api-1"></p><p> <img src="/images/Cloudflare-Api-2.jpg" alt="Cloudflare-Api-2"></p></li><li><p>ç„¶ååœ¨Linuxä¸‹ä½¿ç”¨acme.shå‘½ä»¤ç”³è¯·è¯ä¹¦:</p><p> å‘½ä»¤ä½¿ç”¨å‚è€ƒï¼š<a href="https://sb.sb/blog/linux-acme-sh-lets-encrypt-ssl/">Linux ä¸‹ä½¿ç”¨ acme.sh é…ç½® Letâ€™s Encrypt å…è´¹ SSL è¯ä¹¦ + é€šé…ç¬¦è¯ä¹¦</a><br> å…ˆå¯¼å…¥å¯†é’¥å’Œé‚®ç®±ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CF_Key=<span class="string">&quot;sdfsdfsdfljlbjkljlkjsdfoiwje&quot;</span></span><br><span class="line"><span class="built_in">export</span> CF_Email=<span class="string">&quot;xxxx@sss.com&quot;</span></span><br></pre></td></tr></table></figure><p> æˆ‘ä»¬ç°åœ¨å‘è¡Œä¸€ä¸ªè¯ä¹¦ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_cf -d example.com -d www.example.com --accountemail query@goodsrv.com</span><br></pre></td></tr></table></figure><p> <code>--accountemail</code>æ˜¯æŒ‡å®šå¸æˆ·ç”µå­é‚®ä»¶ï¼Œä»…å¯¹<code>--install</code>å’Œ<code>--update-account</code>å‘½ä»¤æœ‰æ•ˆï¼ˆå¾…éªŒè¯ï¼Œå› ä¸ºæˆ‘æ‰§è¡Œå‘½ä»¤æ—¶å¹¶æ²¡æœ‰å¸¦ä¸Šè¯¥å‚æ•°ï¼‰ã€‚</p><p> è¾“å…¥å‘½ä»¤åå›è½¦ï¼Œéœ€è¦ç­‰ä¸¤åˆ†é’Ÿï¼Œç»ˆç«¯ä¼šæœ‰å€’è®¡æ—¶ã€‚</p><p> å€’è®¡æ—¶ç»“æŸåï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --renew -d example.com -d www.example.com</span><br></pre></td></tr></table></figure></li></ol><h5 id="è¡¥å……ï¼šè·å–-Letâ€™s-Encrypt-é€šé…ç¬¦è¯ä¹¦"><a href="#è¡¥å……ï¼šè·å–-Letâ€™s-Encrypt-é€šé…ç¬¦è¯ä¹¦" class="headerlink" title="è¡¥å……ï¼šè·å– Letâ€™s Encrypt é€šé…ç¬¦è¯ä¹¦"></a>è¡¥å……ï¼šè·å– Letâ€™s Encrypt é€šé…ç¬¦è¯ä¹¦</h5><p>é€šé…ç¬¦è¯ä¹¦ï¼Œè‹±æ–‡ Wildcard Certificate å›½å†…é»‘è¯å«åšé‡å¡ï¼Œç»è¿‡ä¸€ä¸ªæœˆçš„è·³ç¥¨åï¼ŒLetâ€™s Encrypt ç›®å‰å·²ç»æ”¯æŒé€šé…ç¬¦çš„è¯ä¹¦ï¼ŒåŒæ · <code>acme.sh</code> ä¹Ÿæ˜¯æ”¯æŒçš„ï¼Œå’Œå¤šåŸŸåè¯ä¹¦ä¸åŒï¼Œé€šé…ç¬¦è¯ä¹¦å¿…é¡»ä½¿ç”¨ DNS TXT è®°å½•éªŒè¯æ–¹å¼ï¼Œæˆ‘ä»¬ä»¥ <code>example.com</code> å’Œ <code>*.example.com</code> ä¸ºä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue -d example.com -d <span class="string">&#x27;*.example.com&#x27;</span> --dns</span><br></pre></td></tr></table></figure><blockquote><p>è®°å¾—<code>*.example.com</code><strong>åŠ å•å¼•å·</strong></p></blockquote><p>å¦‚æœä½ çš„ DNS æä¾›å•†æ”¯æŒ APIï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ API è€Œä¸éœ€è¦æ‰‹å·¥ä¿®æ”¹ TXT è®°å½•ï¼Œè¯¦ç»†ç”¨æ³•è¯·è§<a href="https://github.com/Neilpang/acme.sh/tree/master/dnsapi">è¿™é‡Œ</a></p><p>ä»¥ CloudFlare ä¸ºä¾‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_cf -d example.com -d <span class="string">&#x27;*.example.com&#x27;</span></span><br></pre></td></tr></table></figure><p>ç”Ÿæ•ˆåç»™è¯ä¹¦ç»­ä¸€ç§’</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --renew -d example.com -d <span class="string">&#x27;*.example.com&#x27;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååé¢ä½ æƒ³è¦ä¸€ä¸ª<code>äºŒçº§åŸŸå</code>ï¼ˆå¦‚ï¼šabc.example.comï¼‰çš„æ—¶å€™å°±ä¸ç”¨å†ç”³è¯·äº†ï¼Œåªéœ€è¦åœ¨<code>DNS</code>æ·»åŠ <code>Aè®°å½•</code>ç­‰å®ƒç”Ÿæ•ˆå°±å¯ä»¥ç”¨äº†ã€‚å½“ç„¶ï¼Œä¸‹é¢çš„<code>å®‰è£…è¯ä¹¦</code>å’Œ<code>é…ç½®ç«™ç‚¹ï¼ˆNginxï¼‰</code>æ­¥éª¤è¿˜æ˜¯è¦åšçš„ğŸ˜‚</p><h4 id="å®‰è£…è¯ä¹¦"><a href="#å®‰è£…è¯ä¹¦" class="headerlink" title="å®‰è£…è¯ä¹¦"></a>å®‰è£…è¯ä¹¦</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå®‰è£…ç›®å½•</span></span><br><span class="line">mkdir /etc/ssl/example.com/ -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># reloadcmdå‚æ•°é‡Œé¢å¡«å†™çš„æ˜¯åœ¨æ›´æ–°è¯ä¹¦åéœ€è¦é‡æ–°å¯åŠ¨çš„æœåŠ¡ï¼Œä¾‹å¦‚é‡å¯nginxæˆ–è€…apacheæˆ–è€…å…¶å®ƒè„šæœ¬ã€‚</span></span><br><span class="line">acme.sh  --installcert  -d  example.com   \</span><br><span class="line">        --key-file   /etc/ssl/example.com/example.com.key \</span><br><span class="line">        --fullchain-file /etc/ssl/example.com/fullchain.cer \</span><br><span class="line">        --reloadcmd  <span class="string">&quot;systemctl reload nginx&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><ol><li><code>/etc/ssl/example.com/</code>çš„æ‰€æœ‰è€…ä»¥åŠç”¨æˆ·ç»„å¿…é¡»ä¸ºå½“å‰ç”¨æˆ·ï¼Œå¦åˆ™åé¢installcertçš„æ—¶å€™ä¼šæç¤ºæ²¡æœ‰æƒé™ï¼Œå¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œåé¢å¯æ›´æ”¹å›åŸæ¥çš„æ‰€æœ‰è€…å’Œç”¨æˆ·ç»„ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ›´æ”¹æ‰€æœ‰è€…å’Œç”¨æˆ·ç»„</span></span><br><span class="line">sudo chown <span class="variable">$USER</span>:<span class="variable">$USER</span> -R /etc/ssl/example.com/</span><br><span class="line"><span class="comment">#æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶å¤¹çš„æƒé™ã€æ‰€æœ‰è€…å’Œç”¨æˆ·ç»„</span></span><br><span class="line">ls -l /etc/ssl/</span><br><span class="line">ls -l /etc/ssl/example.com/</span><br></pre></td></tr></table></figure></li><li>(ä¸€ä¸ªå°æé†’, éƒ¨åˆ†æœåŠ¡å™¨ç³»ç»Ÿç”¨çš„æ˜¯ <code>service nginx force-reload</code>, ä¸æ˜¯ <code>service nginx reload</code>, æ®æµ‹è¯•, <code>reload</code> å¹¶ä¸ä¼šé‡æ–°åŠ è½½è¯ä¹¦, æ‰€ä»¥ç”¨çš„ <code>force-reload</code>)</li><li>Nginx çš„é…ç½® <code>ssl_certificate</code> ä½¿ç”¨ <code>/etc/nginx/ssl/fullchain.cer</code> ï¼Œè€Œé <code>/etc/nginx/ssl/&lt;domain&gt;.cer</code> ï¼Œå¦åˆ™ <a href="https://www.ssllabs.com/ssltest/">SSL Labs</a>çš„æµ‹è¯•ä¼šæŠ¥ <code>Chain issues Incomplete</code> é”™è¯¯ã€‚</li><li><code>--installcert</code>å‘½ä»¤å¯ä»¥æºå¸¦å¾ˆå¤šå‚æ•°, æ¥æŒ‡å®šç›®æ ‡æ–‡ä»¶. å¹¶ä¸”å¯ä»¥æŒ‡å®š  reloadcmd, å½“è¯ä¹¦æ›´æ–°ä»¥å, reloadcmd ä¼šè¢«è‡ªåŠ¨è°ƒç”¨,è®©æœåŠ¡å™¨ç”Ÿæ•ˆ.</li><li>å€¼å¾—æ³¨æ„çš„æ˜¯, è¿™é‡ŒæŒ‡å®šçš„æ‰€æœ‰å‚æ•°éƒ½ä¼šè¢«è‡ªåŠ¨è®°å½•ä¸‹æ¥, å¹¶åœ¨å°†æ¥è¯ä¹¦è‡ªåŠ¨æ›´æ–°ä»¥å, è¢«å†æ¬¡è‡ªåŠ¨è°ƒç”¨.</li></ol></blockquote><blockquote><p>mkdirçš„-på‚æ•°è§£é‡Šï¼š<br>  -p, â€“parents  å¯ä»¥æ˜¯ä¸€ä¸ªè·¯å¾„åç§°ã€‚æ­¤æ—¶è‹¥è·¯å¾„ä¸­çš„æŸäº›ç›®å½•å°šä¸å­˜åœ¨,åŠ ä¸Šæ­¤é€‰é¡¹å,ç³»ç»Ÿå°†è‡ªåŠ¨å»ºç«‹å¥½é‚£äº›å°šä¸å­˜åœ¨çš„ç›®å½•,å³ä¸€æ¬¡å¯ä»¥å»ºç«‹å¤šä¸ªç›®å½•;<br>mkdirå‘½ä»¤å‚è€ƒï¼š<a href="https://www.linuxdaxue.com/linux-command-intro-mkdir.html">https://www.linuxdaxue.com/linux-command-intro-mkdir.html</a></p></blockquote><h4 id="æ›´æ–°è¯ä¹¦"><a href="#æ›´æ–°è¯ä¹¦" class="headerlink" title="æ›´æ–°è¯ä¹¦"></a>æ›´æ–°è¯ä¹¦</h4><p>ç›®å‰è¯ä¹¦åœ¨ 60 å¤©ä»¥åä¼šè‡ªåŠ¨æ›´æ–°, ä½ æ— éœ€ä»»ä½•æ“ä½œ. ä»Šåæœ‰å¯èƒ½ä¼šç¼©çŸ­è¿™ä¸ªæ—¶é—´, ä¸è¿‡éƒ½æ˜¯è‡ªåŠ¨çš„, ä½ ä¸ç”¨å…³å¿ƒ.</p><h4 id="æ›´æ–°-acme-sh"><a href="#æ›´æ–°-acme-sh" class="headerlink" title="æ›´æ–° acme.sh"></a>æ›´æ–° acme.sh</h4><p>ç›®å‰ç”±äº acme åè®®å’Œ letsencrypt CA éƒ½åœ¨é¢‘ç¹çš„æ›´æ–°, å› æ­¤ acme.sh ä¹Ÿç»å¸¸æ›´æ–°ä»¥ä¿æŒåŒæ­¥.</p><p>å‡çº§ acme.sh åˆ°æœ€æ–°ç‰ˆ :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --upgrade</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ä¸æƒ³æ‰‹åŠ¨å‡çº§, å¯ä»¥å¼€å¯è‡ªåŠ¨å‡çº§:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh  --upgrade  --auto-upgrade</span><br></pre></td></tr></table></figure><p>ä¹‹å, acme.sh å°±ä¼šè‡ªåŠ¨ä¿æŒæ›´æ–°äº†<br>ä½ ä¹Ÿå¯ä»¥éšæ—¶å…³é—­è‡ªåŠ¨æ›´æ–°:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --upgrade  --auto-upgrade  0</span><br></pre></td></tr></table></figure><h1 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h1><h2 id="é…ç½®Nginxä½¿ç”¨è¯ä¹¦å¼€é€šhttpsç«™ç‚¹"><a href="#é…ç½®Nginxä½¿ç”¨è¯ä¹¦å¼€é€šhttpsç«™ç‚¹" class="headerlink" title="é…ç½®Nginxä½¿ç”¨è¯ä¹¦å¼€é€šhttpsç«™ç‚¹"></a>é…ç½®Nginxä½¿ç”¨è¯ä¹¦å¼€é€šhttpsç«™ç‚¹</h2><ol><li><p><strong>ç”ŸæˆPerfect Forward Securityï¼ˆPFSï¼‰é”®å€¼</strong><br>Perfect Forward Securityï¼ˆPFS)æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šï¼Œä¸­æ–‡ç¿»è¯‘æˆ<code>å®Œç¾å‰å‘ä¿å¯†</code>ï¼Œåæ­£æ˜¯è¿™å‡ å¹´æ‰æå€¡çš„åŠ å¼ºå®‰å…¨æ€§çš„æŠ€æœ¯ã€‚å¦‚æœæœ¬åœ°è¿˜æ²¡æœ‰ç”Ÿæˆè¿™ä¸ªé”®å€¼ï¼Œéœ€è¦å…ˆæ‰§è¡Œç”Ÿæˆçš„å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/ssl/example.com/</span><br><span class="line">openssl dhparam -out dhparam.pem 2048</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„è¿‡ç¨‹è¿˜æŒºèŠ±æ—¶é—´çš„ï¼Œæ®æˆ‘æŸ¥åˆ°çš„èµ„æ–™ï¼Œæ®è¯´å‚æ•°ä¸º2048çš„è¦4åˆ†é’Ÿå·¦å³ï¼Œè¿˜å—æœåŠ¡å™¨æ€§èƒ½å½±å“ï¼Œæ­¤æ—¶ä¸å¦¨åšç‚¹å…¶ä»–ä¸œè¥¿ã€‚<br>ï¼ˆæ—¶é—´ä¸€åˆ†ä¸€ç§’çš„è¿‡å»â€¦ï¼‰<br>å¥½äº†ï¼ŒPFSé”®å€¼ç”Ÿæˆäº†ï¼Œæˆ‘ä»¬ç”¨<code>ls</code>å‘½ä»¤æ¥ç¡®è®¤ä¸€ä¸‹ç›®å½•ä¸‹æ˜¯å¦ç”Ÿæˆäº†<code>dhparam.pem</code>æ–‡ä»¶ï¼Œç¡®è®¤å®Œæ¯•å°±å¯ä»¥æ‰§è¡Œä¸‹ä¸€æ­¥äº†ã€‚</p><blockquote><p>ç‰¹åˆ«è¯´æ˜ï¼š<br>ä¸€å®šè¦ç¡®è®¤æ–‡ä»¶æ˜¯å¦å·²ç»ç”Ÿæˆï¼ï¼ï¼åœ¨è¿™ä¸€æ­¥æˆ‘åŸæœ¬æ˜¯æ‰§è¡Œ<code>openssl dhparam 2048 -out dhparam.pem</code>ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæ‰§è¡Œäº†å¤šæ¬¡éƒ½æ— æ³•ç”Ÿæˆ<code>dhparam.pem</code>æ–‡ä»¶ï¼Œåæ¥æ¢äº†ä¸ªç›®å½•æ‰§è¡Œäº†å¤šæ¬¡<code>openssl dhparam -out dhparam.pem 2048</code>æ‰æˆåŠŸï¼Œè¿™æ˜¯åé¢é…ç½®å®ŒNginxåæ— æ³•é‡æ–°å¯åŠ¨NginxæœåŠ¡äº†ï¼Œæˆ‘è¾“å‡ºæ—¥å¿—æ‰å‘ç°çš„ï¼Œå…·ä½“åé¢ä¼šè¯´ã€‚</p></blockquote></li><li><p><strong>nginxé…ç½®ä½¿ç”¨è¯ä¹¦ã€‚</strong><br> ç¼–è¾‘ä½ çš„Nginxé…ç½®æ–‡ä»¶ï¼Œå¦‚ï¼š<code>/etc/nginx/sites-available/&lt;your-nginx-config&gt;</code><br> <font color='red'>â˜†â˜†ä¿®æ”¹é…ç½®æ–‡ä»¶å‰å»ºè®®å…ˆå¤‡ä»½â˜†â˜†</font><br> å¯ä»¥é€šè¿‡<a href="https://mozilla.github.io/server-side-tls/ssl-config-generator/">Mozilla SSL Configuration Generator</a>è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„å‚è€ƒé…ç½®</p><p> <strong>ä¿®æ”¹httpå¯¹åº”çš„serveræ¨¡å—ï¼š</strong></p> <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> example.com;</span><br><span class="line">    <span class="comment">#return 301 https://example.com$request_uri;</span></span><br><span class="line">    <span class="attribute">if</span> ( <span class="variable">$scheme</span> = http )&#123;</span><br><span class="line">      <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">root</span> /var/www/html/example.com;</span><br><span class="line">    <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>return 301 https://$server_name$request_uri;</code>æ˜¯å¼ºåˆ¶httpè·³è½¬https</p></blockquote><p> <strong>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ httpsçš„serveræ¨¡å—ï¼š</strong></p> <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span> example.com;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#charset utf-8;</span></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">       <span class="attribute">root</span> /var/www/html/example.com;</span><br><span class="line">       <span class="comment">#index index.html index.htm;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#root /var/www/html/example.com;</span></span><br><span class="line">    <span class="attribute">index</span> index.html index.htm;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span>  /var/log/nginx/example.com_access.log;</span><br><span class="line">    <span class="attribute">error_log</span>  /var/log/nginx/example.com_error.log;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /etc/ssl/example.com/fullchain.cer;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/ssl/example.com/example.com.key;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">1d</span>;</span><br><span class="line">    <span class="attribute">ssl_session_cache</span> shared:SSL:<span class="number">50m</span>;</span><br><span class="line">    <span class="attribute">ssl_session_tickets</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_dhparam</span> /etc/ssl/example.com/dhparam.pem;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> <span class="string">&#x27;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128:AES256:AES:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK&#x27;</span>;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»çš„æ ·ä¾‹å†…å®¹å¦‚ä¸‹ï¼š</strong></p> <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> example.com;</span><br><span class="line">    <span class="comment">#return 301 https://example.com$request_uri;</span></span><br><span class="line">    <span class="attribute">if</span> ( <span class="variable">$scheme</span> = http )&#123;</span><br><span class="line">      <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$server_name</span><span class="variable">$request_uri</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">root</span> /var/www/html/example.com;</span><br><span class="line">    <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span> example.com;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#charset utf-8;</span></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">       <span class="attribute">root</span> /var/www/html/example.com;</span><br><span class="line">       <span class="comment">#index index.html index.htm;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#root /var/www/html/example.com;</span></span><br><span class="line">    <span class="attribute">index</span> index.html index.htm;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span>  /var/log/nginx/example.com_access.log;</span><br><span class="line">    <span class="attribute">error_log</span>  /var/log/nginx/example.com_error.log;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /etc/ssl/example.com/fullchain.cer;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/ssl/example.com/example.com.key;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">1d</span>;</span><br><span class="line">    <span class="attribute">ssl_session_cache</span> shared:SSL:<span class="number">50m</span>;</span><br><span class="line">    <span class="attribute">ssl_session_tickets</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_dhparam</span> /etc/ssl/example.com/dhparam.pem;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> <span class="string">&#x27;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128:AES256:AES:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK&#x27;</span>;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶æ²¡æœ‰é—®é¢˜çš„è¯æ‰§è¡Œ<code>systemctl reload nginx</code>ï¼Œç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€<code>http://example.com</code>, å¦‚æœæ­£å¸¸è·³è½¬åˆ°<code>https://example.com</code>ï¼Œå°±ç®—æˆåŠŸäº†ã€‚ å¦‚æœæ˜¯chromeæµè§ˆå™¨ï¼Œåœ¨åœ°å€æ ç‚¹å‡»ç»¿è‰²å°é”çš„å›¾æ ‡ï¼Œå¯ä»¥æŸ¥çœ‹è¯ä¹¦çš„è¯¦æƒ…ï¼Œå¦‚å›¾ã€‚<br><img src="/images/https%20browser%20show.png" alt="https browser sho"></p></li></ol><h3 id="æ­¤æ­¥éª¤é‡åˆ°çš„éš¾é¢˜"><a href="#æ­¤æ­¥éª¤é‡åˆ°çš„éš¾é¢˜" class="headerlink" title="æ­¤æ­¥éª¤é‡åˆ°çš„éš¾é¢˜"></a>æ­¤æ­¥éª¤é‡åˆ°çš„éš¾é¢˜</h3><ol><li><p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯å¦‚æœä½ æ˜¯<code>Nginx+Cloudflare</code>ï¼Œé‚£ä¹ˆCloudflareçš„â€Cryptoâ€”SSLâ€è¦è®¾ç½®æˆ<code>Full(strict)</code>ï¼Œå¦åˆ™ä¼šå¯¼è‡´<font color='orange'><strong>example.comå°†ä½ é‡å®šå‘æ¬¡æ•°è¿‡å¤š</strong></font>çš„æƒ…å†µï¼Œé»˜è®¤æ˜¯<code>Flexible</code>ã€‚CFè®¾ç½®å¦‚å›¾ï¼š<br><img src="/images/cloudflare%20config%20of%20starting%20https%20with%20nginx.png" alt="cloudflare config of starting https with nginx"></p></li><li><p>è¿™é‡Œè¿˜æœ‰ä¸ªå‘å°±æ˜¯å‰é¢è¯´çš„æ— æ³•ç”Ÿæˆ<code>dhparam.pem</code>æ–‡ä»¶å¯¼è‡´æ— æ³•é‡è½½Nginxã€‚ä¸€å¼€å§‹æˆ‘è¿˜æ²¡å‘ç°ï¼Œä¸€ç›´åœ¨ä»¥ä¸ºNginxé…ç½®æ–‡ä»¶å“ªé‡Œé”™äº†ï¼Œåæ¥<code>sudo journalctl -xe</code>è¾“å‡ºæ—¥å¿—æ‰å‘ç°Nginxæ‰¾ä¸åˆ°<code>dhparam.pem</code>æ–‡ä»¶ï¼š<br><img src="/images/nginx%20cannot%20found%20dhparam.pem-1.png" alt="nginx cannot found dhparam.pem-1"><br>ç”¨<code>ls</code>å‘½ä»¤å¯ä»¥å‘ç°ç›®å½•ä¸‹å¹¶ä¸å­˜åœ¨<code>dhparam.pem</code>æ–‡ä»¶ï¼š<br><img src="/images/nginx%20cannot%20found%20dhparam.pem-2.png" alt="nginx cannot found dhparam.pem-2"><br>äºæ˜¯æˆ‘åˆæ‰§è¡Œäº†å‡ æ¬¡<code>openssl dhparam 2048 -out dhparam.pem</code>ï¼Œç»“æœè¿˜æ˜¯ä¸€æ ·ï¼Œè€Œä¸”è¿‡ç¨‹ç«Ÿç„¶åªéœ€è¦1åˆ†é’Ÿä¸åˆ°ã€‚å¦‚å›¾ï¼š<br><img src="/images/nginx%20cannot%20found%20dhparam.pem-3.png" alt="nginx cannot found dhparam.pem-3"><br>å¯Ÿè§‰åˆ°ä¸å¯¹åŠ²ä¹‹åæˆ‘é©¬ä¸Šå»æ‰¾äº†è·Ÿ<code>dhparam</code>çš„èµ„æ–™ï¼Œåæ¥åœ¨ä¸€ä¸ªåšå®¢ä¸Šå‘ç°ä»–çš„å‘½ä»¤é¡ºåºè·Ÿæˆ‘ä¸ä¸€æ ·ï¼Œè¿™ä¸ªæ–‡ä»¶å­˜æ”¾ç›®å½•ä¹Ÿè·Ÿæˆ‘ä¸ä¸€æ ·ï¼Œäºæ˜¯æˆ‘å°±æŠŠå‘½ä»¤æ”¹æˆ<code>openssl dhparam -out dhparam.pem 2048</code>å’Œæ”¹ç›®å½•åˆ°example.com(æ­¤æ—¶è¯¥ç›®å½•æƒé™è¿˜æ˜¯$USERçš„)å†è¯•äº†å‡ æ¬¡ï¼Œç¬¬ä¸€æ¬¡æ˜¯ä¸è¡Œçš„ï¼Œæ‰§è¡Œå¤šå‡ æ¬¡åçªç„¶å°±æˆåŠŸäº†ã€‚å¦‚å›¾ï¼š<br><img src="/images/nginx%20cannot%20found%20dhparam.pem-4.png" alt="nginx cannot found dhparam.pem-4"><br>å¯ä»¥å‘ç°æ­¤æ¬¡æ‰§è¡Œå‘½ä»¤æ—¶é—´ååˆ†çš„é•¿ï¼Œæˆ‘ç­‰äº†å¤§æ¦‚5åˆ†é’Ÿæ‰æ‰§è¡Œå®Œæ¯•ã€‚<br>ç„¶åæˆ‘ä»¬å†ç”¨<code>ls</code>æ¥çœ‹çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¯ä»¥å‘ç°æ–‡ä»¶å·²ç»ç”Ÿæˆï¼š<br><img src="/images/nginx%20cannot%20found%20dhparam.pem-5.png" alt="nginx cannot found dhparam.pem-5"></p></li></ol><h2 id="æµ‹è¯•è¯ä¹¦"><a href="#æµ‹è¯•è¯ä¹¦" class="headerlink" title="æµ‹è¯•è¯ä¹¦"></a>æµ‹è¯•è¯ä¹¦</h2><p>å¦‚æœæ˜¯ç½‘ç«™çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹ç½‘ç«™å·¥å…·æµ‹è¯•è‡ªå·±ç½‘ç«™çš„HTTPSé…ç½®çš„å®‰å…¨æ€§</p><ol><li><p>SSL Labå°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼š<br> <a href="https://ssllabs.com/ssltest/analyze.html?d=example.com">https://ssllabs.com/ssltest/analyze.html?d=example.com</a><br> è¿™æ˜¯æˆ‘çš„æµ‹è¯•ç»“æœï¼Œéƒ½æ˜¯Aå“¦ï¼ï¼<br> <img src="/images/SSL%20Lab%20Server%20Test.jpg" alt="SSL Lab Server Test"></p></li><li><p>ä¹Ÿå¯ä»¥åœ¨Linuxä¸‹ä½¿ç”¨opensslå‘½ä»¤æŸ¥çœ‹è¯ä¹¦çš„è¿‡æœŸæ—¶é—´</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -noout -dates -<span class="keyword">in</span> /etc/ssl/example.com/example.com.key</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> æœåŠ¡å™¨ </tag>
            
            <tag> è¿ç»´ </tag>
            
            <tag> Linux </tag>
            
            <tag> SSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬ä¸€æ¬¡æ­å»ºHexoåšå®¢è¿‡ç¨‹ in MacOS</title>
      <link href="/posts/1572acec.html"/>
      <url>/posts/1572acec.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><p>ç¬¬ä¸€æ¬¡åœ¨è‡ªå·±æœåŠ¡å™¨æ­å»ºåšå®¢ï¼Œæ€»ä¼šæœ‰é‚£ä¹ˆä¸€ç‚¹ç‚¹å¤±è¯¯ï¼Œç¢°åˆ°ä¸€ç‚¹å‘ï¼Œåœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹æ­å»ºhexoçš„å…·ä½“æ­¥éª¤ã€‚</p><blockquote><p>å‚è€ƒï¼š</p><ul><li><a href="http://vinnyxiong.cn/blog/Hexo%E4%B9%8B%E6%97%85-%E4%BA%8C-%EF%BC%9AHexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA-%E5%9C%A8%20Mac%20OS%20%E5%B9%B3%E5%8F%B0-.html">Hexoä¹‹æ—…(äºŒ)ï¼šHexoåšå®¢æ­å»º(åœ¨ Mac OS å¹³å°)</a></li><li><a href="https://segmentfault.com/a/1190000009363890">å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šæ­å»ºhexoåšå®¢</a></li></ul></blockquote><h1 id="Hexoæ¶æ„"><a href="#Hexoæ¶æ„" class="headerlink" title="Hexoæ¶æ„"></a>Hexoæ¶æ„</h1><p>é¦–å…ˆæˆ‘ä»¬è¦ç†è§£hexoæ˜¯å¦‚ä½•ç”Ÿæˆé™æ€åšå®¢ä»¥åŠå¦‚ä½•å®ç°é€šè¿‡æœåŠ¡å™¨è®¿é—®é™æ€åšå®¢çš„<br><img src="/images/15317408001743.jpg"></p><a id="more"></a><blockquote><p>é€šè¿‡ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæ•´ä¸ªæµç¨‹å°±æ˜¯åœ¨æœ¬åœ°é€šè¿‡ <font color='orange'><strong>hexo g</strong></font> æ¸²æŸ“åšå®¢çš„é™æ€æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ <font color='orange'><strong>hexo d</strong></font> æŠŠé™æ€æ–‡ä»¶ pushåˆ°æœåŠ¡å™¨ä¸Šæˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„gitä»“åº“,æœåŠ¡å™¨å†é€šè¿‡ git-hooks åŒæ­¥ç½‘ç«™æ ¹ç›®å½•ï¼Œè¿™æ ·å°±å¯ä»¥è®¿é—®äº†</p></blockquote><h1 id="é…ç½®æœ¬åœ°ç¯å¢ƒ"><a href="#é…ç½®æœ¬åœ°ç¯å¢ƒ" class="headerlink" title="é…ç½®æœ¬åœ°ç¯å¢ƒ"></a>é…ç½®æœ¬åœ°ç¯å¢ƒ</h1><h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h2><p>Hexo ä¾èµ–äº Node.js å’Œ Gitï¼Œéœ€è¦å…ˆå®‰è£…ã€‚</p><h3 id="å®‰è£…Git"><a href="#å®‰è£…Git" class="headerlink" title="å®‰è£…Git"></a>å®‰è£…Git</h3><blockquote><p><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137396287703354d8c6c01c904c7d9ff056ae23da865a000">Gitå®‰è£…ï¼ˆå»–é›ªå³°æ•™ç¨‹ï¼‰</a></p></blockquote><h3 id="å®‰è£…Node-js"><a href="#å®‰è£…Node-js" class="headerlink" title="å®‰è£…Node.js"></a>å®‰è£…Node.js</h3><p>Nodeçš„è¯å»ºè®®ç”¨nvmç®¡ç†ï¼Œå¦åˆ™å¾ˆå®¹æ˜“å‡ºç° <code>command not found: hexo</code> çš„æƒ…å†µï¼Œå‡ºç°è¿™ç§æƒ…å†µä¸»è¦æ˜¯nodeçš„ç‰ˆæœ¬é—®é¢˜ å¯ä»¥é€šè¿‡nvmæ¥æ§åˆ¶ä¸€ä¸‹nodeçš„ç‰ˆæœ¬æ¥è§£å†³</p><blockquote><p>å‚è€ƒï¼š<a href="http://www.gengzhibo.com/2017/04/23/Hexo%E5%AE%89%E8%A3%85%E5%90%8E%E7%9A%84%E5%B0%8F%E9%97%AE%E9%A2%98/">Hexoå®‰è£…åhexoæŒ‡ä»¤æ— æ³•è¢«æ‰¾åˆ°çš„è§£å†³æ–¹æ³•</a></p></blockquote><h4 id="ä½¿ç”¨Homebrewå®‰è£nvm"><a href="#ä½¿ç”¨Homebrewå®‰è£nvm" class="headerlink" title="ä½¿ç”¨Homebrewå®‰è£nvm"></a>ä½¿ç”¨Homebrewå®‰è£nvm</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">brew install nvm</span><br><span class="line">//è¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦å®‰è£…gccæˆ–è€…å…¶å®ƒéœ€è¦ä¾èµ–çš„å·¥å…· æŒ‰ç…§æç¤ºä¸€æ¬¡å®‰è£…å¥½å³å¯</span><br><span class="line">mkdir ~/.nvm</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export NVM_DIR=~/.nvm&quot;</span> &gt;&gt; .bash_profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;. <span class="subst">$(brew --prefix nvm)</span>/nvm.sh&quot;</span> &gt;&gt; .bash_profile</span><br><span class="line">//è¿™ä¸ªæ­¥éª¤ä¸­macä¸‹çš„brewéœ€è¦é€šè¿‡--prefixè¿™ç§å½¢å¼å®Œæˆï¼Œå¦‚æœæ˜¯zshçš„è¯å¯ä»¥è¾“å‡ºåˆ°.zshrcæ–‡ä»¶</span><br></pre></td></tr></table></figure><p>é‡å¯ç»ˆç«¯åç”¨ nvm help æ¥éªŒè¯nvmæ˜¯å¦æ­£ç¡®å®‰è£…</p><h4 id="ä½¿ç”¨nvmå®‰è£Node-js"><a href="#ä½¿ç”¨nvmå®‰è£Node-js" class="headerlink" title="ä½¿ç”¨nvmå®‰è£Node.js"></a>ä½¿ç”¨nvmå®‰è£Node.js</h4><p>å®‰è£å®Œäº†nvmï¼Œæ¥è‘—å®‰è£ä¸»è§’ Node.jsã€‚å…ˆç”¨ <code>nvm ls-remote</code> æŒ‡ä»¤çœ‹ä¸€ä¸‹æœ‰å“ªäº›ç‰ˆæœ¬å¯ä»¥å®‰è£ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">nvm ls-remote</span><br><span class="line">        .</span><br><span class="line">        .</span><br><span class="line">        .</span><br><span class="line">       v9.10.0</span><br><span class="line">       v9.10.1</span><br><span class="line">       v9.11.0</span><br><span class="line">       v9.11.1</span><br><span class="line">       v9.11.2</span><br><span class="line">       v10.0.0</span><br><span class="line">       v10.1.0</span><br><span class="line">       v10.2.0</span><br><span class="line">       v10.2.1</span><br><span class="line">       v10.3.0</span><br><span class="line">       v10.4.0</span><br><span class="line">       .</span><br><span class="line">       .</span><br><span class="line">       .</span><br></pre></td></tr></table></figure><p>ç„¶åç›´æ¥ç”¨ä¸€ä¸‹å‘½ä»¤å®‰è£…æœ€æ–°ç¨³å®šç‰ˆnode</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install stable</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨nvmæ— ç—›åˆ‡æ¢Node-jsç‰ˆæœ¬"><a href="#ä½¿ç”¨nvmæ— ç—›åˆ‡æ¢Node-jsç‰ˆæœ¬" class="headerlink" title="ä½¿ç”¨nvmæ— ç—›åˆ‡æ¢Node.jsç‰ˆæœ¬"></a>ä½¿ç”¨nvmæ— ç—›åˆ‡æ¢Node.jsç‰ˆæœ¬</h4><p>æ£€æŸ¥å½“å‰ä½¿ç”¨çš„ Node.js ç‰ˆæœ¬ä½¿ç”¨å‘½ä»¤ nvm lsã€‚å¦‚æœè¾“å‡ºç»“æœå¦‚ä¸‹è¡¨ç¤ºæ­£ç¡®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ nvm ls</span><br><span class="line">       v0.12.10</span><br><span class="line">-&gt;      v10.6.0</span><br><span class="line">         system</span><br><span class="line">default -&gt; v10.6.0</span><br><span class="line">node -&gt; stable (-&gt; v10.6.0) (default)</span><br><span class="line">stable -&gt; 10.6 (-&gt; v10.6.0) (default)</span><br><span class="line">iojs -&gt; N/A (default)</span><br><span class="line">lts/* -&gt; lts/carbon (-&gt; N/A)</span><br><span class="line">lts/argon -&gt; v4.9.1 (-&gt; N/A)</span><br><span class="line">lts/boron -&gt; v6.14.3 (-&gt; N/A)</span><br><span class="line">lts/carbon -&gt; v8.11.3 (-&gt; N/A)</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ª -&gt; è¡¨ç¤ºå½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œdefault -&gt; è¡¨ç¤ºé»˜è®¤ç‰ˆæœ¬ï¼Œå¿…é¡»ä¿è¯è¿™ä¸¤ä¸ªï¼Œä¸ç„¶åé¢å®‰è£…hexoä¼šæç¤º <code>-bash: hexo: command not found</code> ï¼Œä¸èƒ½åœ¨å‘½ä»¤è¡Œä½¿ç”¨ã€‚<br>è®¾ç½®çš„æ–¹æ³•æ˜¯ï¼Œå…ˆé€šè¿‡ <code>nvm ls</code> çœ‹çœ‹æœ¬åœ°å®‰è£…äº†ä»€ä¹ˆç‰ˆæœ¬ï¼Œå¦‚æœæœ¬åœ°æ²¡æœ‰ï¼Œåˆ™åº”è¯¥ä½¿ç”¨ä¸Šä¸€æ­¥çš„æ–¹æ³•å…ˆå®‰è£…ï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªå‘½ä»¤æŒ‡å®šç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use v10.6.0</span><br></pre></td></tr></table></figure><p>å†é€šè¿‡è¿™ä¸ªå‘½ä»¤æŒ‡å®šé»˜è®¤ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm <span class="built_in">alias</span> default v10.6.0</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²Hexo"><a href="#éƒ¨ç½²Hexo" class="headerlink" title="éƒ¨ç½²Hexo"></a>éƒ¨ç½²Hexo</h2><h3 id="å®‰è£…Hexo"><a href="#å®‰è£…Hexo" class="headerlink" title="å®‰è£…Hexo"></a>å®‰è£…Hexo</h3><p>æ‰€æœ‰å¿…å¤‡çš„ä¾èµ–éƒ½å®‰è£…å®Œæˆåï¼Œå³å¯ä½¿ç”¨ npm å®‰è£… Hexoï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>-g æˆ– â€“global è¡¨ç¤ºå…¨å±€å®‰è£…æ¨¡å—ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼Œä¼šå®‰è£…åœ¨å½“å‰ç›®å½•çš„node_moduleså­ç›®å½•ä¸‹ã€‚<br>å®‰è£… Hexo å®Œæˆåï¼Œè¯·æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line"><span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p><code>npm install</code> è¡¨ç¤ºå®‰è£…å½“å‰ç›®å½•package.jsonæ–‡ä»¶ä¸­é…ç½®çš„dependenciesæ¨¡å—ã€‚</p><h3 id="æ›´æ–°-Hexo"><a href="#æ›´æ–°-Hexo" class="headerlink" title="æ›´æ–° Hexo"></a>æ›´æ–° Hexo</h3><p>å®˜æ–¹å‘å¸ƒäº†æ–°ç‰ˆæœ¬åï¼Œå¯ä»¥åœ¨Hexoå»ºç«‹çš„åšå®¢ç›®å½•å†…è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update</span><br></pre></td></tr></table></figure><p>ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥æ£€æŸ¥package.jsonæ–‡ä»¶ä¸­é…ç½®çš„dependenciesçš„ç‰ˆæœ¬å·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm ls --depth=0</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-Hexo-æ’ä»¶"><a href="#å®‰è£…-Hexo-æ’ä»¶" class="headerlink" title="å®‰è£… Hexo æ’ä»¶"></a>å®‰è£… Hexo æ’ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install &lt;module&gt; --save</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€äº›å¯é€‰æ’ä»¶çš„å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-all-minifier --save</span><br><span class="line">npm install hexo-admin --save</span><br><span class="line">npm install hexo-generator-archive --save</span><br><span class="line">npm install hexo-generator-tag --save</span><br><span class="line">npm install hexo-generator-feed --save</span><br><span class="line">npm install hexo-wordcount --save</span><br><span class="line">npm install hexo-helper-qrcode --save</span><br><span class="line">npm install hexo-generator-search --save</span><br><span class="line">npm install hexo-generator-searchdb --save</span><br><span class="line">npm i -S hexo-prism-plugin</span><br><span class="line">npm install hexo-abbrlink --save</span><br><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure><h1 id="é…ç½®æœåŠ¡å™¨ç¯å¢ƒ"><a href="#é…ç½®æœåŠ¡å™¨ç¯å¢ƒ" class="headerlink" title="é…ç½®æœåŠ¡å™¨ç¯å¢ƒ"></a>é…ç½®æœåŠ¡å™¨ç¯å¢ƒ</h1><h2 id="éƒ¨ç½²-Nginx"><a href="#éƒ¨ç½²-Nginx" class="headerlink" title="éƒ¨ç½² Nginx"></a>éƒ¨ç½² Nginx</h2><h3 id="å®‰è£…-Nginx-amp-amp-å¯åŠ¨-Nginx"><a href="#å®‰è£…-Nginx-amp-amp-å¯åŠ¨-Nginx" class="headerlink" title="å®‰è£… Nginx &amp;&amp; å¯åŠ¨ Nginx"></a>å®‰è£… Nginx &amp;&amp; å¯åŠ¨ Nginx</h3><p>æˆ‘æœåŠ¡å™¨çš„Nginxæ˜¯ç”¨Dockeréƒ¨ç½²çš„ï¼Œæ—©å·²ç»éƒ¨ç½²å¥½ã€‚è¿™æ­¥æš‚æ—¶è·³è¿‡ï¼Œæ—¥åè¡¥å……â€¦ï¼ˆåˆå·æ‡’äº†ï¼ˆé€ƒï½</p><h3 id="é…ç½®è™šæ‹Ÿä¸»æœº-amp-amp-åˆ›å»ºæ–°çš„ç½‘ç«™ç›®å½•-amp-amp-åˆ›å»ºè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶"><a href="#é…ç½®è™šæ‹Ÿä¸»æœº-amp-amp-åˆ›å»ºæ–°çš„ç½‘ç«™ç›®å½•-amp-amp-åˆ›å»ºè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®è™šæ‹Ÿä¸»æœº &amp;&amp; åˆ›å»ºæ–°çš„ç½‘ç«™ç›®å½• &amp;&amp; åˆ›å»ºè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶"></a>é…ç½®è™šæ‹Ÿä¸»æœº &amp;&amp; åˆ›å»ºæ–°çš„ç½‘ç«™ç›®å½• &amp;&amp; åˆ›å»ºè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶</h3><p>åŒä¸Šï¼ˆé€ƒï½</p><h2 id="éƒ¨ç½²-Hexo-åˆ°æœåŠ¡å™¨"><a href="#éƒ¨ç½²-Hexo-åˆ°æœåŠ¡å™¨" class="headerlink" title="éƒ¨ç½² Hexo åˆ°æœåŠ¡å™¨"></a>éƒ¨ç½² Hexo åˆ°æœåŠ¡å™¨</h2><p>Hexo å¯ä»¥ä½¿ç”¨ git æ–¹å¼éƒ¨ç½²ã€‚<br>(ç½‘ç«™çš„ç›®å½•åœ¨ä¸‹é¢ç»Ÿä¸€ç”¨ <code>&lt;your-website&gt;</code> ä»£æ›¿ï¼Œå¦‚ä½ çš„ç›®å½•åœ¨ <code>/var/www/html</code> ï¼Œé‚£å°±ç”¨ <code>/var/www/html</code> æ›¿æ¢ <code>&lt;your-website&gt;</code> )</p><p>åˆ›å»ºç©ºç™½ git ä»“åº“ï¼Œå¹¶ä¸”è®¾ç½® git hook</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">mkdir blog_hexo.git &amp;&amp; <span class="built_in">cd</span> blog_hexo.git</span><br><span class="line">git init --bare</span><br></pre></td></tr></table></figure><p>æ–°å»º post-receive è„šæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> hooks</span><br><span class="line">touch post-receive</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘ <font color='red'>~/blog_hexo.git/hooks/post-receive</font> è„šæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">GIT_REPO=/home/xxx/blog_hexo.git</span><br><span class="line">TMP_GIT_CLONE=/tmp/HexoBlog</span><br><span class="line">PUBLIC_WWW=&lt;your-website&gt;</span><br><span class="line">rm -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span></span><br><span class="line">git <span class="built_in">clone</span> <span class="variable">$GIT_REPO</span> <span class="variable">$TMP_GIT_CLONE</span></span><br><span class="line">rm -rf <span class="variable">$&#123;PUBLIC_WWW&#125;</span>/*</span><br><span class="line">cp -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span>/* <span class="variable">$&#123;PUBLIC_WWW&#125;</span></span><br></pre></td></tr></table></figure><p>èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 post-receive</span><br><span class="line">//æˆ– chmod +x post-receive</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ol><li><p>è¿™é‡Œè¦å…ˆç¡®ä¿ <font color='red'>&lt;your-website&gt;</font> ç›®å½•ä¸‹æ²¡æœ‰ä»»ä½•æ–‡ä»¶ã€‚å¤‡ä»½å¥½æ–‡ä»¶åæ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf &lt;your-website&gt;/*</span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œ <code>ls -l &lt;your-website&gt;</code> å‘½ä»¤æ£€æŸ¥è¯¥ç›®å½•åŠå…¶å­ç›®å½•ï¼ˆæ–‡ä»¶ï¼‰æ‰€æœ‰è€…å’Œç”¨æˆ·ç»„æ˜¯å¦ä¸ºä½ å½“å‰ä½¿ç”¨çš„ç”¨æˆ·ã€‚<br>è‹¥æ˜¾ç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drwxr-xr-x  2 root   root   4096 Jun  4 07:00 &lt;your-website&gt;</span><br></pre></td></tr></table></figure><p> åˆ™è¯´æ˜ä½ çš„ç½‘ç«™ç›®å½•çš„æ‰€æœ‰è€…ä»¥åŠç”¨æˆ·ç»„éƒ½æ˜¯rootï¼Œé‚£ä¹ˆå½“ä½ ç”¨git-hooksæŠŠtmpç›®å½•çš„é™æ€åšå®¢æ‹·è´åˆ° <code>&lt;your-website&gt;</code> æ—¶ï¼Œä¼šç”±äºæ²¡æœ‰æƒé™è€Œå¯¼è‡´æ‹·è´å¤±è´¥ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠ<your-website>çš„æ‰€æœ‰è€…å’Œç”¨æˆ·ç»„éƒ½æ”¹ä¸ºä½ å½“å‰ä½¿ç”¨çš„ç”¨æˆ·ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown <span class="variable">$USER</span>:<span class="variable">$USER</span> -R &lt;your-website&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="é…ç½®æœ¬æœº"><a href="#é…ç½®æœ¬æœº" class="headerlink" title="é…ç½®æœ¬æœº"></a>é…ç½®æœ¬æœº</h2><p>åœ¨åšå®¢ç›®å½•ä¸‹è¿è¡Œä¸‹é¢å‘½ä»¤ï¼Œå®‰è£… git éƒ¨ç½²æ’ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹åšå®¢çš„é…ç½®æ–‡ä»¶ _config.ymlï¼Œä¿®æ”¹deployé€‰é¡¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  message: update</span><br><span class="line">  repo: xxx@127.0.0.1:/home/xxx/blog_hexo.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œ <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</code> å³å¯éƒ¨ç½²æœ¬åœ°æ¸²æŸ“ç½‘é¡µåˆ°æœåŠ¡å™¨ä¸Šï¼Œä¹‹ååªéœ€è¦è®¿é—®é¢ä½ çš„åŸŸåå°±å¯ä»¥è®¿é—®ä½ çš„hexoåšå®¢å•¦ï¼å¦‚æˆ‘çš„åšå®¢æ˜¯ <a href="http://reb.mallotec.com/">reb.mallotec.com</a><br><strong>æ³¨ï¼š</strong>è¯·æŠŠ127.0.0.1æ›¿æ¢æˆè‡ªå·±æœåŠ¡å™¨çš„ip</p><h1 id="é™„ï¼šHexo-ä¸ªæ€§åŒ–â€“-gt-NexTä¸»é¢˜"><a href="#é™„ï¼šHexo-ä¸ªæ€§åŒ–â€“-gt-NexTä¸»é¢˜" class="headerlink" title="é™„ï¼šHexo ä¸ªæ€§åŒ–â€“&gt;NexTä¸»é¢˜"></a>é™„ï¼šHexo ä¸ªæ€§åŒ–â€“&gt;NexTä¸»é¢˜</h1><blockquote><p>å‚è€ƒï¼š<a href="http://vinnyxiong.cn/blog/Hexo%E4%B9%8B%E6%97%85-%E4%B8%89-%EF%BC%9AHexo%E5%8D%9A%E5%AE%A2%E4%B8%AA%E6%80%A7%E5%8C%96%E5%8F%8ANexT%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE.html">Hexoä¹‹æ—…(ä¸‰)ï¼šHexoåšå®¢ä¸ªæ€§åŒ–åŠNexTä¸»é¢˜é…ç½®</a></p></blockquote><h2 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h2><p>NexT ä¸»é¢˜æä¾›äº†è¯¦ç»†çš„ <a href="http://theme-next.iissnan.com/">ä½¿ç”¨æ–‡æ¡£</a> ã€‚</p><h2 id="ä¸‹è½½ä¸»é¢˜"><a href="#ä¸‹è½½ä¸»é¢˜" class="headerlink" title="ä¸‹è½½ä¸»é¢˜"></a>ä¸‹è½½ä¸»é¢˜</h2><p>ä¸»é¢˜çš„å®‰è£…å¾ˆç®€å•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> your-hexo-folder</span><br><span class="line">mkdir themes/next</span><br><span class="line">curl -s https://api.github.com/repos/iissnan/hexo-theme-next/releases/latest | grep tarball_url | cut -d <span class="string">&#x27;&quot;&#x27;</span> -f 4 | wget -i - -O- | tar -zx -C themes/next --strip-components=1</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> your-hexo-site</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><h2 id="å¯ç”¨-NexT-ä¸»é¢˜"><a href="#å¯ç”¨-NexT-ä¸»é¢˜" class="headerlink" title="å¯ç”¨ NexT ä¸»é¢˜"></a>å¯ç”¨ NexT ä¸»é¢˜</h2><p>å…‹éš†/ä¸‹è½½ å®Œæˆåï¼Œæ‰“å¼€ ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°<code>theme</code>å­—æ®µï¼Œå¹¶å°†å…¶å€¼æ›´æ”¹ä¸º<code>next</code>ã€‚</p><blockquote><p>è¿™é‡Œæ³¨æ„åŒºåˆ†ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼š<br>ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼šæ˜¯ä½ çš„ hexo åšå®¢ç›®å½•ä¸‹é¢çš„ _config.yml æ–‡ä»¶ã€‚<br>ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼šæ˜¯ themes/next ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶ã€‚</p></blockquote><h2 id="éªŒè¯ä¸»é¢˜æ˜¯å¦å¯ç”¨ï¼ˆè¿™æ­¥æˆ‘æ²¡æ‰§è¡Œè¿‡-ï¼‰"><a href="#éªŒè¯ä¸»é¢˜æ˜¯å¦å¯ç”¨ï¼ˆè¿™æ­¥æˆ‘æ²¡æ‰§è¡Œè¿‡-ï¼‰" class="headerlink" title="éªŒè¯ä¸»é¢˜æ˜¯å¦å¯ç”¨ï¼ˆè¿™æ­¥æˆ‘æ²¡æ‰§è¡Œè¿‡= =ï¼‰"></a>éªŒè¯ä¸»é¢˜æ˜¯å¦å¯ç”¨ï¼ˆè¿™æ­¥æˆ‘æ²¡æ‰§è¡Œè¿‡= =ï¼‰</h2><p>è¿è¡Œ<code>hexo s --debug</code>ï¼Œå¹¶è®¿é—®<code>http://localhost:4000</code>ï¼Œç¡®ä¿ç«™ç‚¹æ­£ç¡®è¿è¡Œã€‚</p><h2 id="é‡æ–°æ¸²æŸ“åšå®¢"><a href="#é‡æ–°æ¸²æŸ“åšå®¢" class="headerlink" title="é‡æ–°æ¸²æŸ“åšå®¢"></a>é‡æ–°æ¸²æŸ“åšå®¢</h2><p>å¯ç”¨ä¸»é¢˜åæœ€å¥½é‡æ–°æ¸²æŸ“ä¸€éåšå®¢ï¼Œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> hexo </tag>
            
            <tag> ä¸ªäººç»éªŒ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
